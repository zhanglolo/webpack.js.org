<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="noindex,nofollow"/><title>webpack 官方中文文档</title><meta name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换（transform）、打包（bundle）或包裹（package）任何资源(resource or asset)。"/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="webpack 官方中文文档"/><meta property="og:description" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换（transform）、打包（bundle）或包裹（package）任何资源(resource or asset)。"/><meta property="og:image" content="https://webpack.js.org/dcd5e077cf9f54ebe52d4f7ebe8c3080.png"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><meta name="keywords" content="webpack5, webpack, webpack 中文文档, 印记中文, docschina, docschina.org, webpack.docschina.org, doc.react-china.org, nodejs.cn, vue.docschina.org, babel.docschina.org, parceljs.docschina.org, rollup.docschina.org, koajs.docschina.org"/><link rel="icon" type="image/x-icon" href="/bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="/50fdfa6f49416fbf9d03.css"/><link rel="stylesheet" href="/3faf4b4c06cd5fb9953a.css"/><link rel="manifest" href="/manifest.json"/><link rel="canonical" href="https://webpack.js.org/api/printable/"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="/icon_192x192.png"/><link rel="icon" sizes="512x512" href="/icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="/icon_180x180.png"/><link rel="mask-icon" href="/aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="/"><img class="logo" src="/e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  navigation__item--active" href="/concepts/">文档</a><a class="navigation__item  " href="/contribute/">参与贡献</a><a class="navigation__item  " href="/vote/">投票</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">博客</a><a href="https://docschina.org" target="_blank" rel="noopener" class="navigation__item  ">印记中文</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="/57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"><a class="navigation-sub__link " title="指南" content="指南" href="/guides/">指南</a><a class="navigation-sub__link navigation-sub__link--active" title="api" content="api" href="/api/">api</a><a class="navigation-sub__link " title="plugin" content="plugin" href="/plugins/">plugin</a><a class="navigation-sub__link " title="概念" content="概念" href="/concepts/">概念</a><a class="navigation-sub__link " title="配置" content="配置" href="/configuration/">配置</a><a class="navigation-sub__link " title="迁移" content="迁移" href="/migrate/">迁移</a><a class="navigation-sub__link " title="loader" content="loader" href="/loaders/">loader</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="/bf176a25b4f8227fea804854c98dc5e2.png"/><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="sidebar__shields"><a href="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="/api/printable/" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/">简介</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="CLI"><a href="/api/#cli">CLI</a></li><li class="sidebar-item__anchor" title="模块"><a href="/api/#module">模块</a></li><li class="sidebar-item__anchor" title="Node"><a href="/api/#node">Node</a></li><li class="sidebar-item__anchor" title="Loaders"><a href="/api/#loaders">Loaders</a></li><li class="sidebar-item__anchor" title="插件"><a href="/api/#plugins">插件</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/cli/">命令行接口</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="使用配置文件的用法"><a href="/api/cli/#usage-with-configuration-file">使用配置文件的用法</a></li><li class="sidebar-item__anchor" title="不使用配置文件的用法"><a href="/api/cli/#usage-without-configuration-file">不使用配置文件的用法</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="常用配置"><a href="/api/cli/#common-options">常用配置</a></li><li class="sidebar-item__anchor" title="环境选项"><a href="/api/cli/#environment-options">环境选项</a></li><li class="sidebar-item__anchor" title="配置选项"><a href="/api/cli/#configuration-options">配置选项</a></li><li class="sidebar-item__anchor" title="输出配置"><a href="/api/cli/#output-options">输出配置</a></li><li class="sidebar-item__anchor" title="Debug 配置"><a href="/api/cli/#debug-options">Debug 配置</a></li><li class="sidebar-item__anchor" title="模块配置"><a href="/api/cli/#module-options">模块配置</a></li><li class="sidebar-item__anchor" title="Watch 选项"><a href="/api/cli/#watch-options">Watch 选项</a></li><li class="sidebar-item__anchor" title="性能优化配置"><a href="/api/cli/#optimize-options">性能优化配置</a></li><li class="sidebar-item__anchor" title="Resolve 配置"><a href="/api/cli/#resolve-options">Resolve 配置</a></li><li class="sidebar-item__anchor" title="统计数据配置"><a href="/api/cli/#stats-options">统计数据配置</a></li><li class="sidebar-item__anchor" title="高级配置"><a href="/api/cli/#advanced-options">高级配置</a></li><li class="sidebar-item__anchor" title="简写"><a href="/api/cli/#shortcuts">简写</a></li><li class="sidebar-item__anchor" title="Profiling"><a href="/api/cli/#profiling">Profiling</a></li></ul></li><li class="sidebar-item__anchor" title="将 CLI 参数传递给 Node.js"><a href="/api/cli/#pass-cli-arguments-to-nodejs">将 CLI 参数传递给 Node.js</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/node/">Node 接口</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="安装(Installation)"><a href="/api/node/#installation">安装(Installation)</a></li><li class="sidebar-item__anchor" title="webpack()"><a href="/api/node/#webpack">webpack()</a></li><li class="sidebar-item__anchor" title="Compiler 实例（Compiler Instance）"><a href="/api/node/#compiler-instance">Compiler 实例（Compiler Instance）</a></li><li class="sidebar-item__anchor" title="执行（Run）"><a href="/api/node/#run">执行（Run）</a></li><li class="sidebar-item__anchor" title="监听(Watching)"><a href="/api/node/#watching">监听(Watching)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="关闭 Watching (Close Watching)"><a href="/api/node/#close-watching">关闭 Watching (Close Watching)</a></li><li class="sidebar-item__anchor" title="Invalidate Watching"><a href="/api/node/#invalidate-watching">Invalidate Watching</a></li></ul></li><li class="sidebar-item__anchor" title="Stats 对象(Stats Object)"><a href="/api/node/#stats-object">Stats 对象(Stats Object)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="stats.hasErrors()"><a href="/api/node/#statshaserrors">stats.hasErrors()</a></li><li class="sidebar-item__anchor" title="stats.hasWarnings()"><a href="/api/node/#statshaswarnings">stats.hasWarnings()</a></li><li class="sidebar-item__anchor" title="stats.toJson(options)"><a href="/api/node/#statstojsonoptions">stats.toJson(options)</a></li><li class="sidebar-item__anchor" title="stats.toString(options)"><a href="/api/node/#statstostringoptions">stats.toString(options)</a></li></ul></li><li class="sidebar-item__anchor" title="MultiCompiler"><a href="/api/node/#multicompiler">MultiCompiler</a></li><li class="sidebar-item__anchor" title="错误处理(Error Handling)"><a href="/api/node/#error-handling">错误处理(Error Handling)</a></li><li class="sidebar-item__anchor" title="自定义文件系统(Custom File Systems)"><a href="/api/node/#custom-file-systems">自定义文件系统(Custom File Systems)</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/stats/">Stats Data</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Structure"><a href="/api/stats/#structure">Structure</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Asset Objects"><a href="/api/stats/#asset-objects">Asset Objects</a></li><li class="sidebar-item__anchor" title="Chunk Objects"><a href="/api/stats/#chunk-objects">Chunk Objects</a></li><li class="sidebar-item__anchor" title="Module Objects"><a href="/api/stats/#module-objects">Module Objects</a></li><li class="sidebar-item__anchor" title="Errors and Warnings"><a href="/api/stats/#errors-and-warnings">Errors and Warnings</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/hot-module-replacement/">Hot Module Replacement</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="模块 API"><a href="/api/hot-module-replacement/#module-api">模块 API</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="accept"><a href="/api/hot-module-replacement/#accept">accept</a></li><li class="sidebar-item__anchor" title="accept (自身)"><a href="/api/hot-module-replacement/#accept-self">accept (自身)</a></li><li class="sidebar-item__anchor" title="decline"><a href="/api/hot-module-replacement/#decline">decline</a></li><li class="sidebar-item__anchor" title="decline (自身)"><a href="/api/hot-module-replacement/#decline-self">decline (自身)</a></li><li class="sidebar-item__anchor" title="dispose (or addDisposeHandler)"><a href="/api/hot-module-replacement/#dispose-or-adddisposehandler">dispose (or addDisposeHandler)</a></li><li class="sidebar-item__anchor" title="invalidate"><a href="/api/hot-module-replacement/#invalidate">invalidate</a></li><li class="sidebar-item__anchor" title="用例"><a href="/api/hot-module-replacement/#use-cases">用例</a></li><li class="sidebar-item__anchor" title="removeDisposeHandler"><a href="/api/hot-module-replacement/#removedisposehandler">removeDisposeHandler</a></li></ul></li><li class="sidebar-item__anchor" title="API 管理"><a href="/api/hot-module-replacement/#management-api">API 管理</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="status"><a href="/api/hot-module-replacement/#status">status</a></li><li class="sidebar-item__anchor" title="check"><a href="/api/hot-module-replacement/#check">check</a></li><li class="sidebar-item__anchor" title="apply"><a href="/api/hot-module-replacement/#apply">apply</a></li><li class="sidebar-item__anchor" title="addStatusHandler"><a href="/api/hot-module-replacement/#addstatushandler">addStatusHandler</a></li><li class="sidebar-item__anchor" title="removeStatusHandler"><a href="/api/hot-module-replacement/#removestatushandler">removeStatusHandler</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/loaders/">Loader Interface</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Examples"><a href="/api/loaders/#examples">Examples</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Synchronous Loaders"><a href="/api/loaders/#synchronous-loaders">Synchronous Loaders</a></li><li class="sidebar-item__anchor" title="Asynchronous Loaders"><a href="/api/loaders/#asynchronous-loaders">Asynchronous Loaders</a></li><li class="sidebar-item__anchor" title="&quot;Raw&quot; Loader"><a href="/api/loaders/#raw-loader">&quot;Raw&quot; Loader</a></li><li class="sidebar-item__anchor" title="Pitching Loader"><a href="/api/loaders/#pitching-loader">Pitching Loader</a></li></ul></li><li class="sidebar-item__anchor" title="The Loader Context"><a href="/api/loaders/#the-loader-context">The Loader Context</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="this.version"><a href="/api/loaders/#thisversion">this.version</a></li><li class="sidebar-item__anchor" title="this.context"><a href="/api/loaders/#thiscontext">this.context</a></li><li class="sidebar-item__anchor" title="this.rootContext"><a href="/api/loaders/#thisrootcontext">this.rootContext</a></li><li class="sidebar-item__anchor" title="this.request"><a href="/api/loaders/#thisrequest">this.request</a></li><li class="sidebar-item__anchor" title="this.query"><a href="/api/loaders/#thisquery">this.query</a></li><li class="sidebar-item__anchor" title="this.getOptions(schema)"><a href="/api/loaders/#thisgetoptionsschema">this.getOptions(schema)</a></li><li class="sidebar-item__anchor" title="this.callback"><a href="/api/loaders/#thiscallback">this.callback</a></li><li class="sidebar-item__anchor" title="this.async"><a href="/api/loaders/#thisasync">this.async</a></li><li class="sidebar-item__anchor" title="this.data"><a href="/api/loaders/#thisdata">this.data</a></li><li class="sidebar-item__anchor" title="this.cacheable"><a href="/api/loaders/#thiscacheable">this.cacheable</a></li><li class="sidebar-item__anchor" title="this.loaders"><a href="/api/loaders/#thisloaders">this.loaders</a></li><li class="sidebar-item__anchor" title="this.loaderIndex"><a href="/api/loaders/#thisloaderindex">this.loaderIndex</a></li><li class="sidebar-item__anchor" title="this.resource"><a href="/api/loaders/#thisresource">this.resource</a></li><li class="sidebar-item__anchor" title="this.resourcePath"><a href="/api/loaders/#thisresourcepath">this.resourcePath</a></li><li class="sidebar-item__anchor" title="this.resourceQuery"><a href="/api/loaders/#thisresourcequery">this.resourceQuery</a></li><li class="sidebar-item__anchor" title="this.target"><a href="/api/loaders/#thistarget">this.target</a></li><li class="sidebar-item__anchor" title="this.webpack"><a href="/api/loaders/#thiswebpack">this.webpack</a></li><li class="sidebar-item__anchor" title="this.sourceMap"><a href="/api/loaders/#thissourcemap">this.sourceMap</a></li><li class="sidebar-item__anchor" title="this.emitWarning"><a href="/api/loaders/#thisemitwarning">this.emitWarning</a></li><li class="sidebar-item__anchor" title="this.emitError"><a href="/api/loaders/#thisemiterror">this.emitError</a></li><li class="sidebar-item__anchor" title="this.loadModule"><a href="/api/loaders/#thisloadmodule">this.loadModule</a></li><li class="sidebar-item__anchor" title="this.resolve"><a href="/api/loaders/#thisresolve">this.resolve</a></li><li class="sidebar-item__anchor" title="this.addDependency"><a href="/api/loaders/#thisadddependency">this.addDependency</a></li><li class="sidebar-item__anchor" title="this.addContextDependency"><a href="/api/loaders/#thisaddcontextdependency">this.addContextDependency</a></li><li class="sidebar-item__anchor" title="this.clearDependencies"><a href="/api/loaders/#thiscleardependencies">this.clearDependencies</a></li><li class="sidebar-item__anchor" title="this.emitFile"><a href="/api/loaders/#thisemitfile">this.emitFile</a></li><li class="sidebar-item__anchor" title="this.hot"><a href="/api/loaders/#thishot">this.hot</a></li><li class="sidebar-item__anchor" title="this.fs"><a href="/api/loaders/#thisfs">this.fs</a></li><li class="sidebar-item__anchor" title="this.mode"><a href="/api/loaders/#thismode">this.mode</a></li></ul></li><li class="sidebar-item__anchor" title="Deprecated context properties"><a href="/api/loaders/#deprecated-context-properties">Deprecated context properties</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="this.exec"><a href="/api/loaders/#thisexec">this.exec</a></li><li class="sidebar-item__anchor" title="this.value"><a href="/api/loaders/#thisvalue">this.value</a></li><li class="sidebar-item__anchor" title="this.inputValue"><a href="/api/loaders/#thisinputvalue">this.inputValue</a></li><li class="sidebar-item__anchor" title="this.debug"><a href="/api/loaders/#thisdebug">this.debug</a></li><li class="sidebar-item__anchor" title="this.minimize"><a href="/api/loaders/#thisminimize">this.minimize</a></li><li class="sidebar-item__anchor" title="this._compilation"><a href="/api/loaders/#this_compilation">this._compilation</a></li><li class="sidebar-item__anchor" title="this._compiler"><a href="/api/loaders/#this_compiler">this._compiler</a></li><li class="sidebar-item__anchor" title="this._module"><a href="/api/loaders/#this_module">this._module</a></li></ul></li><li class="sidebar-item__anchor" title="Error Reporting"><a href="/api/loaders/#error-reporting">Error Reporting</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Inline matchResource"><a href="/api/loaders/#inline-matchresource">Inline matchResource</a></li></ul></li><li class="sidebar-item__anchor" title="Logging"><a href="/api/loaders/#logging">Logging</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/logging/">Logger 接口</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Examples of how to get and use webpack logger in loaders and plugins"><a href="/api/logging/#examples-of-how-to-get-and-use-webpack-logger-in-loaders-and-plugins">Examples of how to get and use webpack logger in loaders and plugins</a></li><li class="sidebar-item__anchor" title="Logger methods"><a href="/api/logging/#logger-methods">Logger methods</a></li><li class="sidebar-item__anchor" title="Runtime Logger API"><a href="/api/logging/#runtime-logger-api">Runtime Logger API</a></li></ul></div></div><div><h4 class="sidebar__group">Modules</h4><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/module-methods/">模块方法</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ES6 (推荐)"><a href="/api/module-methods/#es6-recommended">ES6 (推荐)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="import"><a href="/api/module-methods/#import">import</a></li><li class="sidebar-item__anchor" title="export"><a href="/api/module-methods/#export">export</a></li><li class="sidebar-item__anchor" title="import()"><a href="/api/module-methods/#import">import()</a></li><li class="sidebar-item__anchor" title="import() 中的表达式"><a href="/api/module-methods/#dynamic-expressions-in-import">import() 中的表达式</a></li></ul></li><li class="sidebar-item__anchor" title="CommonJS"><a href="/api/module-methods/#commonjs">CommonJS</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="require"><a href="/api/module-methods/#require">require</a></li><li class="sidebar-item__anchor" title="require.resolve"><a href="/api/module-methods/#requireresolve">require.resolve</a></li><li class="sidebar-item__anchor" title="require.cache"><a href="/api/module-methods/#requirecache">require.cache</a></li><li class="sidebar-item__anchor" title="require.ensure"><a href="/api/module-methods/#requireensure">require.ensure</a></li></ul></li><li class="sidebar-item__anchor" title="AMD"><a href="/api/module-methods/#amd">AMD</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="define (通过 factory 方法导出)"><a href="/api/module-methods/#define-with-factory">define (通过 factory 方法导出)</a></li><li class="sidebar-item__anchor" title="define (通过 value 导出)"><a href="/api/module-methods/#define-with-value">define (通过 value 导出)</a></li><li class="sidebar-item__anchor" title="require (AMD 版本)"><a href="/api/module-methods/#require-amd-version">require (AMD 版本)</a></li></ul></li><li class="sidebar-item__anchor" title="标签模块(Labeled Modules)"><a href="/api/module-methods/#labeled-modules">标签模块(Labeled Modules)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="export 标签"><a href="/api/module-methods/#export-label">export 标签</a></li><li class="sidebar-item__anchor" title="require 标签"><a href="/api/module-methods/#require-label">require 标签</a></li></ul></li><li class="sidebar-item__anchor" title="Webpack"><a href="/api/module-methods/#webpack">Webpack</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="require.context"><a href="/api/module-methods/#requirecontext">require.context</a></li><li class="sidebar-item__anchor" title="require.include"><a href="/api/module-methods/#requireinclude">require.include</a></li><li class="sidebar-item__anchor" title="require.resolveWeak"><a href="/api/module-methods/#requireresolveweak">require.resolveWeak</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/module-variables/">Module Variables</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="module.loaded (NodeJS)"><a href="/api/module-variables/#moduleloaded-nodejs">module.loaded (NodeJS)</a></li><li class="sidebar-item__anchor" title="module.hot (webpack-specific)"><a href="/api/module-variables/#modulehot-webpack-specific">module.hot (webpack-specific)</a></li><li class="sidebar-item__anchor" title="module.id (CommonJS)"><a href="/api/module-variables/#moduleid-commonjs">module.id (CommonJS)</a></li><li class="sidebar-item__anchor" title="module.exports (CommonJS)"><a href="/api/module-variables/#moduleexports-commonjs">module.exports (CommonJS)</a></li><li class="sidebar-item__anchor" title="exports (CommonJS)"><a href="/api/module-variables/#exports-commonjs">exports (CommonJS)</a></li><li class="sidebar-item__anchor" title="global (NodeJS)"><a href="/api/module-variables/#global-nodejs">global (NodeJS)</a></li><li class="sidebar-item__anchor" title="process (NodeJS)"><a href="/api/module-variables/#process-nodejs">process (NodeJS)</a></li><li class="sidebar-item__anchor" title="__dirname (NodeJS)"><a href="/api/module-variables/#__dirname-nodejs">__dirname (NodeJS)</a></li><li class="sidebar-item__anchor" title="__filename (NodeJS)"><a href="/api/module-variables/#__filename-nodejs">__filename (NodeJS)</a></li><li class="sidebar-item__anchor" title="__resourceQuery (webpack 特有变量)"><a href="/api/module-variables/#__resourcequery-webpack-specific">__resourceQuery (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="__webpack_public_path__ (webpack 特有变量)"><a href="/api/module-variables/#webpack_public_path-webpack-specific">__webpack_public_path__ (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="__webpack_require__ (webpack 特有变量)"><a href="/api/module-variables/#webpack_require-webpack-specific">__webpack_require__ (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="__webpack_chunk_load__ (webpack 特有变量)"><a href="/api/module-variables/#webpack_chunk_load-webpack-specific">__webpack_chunk_load__ (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="__webpack_modules__ (webpack 特有变量)"><a href="/api/module-variables/#webpack_modules-webpack-specific">__webpack_modules__ (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="__webpack_hash__ (webpack 特有变量)"><a href="/api/module-variables/#webpack_hash-webpack-specific">__webpack_hash__ (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="__non_webpack_require__ (webpack 特有变量)"><a href="/api/module-variables/#non_webpack_require-webpack-specific">__non_webpack_require__ (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="__webpack_exports_info__ (webpack 特有变量)"><a href="/api/module-variables/#webpack_exports_info-webpack-specific">__webpack_exports_info__ (webpack 特有变量)</a></li><li class="sidebar-item__anchor" title="DEBUG  (webpack 特有变量)"><a href="/api/module-variables/#debug--webpack-specific">DEBUG  (webpack 特有变量)</a></li></ul></div></div><div><h4 class="sidebar__group">Objects</h4><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/compilation-object/">Compilation Object</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="compilation 对象方法"><a href="/api/compilation-object/#compilation-object-methods">compilation 对象方法</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="getStats"><a href="/api/compilation-object/#getstats">getStats</a></li><li class="sidebar-item__anchor" title="addModule"><a href="/api/compilation-object/#addmodule">addModule</a></li><li class="sidebar-item__anchor" title="getModule"><a href="/api/compilation-object/#getmodule">getModule</a></li><li class="sidebar-item__anchor" title="findModule"><a href="/api/compilation-object/#findmodule">findModule</a></li><li class="sidebar-item__anchor" title="waitForBuildingFinished"><a href="/api/compilation-object/#waitforbuildingfinished">waitForBuildingFinished</a></li><li class="sidebar-item__anchor" title="buildModule"><a href="/api/compilation-object/#buildmodule">buildModule</a></li><li class="sidebar-item__anchor" title="processModuleDependencies"><a href="/api/compilation-object/#processmoduledependencies">processModuleDependencies</a></li><li class="sidebar-item__anchor" title="addModuleDependencies"><a href="/api/compilation-object/#addmoduledependencies">addModuleDependencies</a></li><li class="sidebar-item__anchor" title="addEntry"><a href="/api/compilation-object/#addentry">addEntry</a></li><li class="sidebar-item__anchor" title="prefetch"><a href="/api/compilation-object/#prefetch">prefetch</a></li><li class="sidebar-item__anchor" title="rebuildModule"><a href="/api/compilation-object/#rebuildmodule">rebuildModule</a></li><li class="sidebar-item__anchor" title="finish"><a href="/api/compilation-object/#finish">finish</a></li><li class="sidebar-item__anchor" title="seal"><a href="/api/compilation-object/#seal">seal</a></li><li class="sidebar-item__anchor" title="unseal"><a href="/api/compilation-object/#unseal">unseal</a></li><li class="sidebar-item__anchor" title="reportDependencyErrorsAndWarnings"><a href="/api/compilation-object/#reportdependencyerrorsandwarnings">reportDependencyErrorsAndWarnings</a></li><li class="sidebar-item__anchor" title="addChunkInGroup"><a href="/api/compilation-object/#addchunkingroup">addChunkInGroup</a></li><li class="sidebar-item__anchor" title="addChunk"><a href="/api/compilation-object/#addchunk">addChunk</a></li><li class="sidebar-item__anchor" title="assignDepth"><a href="/api/compilation-object/#assigndepth">assignDepth</a></li><li class="sidebar-item__anchor" title="getDependencyReference"><a href="/api/compilation-object/#getdependencyreference">getDependencyReference</a></li><li class="sidebar-item__anchor" title="processDependenciesBlocksForChunkGroups"><a href="/api/compilation-object/#processdependenciesblocksforchunkgroups">processDependenciesBlocksForChunkGroups</a></li><li class="sidebar-item__anchor" title="removeReasonsOfDependencyBlock"><a href="/api/compilation-object/#removereasonsofdependencyblock">removeReasonsOfDependencyBlock</a></li><li class="sidebar-item__anchor" title="patchChunksAfterReasonRemoval"><a href="/api/compilation-object/#patchchunksafterreasonremoval">patchChunksAfterReasonRemoval</a></li><li class="sidebar-item__anchor" title="removeChunkFromDependencies"><a href="/api/compilation-object/#removechunkfromdependencies">removeChunkFromDependencies</a></li><li class="sidebar-item__anchor" title="sortItemsWithModuleIds"><a href="/api/compilation-object/#sortitemswithmoduleids">sortItemsWithModuleIds</a></li><li class="sidebar-item__anchor" title="sortItemsWithChunkIds"><a href="/api/compilation-object/#sortitemswithchunkids">sortItemsWithChunkIds</a></li><li class="sidebar-item__anchor" title="summarizeDependencies"><a href="/api/compilation-object/#summarizedependencies">summarizeDependencies</a></li><li class="sidebar-item__anchor" title="createHash"><a href="/api/compilation-object/#createhash">createHash</a></li><li class="sidebar-item__anchor" title="modifyHash"><a href="/api/compilation-object/#modifyhash">modifyHash</a></li><li class="sidebar-item__anchor" title="createModuleAssets"><a href="/api/compilation-object/#createmoduleassets">createModuleAssets</a></li><li class="sidebar-item__anchor" title="createChunkAssets"><a href="/api/compilation-object/#createchunkassets">createChunkAssets</a></li><li class="sidebar-item__anchor" title="getPath"><a href="/api/compilation-object/#getpath">getPath</a></li><li class="sidebar-item__anchor" title="getPathWithInfo"><a href="/api/compilation-object/#getpathwithinfo">getPathWithInfo</a></li><li class="sidebar-item__anchor" title="createChildCompiler"><a href="/api/compilation-object/#createchildcompiler">createChildCompiler</a></li><li class="sidebar-item__anchor" title="checkConstraints"><a href="/api/compilation-object/#checkconstraints">checkConstraints</a></li><li class="sidebar-item__anchor" title="emitAsset"><a href="/api/compilation-object/#emitasset">emitAsset</a></li><li class="sidebar-item__anchor" title="updateAsset"><a href="/api/compilation-object/#updateasset">updateAsset</a></li><li class="sidebar-item__anchor" title="getAssets"><a href="/api/compilation-object/#getassets">getAssets</a></li><li class="sidebar-item__anchor" title="getAsset"><a href="/api/compilation-object/#getasset">getAsset</a></li></ul></li></ul></div></div><div><h4 class="sidebar__group">Plugins</h4><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/compiler-hooks/">compiler 钩子</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="监听(watching)"><a href="/api/compiler-hooks/#watching">监听(watching)</a></li><li class="sidebar-item__anchor" title="钩子"><a href="/api/compiler-hooks/#hooks">钩子</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="entryOption"><a href="/api/compiler-hooks/#entryoption">entryOption</a></li><li class="sidebar-item__anchor" title="afterPlugins"><a href="/api/compiler-hooks/#afterplugins">afterPlugins</a></li><li class="sidebar-item__anchor" title="afterResolvers"><a href="/api/compiler-hooks/#afterresolvers">afterResolvers</a></li><li class="sidebar-item__anchor" title="environment"><a href="/api/compiler-hooks/#environment">environment</a></li><li class="sidebar-item__anchor" title="afterEnvironment"><a href="/api/compiler-hooks/#afterenvironment">afterEnvironment</a></li><li class="sidebar-item__anchor" title="beforeRun"><a href="/api/compiler-hooks/#beforerun">beforeRun</a></li><li class="sidebar-item__anchor" title="additionalPass"><a href="/api/compiler-hooks/#additionalpass">additionalPass</a></li><li class="sidebar-item__anchor" title="run"><a href="/api/compiler-hooks/#run">run</a></li><li class="sidebar-item__anchor" title="watchRun"><a href="/api/compiler-hooks/#watchrun">watchRun</a></li><li class="sidebar-item__anchor" title="normalModuleFactory"><a href="/api/compiler-hooks/#normalmodulefactory">normalModuleFactory</a></li><li class="sidebar-item__anchor" title="contextModuleFactory"><a href="/api/compiler-hooks/#contextmodulefactory">contextModuleFactory</a></li><li class="sidebar-item__anchor" title="initialize"><a href="/api/compiler-hooks/#initialize">initialize</a></li><li class="sidebar-item__anchor" title="beforeCompile"><a href="/api/compiler-hooks/#beforecompile">beforeCompile</a></li><li class="sidebar-item__anchor" title="compile"><a href="/api/compiler-hooks/#compile">compile</a></li><li class="sidebar-item__anchor" title="thisCompilation"><a href="/api/compiler-hooks/#thiscompilation">thisCompilation</a></li><li class="sidebar-item__anchor" title="compilation"><a href="/api/compiler-hooks/#compilation">compilation</a></li><li class="sidebar-item__anchor" title="make"><a href="/api/compiler-hooks/#make">make</a></li><li class="sidebar-item__anchor" title="afterCompile"><a href="/api/compiler-hooks/#aftercompile">afterCompile</a></li><li class="sidebar-item__anchor" title="shouldEmit"><a href="/api/compiler-hooks/#shouldemit">shouldEmit</a></li><li class="sidebar-item__anchor" title="emit"><a href="/api/compiler-hooks/#emit">emit</a></li><li class="sidebar-item__anchor" title="afterEmit"><a href="/api/compiler-hooks/#afteremit">afterEmit</a></li><li class="sidebar-item__anchor" title="assetEmitted"><a href="/api/compiler-hooks/#assetemitted">assetEmitted</a></li><li class="sidebar-item__anchor" title="done"><a href="/api/compiler-hooks/#done">done</a></li><li class="sidebar-item__anchor" title="failed"><a href="/api/compiler-hooks/#failed">failed</a></li><li class="sidebar-item__anchor" title="invalid"><a href="/api/compiler-hooks/#invalid">invalid</a></li><li class="sidebar-item__anchor" title="watchClose"><a href="/api/compiler-hooks/#watchclose">watchClose</a></li><li class="sidebar-item__anchor" title="infrastructureLog"><a href="/api/compiler-hooks/#infrastructurelog">infrastructureLog</a></li><li class="sidebar-item__anchor" title="log"><a href="/api/compiler-hooks/#log">log</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/compilation-hooks/">compilation 钩子</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="buildModule"><a href="/api/compilation-hooks/#buildmodule">buildModule</a></li><li class="sidebar-item__anchor" title="rebuildModule"><a href="/api/compilation-hooks/#rebuildmodule">rebuildModule</a></li><li class="sidebar-item__anchor" title="failedModule"><a href="/api/compilation-hooks/#failedmodule">failedModule</a></li><li class="sidebar-item__anchor" title="succeedModule"><a href="/api/compilation-hooks/#succeedmodule">succeedModule</a></li><li class="sidebar-item__anchor" title="finishModules"><a href="/api/compilation-hooks/#finishmodules">finishModules</a></li><li class="sidebar-item__anchor" title="finishRebuildingModule"><a href="/api/compilation-hooks/#finishrebuildingmodule">finishRebuildingModule</a></li><li class="sidebar-item__anchor" title="seal"><a href="/api/compilation-hooks/#seal">seal</a></li><li class="sidebar-item__anchor" title="unseal"><a href="/api/compilation-hooks/#unseal">unseal</a></li><li class="sidebar-item__anchor" title="optimizeDependencies"><a href="/api/compilation-hooks/#optimizedependencies">optimizeDependencies</a></li><li class="sidebar-item__anchor" title="afterOptimizeDependencies"><a href="/api/compilation-hooks/#afteroptimizedependencies">afterOptimizeDependencies</a></li><li class="sidebar-item__anchor" title="optimize"><a href="/api/compilation-hooks/#optimize">optimize</a></li><li class="sidebar-item__anchor" title="optimizeModules"><a href="/api/compilation-hooks/#optimizemodules">optimizeModules</a></li><li class="sidebar-item__anchor" title="afterOptimizeModules"><a href="/api/compilation-hooks/#afteroptimizemodules">afterOptimizeModules</a></li><li class="sidebar-item__anchor" title="optimizeChunks"><a href="/api/compilation-hooks/#optimizechunks">optimizeChunks</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunks"><a href="/api/compilation-hooks/#afteroptimizechunks">afterOptimizeChunks</a></li><li class="sidebar-item__anchor" title="optimizeTree"><a href="/api/compilation-hooks/#optimizetree">optimizeTree</a></li><li class="sidebar-item__anchor" title="afterOptimizeTree"><a href="/api/compilation-hooks/#afteroptimizetree">afterOptimizeTree</a></li><li class="sidebar-item__anchor" title="optimizeChunkModules"><a href="/api/compilation-hooks/#optimizechunkmodules">optimizeChunkModules</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunkModules"><a href="/api/compilation-hooks/#afteroptimizechunkmodules">afterOptimizeChunkModules</a></li><li class="sidebar-item__anchor" title="shouldRecord"><a href="/api/compilation-hooks/#shouldrecord">shouldRecord</a></li><li class="sidebar-item__anchor" title="reviveModules"><a href="/api/compilation-hooks/#revivemodules">reviveModules</a></li><li class="sidebar-item__anchor" title="beforeModuleIds"><a href="/api/compilation-hooks/#beforemoduleids">beforeModuleIds</a></li><li class="sidebar-item__anchor" title="moduleIds"><a href="/api/compilation-hooks/#moduleids">moduleIds</a></li><li class="sidebar-item__anchor" title="optimizeModuleIds"><a href="/api/compilation-hooks/#optimizemoduleids">optimizeModuleIds</a></li><li class="sidebar-item__anchor" title="afterOptimizeModuleIds"><a href="/api/compilation-hooks/#afteroptimizemoduleids">afterOptimizeModuleIds</a></li><li class="sidebar-item__anchor" title="reviveChunks"><a href="/api/compilation-hooks/#revivechunks">reviveChunks</a></li><li class="sidebar-item__anchor" title="beforeChunkIds"><a href="/api/compilation-hooks/#beforechunkids">beforeChunkIds</a></li><li class="sidebar-item__anchor" title="optimizeChunkIds"><a href="/api/compilation-hooks/#optimizechunkids">optimizeChunkIds</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunkIds"><a href="/api/compilation-hooks/#afteroptimizechunkids">afterOptimizeChunkIds</a></li><li class="sidebar-item__anchor" title="recordModules"><a href="/api/compilation-hooks/#recordmodules">recordModules</a></li><li class="sidebar-item__anchor" title="recordChunks"><a href="/api/compilation-hooks/#recordchunks">recordChunks</a></li><li class="sidebar-item__anchor" title="beforeHash"><a href="/api/compilation-hooks/#beforehash">beforeHash</a></li><li class="sidebar-item__anchor" title="afterHash"><a href="/api/compilation-hooks/#afterhash">afterHash</a></li><li class="sidebar-item__anchor" title="recordHash"><a href="/api/compilation-hooks/#recordhash">recordHash</a></li><li class="sidebar-item__anchor" title="record"><a href="/api/compilation-hooks/#record">record</a></li><li class="sidebar-item__anchor" title="beforeModuleAssets"><a href="/api/compilation-hooks/#beforemoduleassets">beforeModuleAssets</a></li><li class="sidebar-item__anchor" title="additionalChunkAssets"><a href="/api/compilation-hooks/#additionalchunkassets">additionalChunkAssets</a></li><li class="sidebar-item__anchor" title="shouldGenerateChunkAssets"><a href="/api/compilation-hooks/#shouldgeneratechunkassets">shouldGenerateChunkAssets</a></li><li class="sidebar-item__anchor" title="beforeChunkAssets"><a href="/api/compilation-hooks/#beforechunkassets">beforeChunkAssets</a></li><li class="sidebar-item__anchor" title="additionalAssets"><a href="/api/compilation-hooks/#additionalassets">additionalAssets</a></li><li class="sidebar-item__anchor" title="optimizeChunkAssets"><a href="/api/compilation-hooks/#optimizechunkassets">optimizeChunkAssets</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunkAssets"><a href="/api/compilation-hooks/#afteroptimizechunkassets">afterOptimizeChunkAssets</a></li><li class="sidebar-item__anchor" title="optimizeAssets"><a href="/api/compilation-hooks/#optimizeassets">optimizeAssets</a></li><li class="sidebar-item__anchor" title="afterOptimizeAssets"><a href="/api/compilation-hooks/#afteroptimizeassets">afterOptimizeAssets</a></li><li class="sidebar-item__anchor" title="processAssets"><a href="/api/compilation-hooks/#processassets">processAssets</a></li><li class="sidebar-item__anchor" title="afterProcessAssets"><a href="/api/compilation-hooks/#afterprocessassets">afterProcessAssets</a></li><li class="sidebar-item__anchor" title="needAdditionalSeal"><a href="/api/compilation-hooks/#needadditionalseal">needAdditionalSeal</a></li><li class="sidebar-item__anchor" title="afterSeal"><a href="/api/compilation-hooks/#afterseal">afterSeal</a></li><li class="sidebar-item__anchor" title="chunkHash"><a href="/api/compilation-hooks/#chunkhash">chunkHash</a></li><li class="sidebar-item__anchor" title="moduleAsset"><a href="/api/compilation-hooks/#moduleasset">moduleAsset</a></li><li class="sidebar-item__anchor" title="chunkAsset"><a href="/api/compilation-hooks/#chunkasset">chunkAsset</a></li><li class="sidebar-item__anchor" title="assetPath"><a href="/api/compilation-hooks/#assetpath">assetPath</a></li><li class="sidebar-item__anchor" title="needAdditionalPass"><a href="/api/compilation-hooks/#needadditionalpass">needAdditionalPass</a></li><li class="sidebar-item__anchor" title="childCompiler"><a href="/api/compilation-hooks/#childcompiler">childCompiler</a></li><li class="sidebar-item__anchor" title="normalModuleLoader"><a href="/api/compilation-hooks/#normalmoduleloader">normalModuleLoader</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/parser/">JavascriptParser Hooks</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="钩子"><a href="/api/parser/#hooks">钩子</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="evaluateTypeof"><a href="/api/parser/#evaluatetypeof">evaluateTypeof</a></li><li class="sidebar-item__anchor" title="evaluate"><a href="/api/parser/#evaluate">evaluate</a></li><li class="sidebar-item__anchor" title="evaluateIdentifier"><a href="/api/parser/#evaluateidentifier">evaluateIdentifier</a></li><li class="sidebar-item__anchor" title="evaluateDefinedIdentifier"><a href="/api/parser/#evaluatedefinedidentifier">evaluateDefinedIdentifier</a></li><li class="sidebar-item__anchor" title="evaluateCallExpressionMember"><a href="/api/parser/#evaluatecallexpressionmember">evaluateCallExpressionMember</a></li><li class="sidebar-item__anchor" title="statement"><a href="/api/parser/#statement">statement</a></li><li class="sidebar-item__anchor" title="statementIf"><a href="/api/parser/#statementif">statementIf</a></li><li class="sidebar-item__anchor" title="label"><a href="/api/parser/#label">label</a></li><li class="sidebar-item__anchor" title="import"><a href="/api/parser/#import">import</a></li><li class="sidebar-item__anchor" title="importSpecifier"><a href="/api/parser/#importspecifier">importSpecifier</a></li><li class="sidebar-item__anchor" title="export"><a href="/api/parser/#export">export</a></li><li class="sidebar-item__anchor" title="exportImport"><a href="/api/parser/#exportimport">exportImport</a></li><li class="sidebar-item__anchor" title="exportDeclaration"><a href="/api/parser/#exportdeclaration">exportDeclaration</a></li><li class="sidebar-item__anchor" title="exportExpression"><a href="/api/parser/#exportexpression">exportExpression</a></li><li class="sidebar-item__anchor" title="exportSpecifier"><a href="/api/parser/#exportspecifier">exportSpecifier</a></li><li class="sidebar-item__anchor" title="exportImportSpecifier"><a href="/api/parser/#exportimportspecifier">exportImportSpecifier</a></li><li class="sidebar-item__anchor" title="varDeclaration"><a href="/api/parser/#vardeclaration">varDeclaration</a></li><li class="sidebar-item__anchor" title="varDeclarationLet"><a href="/api/parser/#vardeclarationlet">varDeclarationLet</a></li><li class="sidebar-item__anchor" title="varDeclarationConst"><a href="/api/parser/#vardeclarationconst">varDeclarationConst</a></li><li class="sidebar-item__anchor" title="varDeclarationVar"><a href="/api/parser/#vardeclarationvar">varDeclarationVar</a></li><li class="sidebar-item__anchor" title="canRename"><a href="/api/parser/#canrename">canRename</a></li><li class="sidebar-item__anchor" title="rename"><a href="/api/parser/#rename">rename</a></li><li class="sidebar-item__anchor" title="assigned"><a href="/api/parser/#assigned">assigned</a></li><li class="sidebar-item__anchor" title="assign"><a href="/api/parser/#assign">assign</a></li><li class="sidebar-item__anchor" title="typeof"><a href="/api/parser/#typeof">typeof</a></li><li class="sidebar-item__anchor" title="call"><a href="/api/parser/#call">call</a></li><li class="sidebar-item__anchor" title="callAnyMember"><a href="/api/parser/#callanymember">callAnyMember</a></li><li class="sidebar-item__anchor" title="new"><a href="/api/parser/#new">new</a></li><li class="sidebar-item__anchor" title="expression"><a href="/api/parser/#expression">expression</a></li><li class="sidebar-item__anchor" title="expressionAnyMember"><a href="/api/parser/#expressionanymember">expressionAnyMember</a></li><li class="sidebar-item__anchor" title="expressionConditionalOperator"><a href="/api/parser/#expressionconditionaloperator">expressionConditionalOperator</a></li><li class="sidebar-item__anchor" title="program"><a href="/api/parser/#program">program</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/plugins/">Plugin API</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Tapable"><a href="/api/plugins/#tapable">Tapable</a></li><li class="sidebar-item__anchor" title="插件类型"><a href="/api/plugins/#plugin-types">插件类型</a></li><li class="sidebar-item__anchor" title="自定义钩子"><a href="/api/plugins/#custom-hooks">自定义钩子</a></li><li class="sidebar-item__anchor" title="进度报告"><a href="/api/plugins/#reporting-progress">进度报告</a></li><li class="sidebar-item__anchor" title="日志"><a href="/api/plugins/#logging">日志</a></li><li class="sidebar-item__anchor" title="下一步"><a href="/api/plugins/#next-steps">下一步</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/api/resolvers/">解析器（Resolvers）</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="类型"><a href="/api/resolvers/#types">类型</a></li><li class="sidebar-item__anchor" title="配置选项"><a href="/api/resolvers/#configuration-options">配置选项</a></li></ul></div></div><div class="sidebar__docs-version">You are reading webpack <!-- -->5<!-- --> documentation. Change here to:<ul><li><a rel="nofollow" href="https://v4.webpack.docschina.org">webpack <!-- -->4<!-- --> documentation</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/docschina/webpack.js.org/edit/cn/src/content/api/printable.md">编辑此页<i class="page-links__icon icon-edit"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">打印文档<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>Printable</h1><div><h1 id="简介">简介<a href="#%E7%AE%80%E4%BB%8B" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>Webpack 提供了多种接口来自定义编译过程。
接口间存在一些重叠功能，例如配置选项可能通过 CLI 标志启用，
而其他仅存在于单个接口。
以下概念可以帮助你快速入门。</p>
<h2 id="cli">CLI <a href="#cli" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>命令行界面（CLI），
用于配置构建并与之交互。它在早期原型制作和性能分析的情况下特别有用。
大多数情况下，
CLI 只是用于通过配置文件和一些标志（例如<code>--env</code>）来启动进程。</p>
<p><a href="/api/cli">了解更多关于 CLI 的知识！</a></p>
<h2 id="module">模块 <a href="#module" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>使用 webpack 处理模块时，
最重要的是理解不同的模块语法 --
特别是受支持的<a href="/api/module-methods">方法</a>和<a href="/api/module-variables">变量</a>。</p>
<p><a href="/api/module-methods">了解更多关于模块的知识！</a></p>
<h2 id="node">Node <a href="#node" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>尽管大多数用户可以借助 CLI 和配置文件控制编译，
通过 Node 接口可以实现更细粒度的控制。
这包括传递多个配置、
以程序的方式运行、查阅并收集统计信息。</p>
<p><a href="/api/node">了解更多关于 Node API 的知识！</a></p>
<h2 id="loaders">Loaders <a href="#loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Loaders 用于对模块的源代码进行转换。
它们被编写成一类将源代码作为参数传入，
并将编译转换后的新版本代码传出的函数体。</p>
<p><a href="/api/loaders">了解更多关于 loaders 的知识！</a></p>
<h2 id="plugins">插件 <a href="#plugins" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>插件接口允许用户直接介入编译过程。
插件可以在不同时期运行的生命周期挂钩上注册回调函数。
在单个编译流程中，当每个钩子都被执行后，插件将拥有
当前编译流程的完整访问权限。</p>
<p><a href="/api/plugins">了解更多关于插件的知识！</a></p>
<h1 id="命令行接口">命令行接口<a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8E%A5%E5%8F%A3" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>为了更合适且方便地使用配置，可以在 <code>webpack.config.js</code> 中对 webpack 进行配置。CLI 中传入的任何参数会在配置文件中映射为对应的参数。</p>
<p>如果你还没有安装过 webpack 和 CLI，请先阅读 <a href="/guides/installation">安装指南</a>。</p>
<h2 id="usage-with-configuration-file">使用配置文件的用法 <a href="#usage-with-configuration-file" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<pre><code class="hljs language-bash">webpack <span class="token punctuation">[</span>--config webpack.config.js<span class="token punctuation">]</span></code></pre>
<p>配置文件中的相关选项，请参阅<a href="/configuration">配置</a>。</p>
<h2 id="usage-without-configuration-file">不使用配置文件的用法 <a href="#usage-without-configuration-file" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<pre><code class="hljs language-sh">webpack &#x3C;entry> [&#x3C;entry>] -o &#x3C;output>
</code></pre>
<p><strong><code>&#x3C;entry></code></strong></p>
<p>构建项目时入口可以配置一个文件名或一组被命名过的文件名。你可以传递多个入口（每个入口在启动时加载）。如果传递一个形式为 <code>&#x3C;name> = &#x3C;request></code> 的键值对，则可以创建一个额外的入口起点。它将被映射到配置选项（configuration option）的 <code>entry</code> 属性中。</p>
<p><strong><code>&#x3C;output></code></strong></p>
<p>用于存储构建后的文件路径以及文件名。它将映射到配置选项 <code>output.path</code> 和 <code>output.filename</code>。</p>
<p><strong>示例</strong></p>
<p>假设你的项目结构像下面这样：</p>
<pre><code class="hljs language-bash"><span class="token keyword">.</span>
├── dist
├── index.html
└── src
    ├── index.js
    ├── index2.js
    └── others.js</code></pre>
<pre><code class="hljs language-bash">webpack src/index.js -o dist/bundle.js</code></pre>
<p>这将对源码进行打包，其入口为 <code>index.js</code>，且 bundle 文件的输出路径为 <code>dist</code>，文件名为 <code>bundle.js</code></p>
<pre><code class="hljs language-bash">	<span class="token operator">|</span> Asset     <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks      <span class="token operator">|</span> Chunk Names <span class="token operator">|</span>
	<span class="token operator">|</span>-----------<span class="token operator">|</span>---------<span class="token operator">|</span>-------------<span class="token operator">|</span>-------------<span class="token operator">|</span>
	<span class="token operator">|</span> bundle.js <span class="token operator">|</span> 1.54 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index       <span class="token operator">|</span>
	<span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
	<span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span></code></pre>
<pre><code class="hljs language-bash">webpack ./src/index.js ./src.index2.js -o dist/bundle.js</code></pre>
<p>以多个入口的方式打包文件</p>
<pre><code class="hljs language-bash">	<span class="token operator">|</span> Asset     <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks        <span class="token operator">|</span> Chunk Names   <span class="token operator">|</span>
	<span class="token operator">|</span>-----------<span class="token operator">|</span>---------<span class="token operator">|</span>---------------<span class="token operator">|</span>---------------<span class="token operator">|</span>
	<span class="token operator">|</span> bundle.js <span class="token operator">|</span> 1.55 kB <span class="token operator">|</span> 0,1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index, index2 <span class="token operator">|</span>
	<span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
	<span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index2.js 54 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
	<span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span></code></pre>
<h3 id="common-options">常用配置 <a href="#common-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<blockquote class="warning">
<p>注意，命令行接口（Command Line Interface）参数的优先级，高于配置文件参数。例如，如果将 <a href="/configuration/mode/#usage"><code>--mode="production"</code></a> 传入 webpack CLI，而配置文件使用的是 <code>development</code>，最终会使用 <code>production</code>。</p>
</blockquote>
<p><strong>列出命令行所有可用的配置选项</strong></p>
<pre><code class="hljs language-bash">webpack --help
webpack -h</code></pre>
<p><strong>使用配置文件进行构建</strong></p>
<p>指定其它的<a href="/configuration">配置</a>文件。配置文件默认为 <code>webpack.config.js</code>，如果你想使用其它配置文件，可以加入这个参数。</p>
<pre><code class="hljs language-bash">webpack --config example.config.js</code></pre>
<p><strong>以 JSON 格式输出 webpack 的运行结果</strong></p>
<pre><code class="hljs language-bash">webpack --json
webpack --json <span class="token operator">></span> stats.json</code></pre>
<p>在其他每个情况下，webpack 会打印一组统计信息，用于显示 bundle, chunk 和用时等详细信息。使用此选项，输出可以是 JSON 对象。此输出文件(response)可被 webpack 的<a href="https://webpack.github.com/analyse">分析工具</a>、chrisbateman 的 <a href="https://chrisbateman.github.io/webpack-visualizer/">webpack 可视化工具</a>或 th0r 的 <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack bundle 分析工具</a>接收后进行分析。分析工具将接收 JSON 并以图形形式提供构建的所有细节。</p>
<h3 id="environment-options">环境选项 <a href="#environment-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>当 webpack 配置对象<a href="/configuration/configuration-types/#exporting-a-function">导出为一个函数</a>时，可以向其传入一个 "环境对象（environment）"。</p>
<pre><code class="hljs language-bash">webpack --env.production    <span class="token comment"># 设置 env.production == true</span>
webpack --env.platform<span class="token operator">=</span>web  <span class="token comment"># 设置 env.platform == "web"</span></code></pre>
<p><code>--env</code> 参数具有多种语法：</p>
<table>
<thead>
<tr>
<th>调用</th>
<th>结果环境</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>调用</p><p>结果环境</p></div>
<div class="content"><p><code>webpack --env prod</code><p class="description mobile"><code>"prod"</code></p></p></div></td>
<td class="description desktop"><code>"prod"</code></td>
</tr>
<tr>
<td><div class="title"><p>调用</p><p>结果环境</p></div>
<div class="content"><p><code>webpack --env.prod</code><p class="description mobile"><code>{ prod: true }</code></p></p></div></td>
<td class="description desktop"><code>{ prod: true }</code></td>
</tr>
<tr>
<td><div class="title"><p>调用</p><p>结果环境</p></div>
<div class="content"><p><code>webpack --env.prod=1</code><p class="description mobile"><code>{ prod: 1 }</code></p></p></div></td>
<td class="description desktop"><code>{ prod: 1 }</code></td>
</tr>
<tr>
<td><div class="title"><p>调用</p><p>结果环境</p></div>
<div class="content"><p><code>webpack --env.prod=foo</code><p class="description mobile"><code>{ prod: "foo" }</code></p></p></div></td>
<td class="description desktop"><code>{ prod: "foo" }</code></td>
</tr>
<tr>
<td><div class="title"><p>调用</p><p>结果环境</p></div>
<div class="content"><p><code>webpack --env.prod --env.min</code><p class="description mobile"><code>{ prod: true, min: true }</code></p></p></div></td>
<td class="description desktop"><code>{ prod: true, min: true }</code></td>
</tr>
<tr>
<td><div class="title"><p>调用</p><p>结果环境</p></div>
<div class="content"><p><code>webpack --env.prod --env min</code><p class="description mobile"><code>[{ prod: true }, "min"]</code></p></p></div></td>
<td class="description desktop"><code>[{ prod: true }, "min"]</code></td>
</tr>
<tr>
<td><div class="title"><p>调用</p><p>结果环境</p></div>
<div class="content"><p><code>webpack --env.prod=foo --env.prod=bar</code><p class="description mobile"><code>{prod: [ "foo", "bar" ]}</code></p></p></div></td>
<td class="description desktop"><code>{prod: [ "foo", "bar" ]}</code></td>
</tr>
</tbody>
</table>
<blockquote class="tip">
<p>参阅<a href="/guides/environment-variables/">环境变量</a>指南获取更多使用方法。</p>
</blockquote>
<h3 id="configuration-options">配置选项 <a href="#configuration-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>输入类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--config</code><p class="description mobile">配置文件的路径</p></p></div></td>
<td class="description desktop">配置文件的路径</td>
<td>string</td>
<td><code>webpack.config.js</code>
 或 
<code>webpackfile.js</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--config-register, -r</code><p class="description mobile">在 webpack 配置文件加载前先预加载一个或多个模块</p></p></div></td>
<td class="description desktop">在 webpack 配置文件加载前先预加载一个或多个模块</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--config-name</code><p class="description mobile">要使用的配置名称</p></p></div></td>
<td class="description desktop">要使用的配置名称</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--env</code><p class="description mobile">当配置文件是一个函数时，会将环境变量传给这个函数</p></p></div></td>
<td class="description desktop">当配置文件是一个函数时，会将环境变量传给这个函数</td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--mode</code><p class="description mobile">用到的模式</p></p></div></td>
<td class="description desktop">用到的模式</td>
<td>string</td>
<td><code>'production'</code></td>
</tr>
</tbody>
</table>
<h3 id="output-options">输出配置 <a href="#output-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>通过以下这些配置，你可以调整构建流程的某些<a href="/configuration/output/">输出</a>参数。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>输入类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-chunk-filename</code><p class="description mobile">输出的附带 chunk 的文件名</p></p></div></td>
<td class="description desktop">输出的附带 chunk 的文件名</td>
<td>string</td>
<td>含有 
[
id
]
 的文件名，而不是 
[
name
]
 或者 
[
id
]
 作为前缀</td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-filename</code><p class="description mobile">打包文件的文件名</p></p></div></td>
<td class="description desktop">打包文件的文件名</td>
<td>string</td>
<td><code>[name].js</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-jsonp-function</code><p class="description mobile">加载 chunk 时使用的 JSONP 函数名</p></p></div></td>
<td class="description desktop">加载 chunk 时使用的 JSONP 函数名</td>
<td>string</td>
<td><code>webpackJsonp</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-library</code><p class="description mobile">以库的形式导出入口文件</p></p></div></td>
<td class="description desktop">以库的形式导出入口文件</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-library-target</code><p class="description mobile">以库的形式导出入口文件时，输出的类型</p></p></div></td>
<td class="description desktop">以库的形式导出入口文件时，输出的类型</td>
<td>string</td>
<td><code>var</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-path</code><p class="description mobile">输出的路径（在公共路径的基础上）</p></p></div></td>
<td class="description desktop">输出的路径（在公共路径的基础上）</td>
<td>string</td>
<td>当前目录</td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-pathinfo</code><p class="description mobile">加入一些依赖信息的注解</p></p></div></td>
<td class="description desktop">加入一些依赖信息的注解</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-public-path</code><p class="description mobile">输出文件时使用的公共路径</p></p></div></td>
<td class="description desktop">输出文件时使用的公共路径</td>
<td>string</td>
<td><code>/</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--output-source-map-filename</code><p class="description mobile">生成的 SourceMap 的文件名</p></p></div></td>
<td class="description desktop">生成的 SourceMap 的文件名</td>
<td>string</td>
<td><code>[name].map</code>
 或者 
<code>[outputFilename].map</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--build-delimiter</code><p class="description mobile">在构建输出之后，显示的自定义文本</p></p></div></td>
<td class="description desktop">在构建输出之后，显示的自定义文本</td>
<td>string</td>
<td>默认字符串是 null。你可以提供一个 
<code>=== Build done ===</code>
 这样的字符串</td>
</tr>
</tbody>
</table>
<h4 id="example-usage">示例用法 <a href="#example-usage" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<pre><code class="hljs language-bash">webpack index<span class="token operator">=</span>./src/index.js index2<span class="token operator">=</span>./src/index2.js --output-path<span class="token operator">=</span><span class="token string">'./dist'</span> --output-filename<span class="token operator">=</span><span class="token string">'[name][hash].bundle.js'</span>

<span class="token operator">|</span> Asset                                <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks      <span class="token operator">|</span> Chunk Names   <span class="token operator">|</span>
<span class="token operator">|</span>--------------------------------------<span class="token operator">|</span>---------<span class="token operator">|</span>-------------<span class="token operator">|</span>---------------<span class="token operator">|</span>
<span class="token operator">|</span> index2740fdca26e9348bedbec.bundle.js <span class="token operator">|</span>  2.6 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index2        <span class="token operator">|</span>
<span class="token operator">|</span> index740fdca26e9348bedbec.bundle.js  <span class="token operator">|</span> 2.59 kB <span class="token operator">|</span> 1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index         <span class="token operator">|</span>
	<span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
	<span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
	<span class="token punctuation">[</span>2<span class="token punctuation">]</span> ./src/index2.js 54 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span></code></pre>
<pre><code class="hljs language-bash">webpack.js index<span class="token operator">=</span>./src/index.js index2<span class="token operator">=</span>./src/index2.js --output-path<span class="token operator">=</span><span class="token string">'./dist'</span> --output-filename<span class="token operator">=</span><span class="token string">'[name][hash].bundle.js'</span> --devtool source-map --output-source-map-filename<span class="token operator">=</span><span class="token string">'[name]123.map'</span>

<span class="token operator">|</span> Asset                                <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks      <span class="token operator">|</span> Chunk Names   <span class="token operator">|</span>
<span class="token operator">|</span>--------------------------------------<span class="token operator">|</span>---------<span class="token operator">|</span>-------------<span class="token operator">|</span>---------------<span class="token operator">|</span>
<span class="token operator">|</span> index2740fdca26e9348bedbec.bundle.js <span class="token operator">|</span> 2.76 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index2        <span class="token operator">|</span>
<span class="token operator">|</span>  index740fdca26e9348bedbec.bundle.js <span class="token operator">|</span> 2.74 kB <span class="token operator">|</span> 1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index         <span class="token operator">|</span>
<span class="token operator">|</span>                        index2123.map <span class="token operator">|</span> 2.95 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index2        <span class="token operator">|</span>
<span class="token operator">|</span>                         index123.map <span class="token operator">|</span> 2.95 kB <span class="token operator">|</span> 1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index         <span class="token operator">|</span>
	<span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
	<span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
	<span class="token punctuation">[</span>2<span class="token punctuation">]</span> ./src/index2.js 54 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span></code></pre>
<h3 id="debug-options">Debug 配置 <a href="#debug-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>以下这些配置可以帮助你在 Webpack 编译过程中更好地 debug。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>输入类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--debug</code><p class="description mobile">把 loader 设置为 debug 模式</p></p></div></td>
<td class="description desktop">把 loader 设置为 debug 模式</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--devtool</code><p class="description mobile">为打包好的资源定义 [source map 的类型]</p></p></div></td>
<td class="description desktop">为打包好的资源定义 
[
source map 的类型
]</td>
<td>string</td>
<td><code>-</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--progress</code><p class="description mobile">打印出编译进度的百分比值</p></p></div></td>
<td class="description desktop">打印出编译进度的百分比值</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>输入类型</p><p>默认值</p></div>
<div class="content"><p><code>--display-error-details</code><p class="description mobile">展示错误细节</p></p></div></td>
<td class="description desktop">展示错误细节</td>
<td>boolean</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h3 id="module-options">模块配置 <a href="#module-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>这些配置可以用于绑定 Webpack 允许的<a href="/configuration/module/">模块</a>。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--module-bind</code><p class="description mobile">为 loader 绑定一个文件扩展</p></p></div></td>
<td class="description desktop">为 loader 绑定一个文件扩展</td>
<td><code>--module-bind js=babel-loader</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--module-bind-post</code><p class="description mobile">为 post loader 绑定一个文件扩展</p></p></div></td>
<td class="description desktop">为 post loader 绑定一个文件扩展</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--module-bind-pre</code><p class="description mobile">为 pre loader 绑定一个文件扩展</p></p></div></td>
<td class="description desktop">为 pre loader 绑定一个文件扩展</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="watch-options">Watch 选项 <a href="#watch-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>这些配置可以用于<a href="/configuration/watch/">观察</a>依赖文件的变化，一旦有变化，则可以重新执行构建流程。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p></div>
<div class="content"><p><code>--watch</code>, <code>-w</code><p class="description mobile">观察文件系统的变化</p></p></div></td>
<td class="description desktop">观察文件系统的变化</td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p></div>
<div class="content"><p><code>--watch-aggregate-timeout</code><p class="description mobile">指定一个毫秒数，在这个时间内，文件若发送了多次变化，会被合并</p></p></div></td>
<td class="description desktop">指定一个毫秒数，在这个时间内，文件若发送了多次变化，会被合并</td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p></div>
<div class="content"><p><code>--watch-poll</code><p class="description mobile">轮询观察文件变化的时间间隔（同时会打开轮询机制）</p></p></div></td>
<td class="description desktop">轮询观察文件变化的时间间隔（同时会打开轮询机制）</td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p></div>
<div class="content"><p><code>--watch-stdin</code>, <code>--stdin</code><p class="description mobile">当 stdin 关闭时，退出进程</p></p></div></td>
<td class="description desktop">当 stdin 关闭时，退出进程</td>
</tr>
</tbody>
</table>
<h3 id="optimize-options">性能优化配置 <a href="#optimize-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>在生产环境的构建时，这些配置可以用于调整 webpack 的一些性能相关的配置。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>使用的插件</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>使用的插件</p></div>
<div class="content"><p><code>--optimize-max-chunks</code><p class="description mobile">限制 chunk 的数量</p></p></div></td>
<td class="description desktop">限制 chunk 的数量</td>
<td><a href="/plugins/limit-chunk-count-plugin/">LimitChunkCountPlugin</a></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>使用的插件</p></div>
<div class="content"><p><code>--optimize-min-chunk-size</code><p class="description mobile">限制 chunk 的最小体积</p></p></div></td>
<td class="description desktop">限制 chunk 的最小体积</td>
<td><a href="/plugins/min-chunk-size-plugin/">MinChunkSizePlugin</a></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>使用的插件</p></div>
<div class="content"><p><code>--optimize-minimize</code><p class="description mobile">压缩混淆 javascript，并且把 loader 设置为 minimizing</p></p></div></td>
<td class="description desktop">压缩混淆 javascript，并且把 loader 设置为 minimizing</td>
<td><a href="/plugins/terser-webpack-plugin/">TerserPlugin</a></td>
</tr>
</tbody>
</table>
<h3 id="resolve-options">Resolve 配置 <a href="#resolve-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>这些配置可以用于设置 webpack <a href="/configuration/resolve/">resolver</a> 时使用的别名（alias）和扩展名（extension）。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>示例</p></div>
<div class="content"><p><code>--resolve-alias</code><p class="description mobile">指定模块的别名</p></p></div></td>
<td class="description desktop">指定模块的别名</td>
<td>--resolve-alias jquery-plugin=jquery.plugin</td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>示例</p></div>
<div class="content"><p><code>--resolve-extensions</code><p class="description mobile">指定需要被处理的文件的扩展名</p></p></div></td>
<td class="description desktop">指定需要被处理的文件的扩展名</td>
<td>--resolve-extensions .es6 .js .ts</td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>示例</p></div>
<div class="content"><p><code>--resolve-loader-alias</code><p class="description mobile">最小化 JavaScript，并且将 loader 切换到最简</p></p></div></td>
<td class="description desktop">最小化 JavaScript，并且将 loader 切换到最简</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="stats-options">统计数据配置 <a href="#stats-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>以下选项用于配置 Webpack 在控制台输出的<a href="/configuration/stats/">统计数据</a>，以及这些数据的样式。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--color</code>, <code>--colors</code><p class="description mobile">强制在控制台开启颜色 [默认：仅对 TTY 输出启用]</p></p></div></td>
<td class="description desktop">强制在控制台开启颜色 
[
默认：仅对 TTY 输出启用
]</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--no-color</code>, <code>--no-colors</code><p class="description mobile">强制在控制台关闭颜色</p></p></div></td>
<td class="description desktop">强制在控制台关闭颜色</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display</code><p class="description mobile">选择<a href="/configuration/stats">显示预设</a>(verbose - 繁琐, detailed - 细节, normal - 正常, minimal - 最小, errors-only - 仅错误, none - 无; 从 webpack 3.0.0 开始)</p></p></div></td>
<td class="description desktop">选择
<a href="/configuration/stats">显示预设</a>
(verbose - 繁琐, detailed - 细节, normal - 正常, minimal - 最小, errors-only - 仅错误, none - 无; 从 webpack 3.0.0 开始)</td>
<td><code>string</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-cached</code><p class="description mobile">在输出中显示缓存的模块</p></p></div></td>
<td class="description desktop">在输出中显示缓存的模块</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-cached-assets</code><p class="description mobile">在输出中显示缓存的 assets</p></p></div></td>
<td class="description desktop">在输出中显示缓存的 assets</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-chunks</code><p class="description mobile">在输出中显示 chunks</p></p></div></td>
<td class="description desktop">在输出中显示 chunks</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-depth</code><p class="description mobile">显示从入口起点到每个模块的距离</p></p></div></td>
<td class="description desktop">显示从入口起点到每个模块的距离</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-entrypoints</code><p class="description mobile">在输出中显示入口文件</p></p></div></td>
<td class="description desktop">在输出中显示入口文件</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-error-details</code><p class="description mobile">显示详细的错误信息</p></p></div></td>
<td class="description desktop">显示详细的错误信息</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-exclude</code><p class="description mobile">在输出中显示被排除的文件</p></p></div></td>
<td class="description desktop">在输出中显示被排除的文件</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-max-modules</code><p class="description mobile">设置输出中可见模块的最大数量</p></p></div></td>
<td class="description desktop">设置输出中可见模块的最大数量</td>
<td><code>number</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-modules</code><p class="description mobile">在输出中显示所有模块，包括被排除的模块</p></p></div></td>
<td class="description desktop">在输出中显示所有模块，包括被排除的模块</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-optimization-bailout</code><p class="description mobile">作用域提升回退触发器（Scope hoisting fallback trigger）（从 webpack 3.0.0 开始）</p></p></div></td>
<td class="description desktop">作用域提升回退触发器（Scope hoisting fallback trigger）（从 webpack 3.0.0 开始）</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-origins</code><p class="description mobile">在输出中显示最初的 chunk</p></p></div></td>
<td class="description desktop">在输出中显示最初的 chunk</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-provided-exports</code><p class="description mobile">显示有关从模块导出的信息</p></p></div></td>
<td class="description desktop">显示有关从模块导出的信息</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-reasons</code><p class="description mobile">显示模块包含在输出中的原因</p></p></div></td>
<td class="description desktop">显示模块包含在输出中的原因</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--display-used-exports</code><p class="description mobile">显示模块中被使用的接口（Tree Shaking）</p></p></div></td>
<td class="description desktop">显示模块中被使用的接口（Tree Shaking）</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--hide-modules</code><p class="description mobile">隐藏关于模块的信息</p></p></div></td>
<td class="description desktop">隐藏关于模块的信息</td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--sort-assets-by</code><p class="description mobile">对 assets 列表以某种属性排序</p></p></div></td>
<td class="description desktop">对 assets 列表以某种属性排序</td>
<td><code>string</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--sort-chunks-by</code><p class="description mobile">对 chunks 列表以某种属性排序</p></p></div></td>
<td class="description desktop">对 chunks 列表以某种属性排序</td>
<td><code>string</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--sort-modules-by</code><p class="description mobile">对模块列表以某种属性排序</p></p></div></td>
<td class="description desktop">对模块列表以某种属性排序</td>
<td><code>string</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>类型</p></div>
<div class="content"><p><code>--verbose</code><p class="description mobile">显示更多信息</p></p></div></td>
<td class="description desktop">显示更多信息</td>
<td><code>boolean</code></td>
</tr>
</tbody>
</table>
<h3 id="advanced-options">高级配置 <a href="#advanced-options" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--bail</code><p class="description mobile">一旦发生错误，立即终止</p></p></div></td>
<td class="description desktop">一旦发生错误，立即终止</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--cache</code><p class="description mobile">开启缓存 [watch 时会默认打开]</p></p></div></td>
<td class="description desktop">开启缓存 
[
watch 时会默认打开
]</td>
<td><code>--cache=false</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--define</code><p class="description mobile">定义 bundle 中的任意自由变量，查看 <a href="/guides/shimming/">shimming</a></p></p></div></td>
<td class="description desktop">定义 bundle 中的任意自由变量，查看 
<a href="/guides/shimming/">shimming</a></td>
<td><code>--define process.env.NODE_ENV="'development'"</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--hot</code><p class="description mobile">开启<a href="/concepts/hot-module-replacement/">模块热替换</a></p></p></div></td>
<td class="description desktop">开启
<a href="/concepts/hot-module-replacement/">模块热替换</a></td>
<td><code>--hot=true</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--labeled-modules</code><p class="description mobile">开启模块标签 [使用 LabeledModulesPlugin]</p></p></div></td>
<td class="description desktop">开启模块标签 
[
使用 LabeledModulesPlugin
]</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--live-reload</code><p class="description mobile">开启实时重载</p></p></div></td>
<td class="description desktop">开启实时重载</td>
<td><code>--live-reload=true</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--plugin</code><p class="description mobile">加载某个<a href="/configuration/plugins/">插件</a></p></p></div></td>
<td class="description desktop">加载某个
<a href="/configuration/plugins/">插件</a></td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--prefetch</code><p class="description mobile">预加载某个文件</p></p></div></td>
<td class="description desktop">预加载某个文件</td>
<td><code>--prefetch=./files.js</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--provide</code><p class="description mobile">在所有模块中将这些模块提供为自由变量，查看 <a href="/guides/shimming">shimming</a></p></p></div></td>
<td class="description desktop">在所有模块中将这些模块提供为自由变量，查看 
<a href="/guides/shimming">shimming</a></td>
<td><code>--provide jQuery=jquery</code></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--records-input-path</code><p class="description mobile">记录文件的路径（读取）</p></p></div></td>
<td class="description desktop">记录文件的路径（读取）</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--records-output-path</code><p class="description mobile">记录文件的路径（写入）</p></p></div></td>
<td class="description desktop">记录文件的路径（写入）</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--records-path</code><p class="description mobile">记录文件的路径</p></p></div></td>
<td class="description desktop">记录文件的路径</td>
<td></td>
</tr>
<tr>
<td><div class="title"><p>参数</p><p>说明</p><p>用法</p></div>
<div class="content"><p><code>--target</code><p class="description mobile"><a href="/configuration/target/">目标</a>的执行环境</p></p></div></td>
<td class="description desktop"><a href="/configuration/target/">目标</a>
的执行环境</td>
<td><code>--target='node'</code></td>
</tr>
</tbody>
</table>
<h3 id="shortcuts">简写 <a href="#shortcuts" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<table>
<thead>
<tr>
<th>简写</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>简写</p><p>含义</p></div>
<div class="content"><p>-d<p class="description mobile"><code>--debug --devtool cheap-module-eval-source-map --output-pathinfo</code></p></p></div></td>
<td class="description desktop"><code>--debug --devtool cheap-module-eval-source-map --output-pathinfo</code></td>
</tr>
<tr>
<td><div class="title"><p>简写</p><p>含义</p></div>
<div class="content"><p>-p<p class="description mobile"><code>--mode production</code>，查阅<a href="/guides/production/">构建生产环境</a></p></p></div></td>
<td class="description desktop"><code>--mode production</code>
，查阅
<a href="/guides/production/">构建生产环境</a></td>
</tr>
</tbody>
</table>
<h3 id="profiling">Profiling <a href="#profiling" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>--profile</code> 选项捕获编译时每个步骤的时间信息，并且将这些信息包含在输出中。</p>
<pre><code class="hljs language-bash">webpack --profile

⋮
<span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index.js 90 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    factory:22ms building:16ms <span class="token operator">=</span> 38ms</code></pre>
<p>对于每个模块，输出中将根据具体情况包含以下信息：</p>
<ul>
<li><code>factory</code>: 收集模块元数据的时间（如：解析文件名）</li>
<li><code>building</code>: 构建模块的时间（如：加载和解析）</li>
<li><code>dependencies</code>: 识别和连接模块依赖关系的时间</li>
</ul>
<p>与 <code>--progress</code> 搭配使用，<code>--profile</code> 可以让你深入了解编译过程中哪一步需要多长时间。这可以帮助你以更明智的方式优化你的构建。</p>
<pre><code class="hljs language-bash">webpack --progress --profile

30ms building modules
1ms sealing
1ms optimizing
0ms basic module optimization
1ms module optimization
1ms advanced module optimization
0ms basic chunk optimization
0ms chunk optimization
1ms advanced chunk optimization
0ms module and chunk tree optimization
1ms module reviving
0ms module order optimization
1ms module <span class="token function">id</span> optimization
1ms chunk reviving
0ms chunk order optimization
1ms chunk <span class="token function">id</span> optimization
10ms hashing
0ms module assets processing
13ms chunk assets processing
1ms additional chunk assets processing
0ms recording
0ms additional asset processing
26ms chunk asset optimization
1ms asset optimization
6ms emitting
⋮</code></pre>
<h2 id="pass-cli-arguments-to-nodejs">将 CLI 参数传递给 Node.js <a href="#pass-cli-arguments-to-nodejs" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>将参数直接传递给 Node.js 进程，你可以使用 <code>--node-args</code> 选项。所有其他的标志和选项将由 webpack-cli 接收。</p>
<p>例如，将 Node.js 进程的内存限制增加到 4 GB。</p>
<pre><code class="hljs language-bash">webpack --node-args<span class="token operator">=</span><span class="token string">"--max-old-space-size=4096"</span></code></pre>
<p>此外，你也可以将多个选项传递给 Node.js 进程。</p>
<pre><code class="hljs language-bash">webpack --node-args<span class="token operator">=</span><span class="token string">"--max-old-space-size=4096"</span> --node-args<span class="token operator">=</span><span class="token string">"-r /path/to/preload/file.js"</span></code></pre>
<h1 id="Node-接口">Node 接口<a href="#Node-%E6%8E%A5%E5%8F%A3" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>webpack 提供了 Node.js API，可以在 Node.js 运行时下直接使用。</p>
<p>当你需要自定义构建或开发流程时，Node.js API 非常有用，因为此时所有的报告和错误处理都必须自行实现，webpack 仅仅负责编译的部分。所以 <a href="/configuration/stats"><code>stats</code></a> 配置选项不会在 <code>webpack()</code> 调用中生效。</p>
<h2 id="installation">安装(Installation) <a href="#installation" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>开始使用 webpack 的 Node.js API 之前，首先你需要安装 webpack：</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack</code></pre>
<p>在 Node.js 文件中，引入 webpack 模块:</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>或者如果你更喜欢 ES2015:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span></code></pre>
<h2 id="webpack"><code>webpack()</code> <a href="#webpack" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>导入的 <code>webpack</code> 函数会将 <a href="/configuration/">配置对象</a> 传给 webpack，如果同时传入回调函数会在 webpack compiler 运行时被执行:</p>
<pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [配置对象](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">||</span> stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// [在这里处理错误](#error-handling)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 处理完成</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="tip">
<p><code>err</code>对象 <strong>不包含</strong> 编译错误，必须使用 <code>stats.hasErrors()</code> 单独处理，文档的 <a href="#error-handling">错误处理</a> 将对这部分将对此进行详细介绍。<code>err</code> 对象只包含 webpack 相关的问题，例如配置错误等。</p>
</blockquote>
<blockquote class="tip">
<p>你也可以为 <code>webpack</code> 函数提供一个配置数组。更多详细信息，请查看 <a href="#multicompiler">MultiCompiler</a> 章节。</p>
</blockquote>
<h2 id="compiler-instance">Compiler 实例（Compiler Instance） <a href="#compiler-instance" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>如果你不向 <code>webpack</code> 传入可执行的回调函数，
它会返回一个 webpack <code>Compiler</code> 实例。
你可以通过手动执行它或者为它的构建时添加一个监听器，
就像 <a href="/api/cli/">CLI</a> 类似。<code>Compiler</code> 实例提供了以下方法:</p>
<ul>
<li><code>.run(callback)</code></li>
<li><code>.watch(watchOptions, handler)</code></li>
</ul>
<p>通常情况下，仅会创建一个主要 <code>Compiler</code> 实例，
虽然可以创建一些子 compiler 来代理到特定任务。
<code>Compiler</code> 基本上只是执行最低限度的功能，以维持生命周期运行的功能。
它将所有的加载、打包和写入工作，
都委托到注册过的插件上。</p>
<p><code>Compiler</code> 实例上的 <code>hooks</code> 属性，用于将一个插件注册
到 <code>Compiler</code> 的生命周期中的所有钩子事件上。
<code>webpack</code> 使用
<a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js"><code>WebpackOptionsDefaulter</code></a>
和 <a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js"><code>WebpackOptionsApply</code></a>
来配置 <code>Compiler</code> 实例以及所有内置插件。</p>
<p>使用 <code>run</code> 方法启动所有编译工作。
完成之后，执行传入的的 <code>callback</code> 函数。
最终记录下来的概括信息（stats）和错误（errors），都应在这个 callback 函数中获取。</p>
<blockquote class="warning">
<p>这个 API 一次仅支持一个编译。当使用 <code>run</code> 时，
再次调用 <code>run</code> 或 <code>watch</code> 之前需等待它完成。
当使用 <code>watch</code> 时，调用 <code>close</code>，并等待它完成后，
然后才能再次调用 <code>run</code> 或 <code>watch</code>。并发编译将破坏输出文件。</p>
</blockquote>
<h2 id="run">执行（Run） <a href="#run" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>调用 <code>Compiler</code> 实例的 <code>run</code> 方法跟上文提到的
快速执行方法很类似：</p>
<pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [配置对象](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="watching">监听(Watching) <a href="#watching" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>调用 <code>watch</code> 方法会触发 webpack 执行，但之后会监听变更（很像 CLI 命令: <code>webpack --watch</code>），
一旦 webpack 检测到文件变更，就会重新执行编译。
该方法返回一个 <code>Watching</code> 实例。</p>
<pre><code class="hljs language-js"><span class="token function">watch</span><span class="token punctuation">(</span>watchOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [配置对象](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watching <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [watchOptions](/configuration/watch/#watchoptions) 示例</span>
  aggregateTimeout<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  poll<span class="token punctuation">:</span> undefined
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  <span class="token comment">// 这里打印 watch/build 结果...</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>Watching</code> 配置选项的细节可以在
<a href="/configuration/watch/#watchoptions">这里</a>查询。</p>
<blockquote class="warning">
<p>文件系统不正确的问题，可能会对单次修改触发多次构建。
因此，在上面的示例中，一次修改可能会多次触发 <code>console.log</code> 语句。
用户应该预知此行为，
并且可能需要检查 <code>stats.hash</code> 来查看文件哈希是否确实变更。</p>
</blockquote>
<h3 id="close-watching">关闭 <code>Watching</code> (Close <code>Watching</code>) <a href="#close-watching" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>watch</code> 方法返回一个 <code>Watching</code> 实例，该实例会暴露一个 <code>.close(callback)</code> 方法。
调用该方法将会结束监听:</p>
<pre><code class="hljs language-js">watching<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Watching Ended.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>不允许在监听器关闭或者失效前
再次监听或执行。</p>
</blockquote>
<h3 id="invalidate-watching">Invalidate <code>Watching</code> <a href="#invalidate-watching" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>使用 <code>watching.invalidate</code>，你可以手动使当前编译循环（compiling round）无效，
而不会停止监听进程（process）：</p>
<pre><code class="hljs language-js">watching<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="stats-object">Stats 对象(Stats Object) <a href="#stats-object" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>stats</code> 对象会被作为 <a href="#webpack"><code>webpack()</code></a> 回调函数的第二个参数传递，
可以通过它获取到代码编译过程中的有用信息，
包括：</p>
<ul>
<li>错误和警告(有过有的话)</li>
<li>计时信息</li>
<li>module 和 chunk 信息</li>
</ul>
<p><a href="/api/cli">webpack CLI</a> 正是基于这些信息在控制台
展示友好的格式输出。</p>
<blockquote class="tip">
<p>当使用 <a href="#multicompiler"><code>MultiCompiler</code></a> 时，
会返回一个 <code>MultiStats</code> 实例，
它实现与 <code>stats</code> 相同的接口，也就是下面描述的方法。</p>
</blockquote>
<p><code>stats</code> 对象暴露了以下方法:</p>
<h3 id="statshaserrors"><code>stats.hasErrors()</code> <a href="#statshaserrors" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>可以用来检查编译期是否有错误，
返回值为 <code>true</code> 或 <code>false</code>。</p>
<h3 id="statshaswarnings"><code>stats.hasWarnings()</code> <a href="#statshaswarnings" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>可以用来检查编译期是否有警告，
返回值为 <code>true</code> 或 <code>false</code>。</p>
<h3 id="statstojsonoptions"><code>stats.toJson(options)</code> <a href="#statstojsonoptions" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>以 JSON 对象形式返回编译信息。
<code>options</code> 可以是一个字符串（预设值）或是颗粒化控制的对象:</p>
<pre><code class="hljs language-js-with-links">stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token string">'minimal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [更多选项如: "verbose" 等](/configuration/stats).</span></code></pre>
<pre><code class="hljs language-js">stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  assets<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  hash<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>所有可用的配置选项和预设值都可查询 stats <a href="/configuration/stats">文档</a>。</p>
<blockquote>
<p>这里有
该函数输出的
<a href="https://raw.githubusercontent.com/webpack/analyse/master/app/pages/upload/example2.json">示例</a>。</p>
</blockquote>
<h3 id="statstostringoptions"><code>stats.toString(options)</code> <a href="#statstostringoptions" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>以格式化的字符串形式返回描述编译信息
（类似 <a href="/api/cli">CLI</a> 的输出）。</p>
<p>配置对象与 <a href="/api/node/#statstojsonoptions"><code>stats.toJson(options)</code></a> 一致，除了额外增加的一个选项:</p>
<pre><code class="hljs language-js">stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 增加控制台颜色开关</span>
  colors<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>下面是 <code>stats.toString()</code> 用法的示例:</p>
<pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [配置对象](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    chunks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 使构建过程更静默无输出</span>
    colors<span class="token punctuation">:</span> <span class="token boolean">true</span>    <span class="token comment">// 在控制台展示颜色</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="multicompiler">MultiCompiler <a href="#multicompiler" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>MultiCompiler</code> 模块可以让 webpack 在单个 compiler 中执行多个配置。
如果传给 webpack 的 Node.js API 的 <code>options</code> 参数，
是一个由配置对象构成的数组，则 webpack 会应用单独 compiler，
并且在每次 compiler 执行结束时，都会调用 <code>callback</code> 方法。</p>
<pre><code class="hljs language-js-with-links"><span class="token keyword">var</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> entry<span class="token punctuation">:</span> <span class="token string">'./index1.js'</span><span class="token punctuation">,</span> output<span class="token punctuation">:</span> <span class="token punctuation">{</span> filename<span class="token punctuation">:</span> <span class="token string">'bundle1.js'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> entry<span class="token punctuation">:</span> <span class="token string">'./index2.js'</span><span class="token punctuation">,</span> output<span class="token punctuation">:</span> <span class="token punctuation">{</span> filename<span class="token punctuation">:</span> <span class="token string">'bundle2.js'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<blockquote class="warning">
<p>多个配置对象在执行时，<strong>不会并行执行</strong>。
每个配置都只会在前一个处理结束后，才进行处理。
想要并行处理，你可以使用第三方解决方案，
例如 <a href="https://www.npmjs.com/package/parallel-webpack">parallel-webpack</a>。</p>
</blockquote>
<h2 id="error-handling">错误处理(Error Handling) <a href="#error-handling" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>完备的错误处理中需要考虑以下三种类型的错误:</p>
<ul>
<li>致命的 wepback 错误（配置出错等）</li>
<li>编译错误（缺失的 module，语法错误等）</li>
<li>编译警告</li>
</ul>
<p>下面是一个覆盖这些场景的示例:</p>
<pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [配置对象](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack <span class="token operator">||</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>details<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>details<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> info <span class="token operator">=</span> stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasWarnings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>warnings<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Log result...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="custom-file-systems">自定义文件系统(Custom File Systems) <a href="#custom-file-systems" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>默认情况下，webpack 使用普通文件系统来读取文件并将文件写入磁盘。
但是，还可以使用不同类型的文件系统（内存(memory), webDAV 等）来更改输入或输出行为。
为了实现这一点，
可以改变 <code>inputFileSystem</code> 或 <code>outputFileSystem</code>。
例如，可以使用 <a href="https://github.com/streamich/memfs"><code>memfs</code></a> 替换默认的 <code>outputFileSystem</code>，
以将文件写入到内存中，
而不是写入到磁盘:</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> createFsFromVolume<span class="token punctuation">,</span> Volume <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'memfs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">createFsFromVolume</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Volume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* options */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>outputFileSystem <span class="token operator">=</span> fs<span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 之后读取输出:</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>值得一提的是，被
<a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a>
及众多其他包依赖的
<a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 就是通过这种方式，
将你的文件神秘地隐藏起来，但却仍然可以用它们为浏览器提供服务！</p>
<blockquote class="tip">
<p>你指定的输出文件系统需要
兼容 Node 自身的 <a href="https://nodejs.org/api/fs.html"><code>fs</code></a> 模块接口，
接口需要提供 <code>mkdirp</code> 和 <code>join</code> 工具方法。</p>
</blockquote>
<h1 id="Stats-Data">Stats Data<a href="#Stats-Data" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>When compiling source code with webpack, users can generate a JSON file containing statistics about modules. These statistics can be used to analyze an application's dependency graph as well as to optimize compilation speed. The file is typically generated with the following CLI command:</p>
<pre><code class="hljs language-bash">webpack --profile --json <span class="token operator">></span> compilation-stats.json</code></pre>
<p>The <code>--json > compilation-stats.json</code> flag indicates to webpack that it should emit the <code>compilation-stats.json</code> containing the dependency graph and various other build information. Typically, the <code>--profile</code> flag is also added so that a <code>profile</code> section is added to each <a href="#module-objects"><code>modules</code> object</a> containing module-specific compilation stats.</p>
<h2 id="structure">Structure <a href="#structure" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The top-level structure of the output JSON file is fairly straightforward but there are a few nested data structures as well. Each nested structure has a dedicated section below to make this document more consumable. Note that you can click links within the top-level structure below to jump to relevant sections and documentation:</p>
<pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token string">'5.0.0-alpha.6'</span><span class="token punctuation">,</span> <span class="token comment">// Version of webpack used for the compilation</span>
  <span class="token string">'hash'</span><span class="token punctuation">:</span> <span class="token string">'11593e3b3ac85436984a'</span><span class="token punctuation">,</span> <span class="token comment">// Compilation specific hash</span>
  <span class="token string">'time'</span><span class="token punctuation">:</span> <span class="token number">2469</span><span class="token punctuation">,</span> <span class="token comment">// Compilation time in milliseconds</span>
  <span class="token string">'filteredModules'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// A count of excluded modules when [`exclude`](/configuration/stats/#statsexclude) is passed to the [`toJson`](/api/node/#statstojsonoptions) method</span>
  <span class="token string">'outputPath'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token operator">/</span>'<span class="token punctuation">,</span> <span class="token comment">// path to webpack output directory</span>
  <span class="token string">'assetsByChunkName'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Chunk name to emitted asset(s) mapping</span>
    <span class="token string">'main'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'web.js?h=11593e3b3ac85436984a'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'named-chunk'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'named-chunk.web.js'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'other-chunk'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'other-chunk.js'</span><span class="token punctuation">,</span>
      <span class="token string">'other-chunk.css'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'assets'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [asset objects](#asset-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'chunks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [chunk objects](#chunk-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'modules'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [module objects](#module-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'errors'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [error objects](#errors-and-warnings)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'warnings'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [warning objects](#errors-and-warnings)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="asset-objects">Asset Objects <a href="#asset-objects" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Each <code>assets</code> object represents an <code>output</code> file emitted from the compilation. They all follow a similar structure:</p>
<!-- eslint-skip -->
<pre><code class="hljs language-js"><span class="token punctuation">{</span>
  <span class="token string">'chunkNames'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// The chunks this asset contains</span>
  <span class="token string">'chunks'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// The chunk IDs this asset contains</span>
  <span class="token string">'comparedForEmit'</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the asset was compared with the same file on the output file system</span>
  <span class="token string">'emitted'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the asset made it to the `output` directory</span>
  <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'10.web.js'</span><span class="token punctuation">,</span> <span class="token comment">// The `output` filename</span>
  <span class="token string">'size'</span><span class="token punctuation">:</span> <span class="token number">1058</span><span class="token punctuation">,</span> <span class="token comment">// The size of the file in bytes</span>
  <span class="token string">'info'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'immutable'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// A flag telling whether the asset can be long term cached (contains a hash)</span>
    <span class="token string">'size'</span><span class="token punctuation">:</span> <span class="token number">1058</span><span class="token punctuation">,</span> <span class="token comment">// The size in bytes, only becomes available after asset has been emitted</span>
    <span class="token string">'development'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// A flag telling whether the asset is only used for development and doesn't count towards user-facing assets</span>
    <span class="token string">'hotModuleReplacement'</span><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// A flag telling whether the asset ships data for updating an existing application (HMR)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<blockquote class="tip">
<p>Asset's <code>info</code> property is available since webpack v4.40.0</p>
</blockquote>
<h3 id="chunk-objects">Chunk Objects <a href="#chunk-objects" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Each <code>chunks</code> object represents a group of modules known as a <a href="/glossary/#c">chunk</a>. Each object follows the following structure:</p>
<pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"entry"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the chunk contains the webpack runtime</span>
  <span class="token string">"files"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// An array of filename strings that contain this chunk</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"filteredModules"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// See the description in the [top-level structure](#structure) above</span>
  <span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of this chunk</span>
  <span class="token string">"initial"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether this chunk is loaded on initial page load or [on demand](/guides/lazy-loading)</span>
  <span class="token string">"modules"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [module objects](#module-objects)</span>
    <span class="token string">"web.js?h=11593e3b3ac85436984a"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"names"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// An list of chunk names contained within this chunk</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"origins"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// See the description below...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"parents"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Parent chunk IDs</span>
  <span class="token string">"rendered"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the chunk went through Code Generation</span>
  <span class="token string">"size"</span><span class="token punctuation">:</span> <span class="token number">188057</span> <span class="token comment">// Chunk size in bytes</span>
<span class="token punctuation">}</span></code></pre>
<p>The <code>chunks</code> object will also contain a list of <code>origins</code> describing how the given chunk originated. Each <code>origins</code> object follows the following schema:</p>
<pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"loc"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">// Lines of code that generated this chunk</span>
  <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the module</span>
  <span class="token string">"moduleId"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of the module</span>
  <span class="token string">"moduleIdentifier"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the module</span>
  <span class="token string">"moduleName"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Relative path to the module</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"main"</span><span class="token punctuation">,</span> <span class="token comment">// The name of the chunk</span>
  <span class="token string">"reasons"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of the same `reasons` found in [module objects](#module-objects)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="module-objects">Module Objects <a href="#module-objects" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>What good would these statistics be without some description of the compiled application's actual modules? Each module in the dependency graph is represented by the following structure:</p>
<pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"assets"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [asset objects](#asset-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"built"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates that the module went through [Loaders](/concepts/loaders), Parsing, and Code Generation</span>
  <span class="token string">"cacheable"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Whether or not this module is cacheable</span>
  <span class="token string">"chunks"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// IDs of chunks that contain this module</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"errors"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// Number of errors when resolving or processing the module</span>
  <span class="token string">"failed"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Whether or not compilation failed on this module</span>
  <span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of the module (analogous to [`module.id`](/api/module-variables/#moduleid-commonjs))</span>
  <span class="token string">"identifier"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// A unique ID used internally</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the actual file</span>
  <span class="token string">"optional"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// All requests to this module are with `try... catch` blocks (irrelevant with ESM)</span>
  <span class="token string">"prefetched"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the module was [prefetched](/plugins/prefetch-plugin)</span>
  <span class="token string">"profile"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Module specific compilation stats corresponding to the [`--profile` flag](/api/cli/#profiling) (in milliseconds)</span>
    <span class="token string">"building"</span><span class="token punctuation">:</span> <span class="token number">73</span><span class="token punctuation">,</span> <span class="token comment">// Loading and parsing</span>
    <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token number">242</span><span class="token punctuation">,</span> <span class="token comment">// Building dependencies</span>
    <span class="token string">"factory"</span><span class="token punctuation">:</span> <span class="token number">11</span> <span class="token comment">// Resolving dependencies</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"reasons"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// See the description below...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"size"</span><span class="token punctuation">:</span> <span class="token number">3593</span><span class="token punctuation">,</span> <span class="token comment">// Estimated size of the module in bytes</span>
  <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token string">"// Should not break it...\r\nif(typeof..."</span><span class="token punctuation">,</span> <span class="token comment">// The stringified raw source</span>
  <span class="token string">"warnings"</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment">// Number of warnings when resolving or processing the module</span>
<span class="token punctuation">}</span></code></pre>
<p>Every module also contains a list of <code>reasons</code> objects describing why that module was included in the dependency graph. Each "reason" is similar to the <code>origins</code> seen above in the <a href="#chunk-objects">chunk objects</a> section:</p>
<pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"loc"</span><span class="token punctuation">:</span> <span class="token string">"33:24-93"</span><span class="token punctuation">,</span> <span class="token comment">// Lines of code that caused the module to be included</span>
  <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Relative path to the module based on [context](/configuration/entry-context/#context)</span>
  <span class="token string">"moduleId"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of the module</span>
  <span class="token string">"moduleIdentifier"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the module</span>
  <span class="token string">"moduleName"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// A more readable name for the module (used for "pretty-printing")</span>
  <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"require.context"</span><span class="token punctuation">,</span> <span class="token comment">// The [type of request](/api/module-methods) used</span>
  <span class="token string">"userRequest"</span><span class="token punctuation">:</span> <span class="token string">"../../cases"</span> <span class="token comment">// Raw string used for the `import` or `require` request</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="errors-and-warnings">Errors and Warnings <a href="#errors-and-warnings" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The <code>errors</code> and <code>warnings</code> properties each contain a list of objects. Each object contains a message, a stack trace and various other properties:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases\\context\\issue-5750\\index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"moduleName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases/context/issue-5750/index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"loc"</span><span class="token operator">:</span> <span class="token string">"3:8-47"</span><span class="token punctuation">,</span>
  <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Critical dependency: Contexts can't use RegExps with the 'g' or 'y' flags."</span><span class="token punctuation">,</span>
  <span class="token property">"moduleId"</span><span class="token operator">:</span> <span class="token number">29595</span><span class="token punctuation">,</span>
  <span class="token property">"moduleTrace"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"originIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases|sync|/^\\.\\/[^/]+\\/[^/]+\\/index\\.js$/"</span><span class="token punctuation">,</span>
      <span class="token property">"originName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases sync ^\\.\\/[^/]+\\/[^/]+\\/index\\.js$"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases\\context\\issue-5750\\index.js"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases/context/issue-5750/index.js"</span><span class="token punctuation">,</span>
      <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"loc"</span><span class="token operator">:</span> <span class="token string">"./context/issue-5750/index.js"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"originId"</span><span class="token operator">:</span> <span class="token number">32582</span><span class="token punctuation">,</span>
      <span class="token property">"moduleId"</span><span class="token operator">:</span> <span class="token number">29595</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"originIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\testCases.js"</span><span class="token punctuation">,</span>
      <span class="token property">"originName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/testCases.js"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases|sync|/^\\.\\/[^/]+\\/[^/]+\\/index\\.js$/"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases sync ^\\.\\/[^/]+\\/[^/]+\\/index\\.js$"</span><span class="token punctuation">,</span>
      <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"loc"</span><span class="token operator">:</span> <span class="token string">"1:0-70"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"originId"</span><span class="token operator">:</span> <span class="token number">8198</span><span class="token punctuation">,</span>
      <span class="token property">"moduleId"</span><span class="token operator">:</span> <span class="token number">32582</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"details"</span><span class="token operator">:</span> <span class="token string">"    at RequireContextDependency.getWarnings (C:\\Repos\\webpack\\lib\\dependencies\\ContextDependency.js:79:5)\n    at Compilation.reportDependencyErrorsAndWarnings (C:\\Repos\\webpack\\lib\\Compilation.js:1727:24)\n    at C:\\Repos\\webpack\\lib\\Compilation.js:1467:10\n    at _next2 (&#x3C;anonymous>:16:1)\n    at eval (&#x3C;anonymous>:42:1)\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:219:18\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:40:16\n    at Hook.eval [as callAsync] (&#x3C;anonymous>:38:1)\n    at Hook.CALL_ASYNC_DELEGATE [as _callAsync] (C:\\Repos\\tapable\\lib\\Hook.js:18:14)\n    at Compilation.finish (C:\\Repos\\webpack\\lib\\Compilation.js:1462:28)\n    at C:\\Repos\\webpack\\lib\\Compiler.js:909:18\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)\n"</span><span class="token punctuation">,</span>
  <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token string">"ModuleDependencyWarning: Critical dependency: Contexts can't use RegExps with the 'g' or 'y' flags.\n    at Compilation.reportDependencyErrorsAndWarnings (C:\\Repos\\webpack\\lib\\Compilation.js:1732:23)\n    at C:\\Repos\\webpack\\lib\\Compilation.js:1467:10\n    at _next2 (&#x3C;anonymous>:16:1)\n    at eval (&#x3C;anonymous>:42:1)\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:219:18\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:40:16\n    at Hook.eval [as callAsync] (&#x3C;anonymous>:38:1)\n    at Hook.CALL_ASYNC_DELEGATE [as _callAsync] (C:\\Repos\\tapable\\lib\\Hook.js:18:14)\n    at Compilation.finish (C:\\Repos\\webpack\\lib\\Compilation.js:1462:28)\n    at C:\\Repos\\webpack\\lib\\Compiler.js:909:18\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)\n"</span>
<span class="token punctuation">}</span></code></pre>
<blockquote class="warning">
<p>Note that the stack traces are removed when <code>errorStack: false</code> is passed to the <code>toJson</code> method. The <code>errorStack</code> option is set to <code>true</code> by default.</p>
</blockquote>
<h1 id="Hot-Module-Replacement">Hot Module Replacement<a href="#Hot-Module-Replacement" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>如果已经通过 <a href="/plugins/hot-module-replacement-plugin"><code>HotModuleReplacementPlugin</code></a> 启用了 <a href="/concepts/hot-module-replacement">Hot Module Replacement</a>, 则它的接口将被暴露在 <a href="/api/module-variables/#modulehot-webpack-specific"><code>module.hot</code> 属性</a> 下面。通常，用户先要检查这个接口是否可访问, 再使用它。你可以这样使用 <code>accept</code> 操作一个更新的模块：</p>
<pre><code class="hljs language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./library.js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 对更新过的 library 模块做些事情...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>支持以下方法……</p>
<h2 id="module-api">模块 API <a href="#module-api" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<h3 id="accept"><code>accept</code> <a href="#accept" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>接受(accept)给定 <code>依赖模块(dependencies)</code> 的更新，并触发一个 <code>回调函数</code> 来响应更新。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>
  dependencies<span class="token punctuation">,</span> <span class="token comment">// 可以是一个字符串或字符串数组</span>
  callback <span class="token comment">// 用于在模块更新后触发的函数</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>当使用 ESM <code>import</code> 时，所有从 <code>dependencies</code> 中导入的符号都会自动更新。注意：依赖项字符串必须与 <code>import</code> 中的 <code>from</code> 字符串完全匹配。在某些情况下， 甚至可以省略 <code>callback</code>。在 <code>callback</code> 中使用的 <code>require()</code> 在这里没有任何意义。</p>
<p>在使用 CommonJS 时，你应该通过 <code>callback</code> 中的 <code>require()</code> 手动更新依赖模块。省略 <code>callback</code> 在这里没有任何意义。</p>
<h3 id="accept-self"><code>accept</code> (自身) <a href="#accept-self" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>接受自身更新。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>
  errorHandler <span class="token comment">// 在计算新版本时处理错误的函数</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>在此模块或依赖模块更新时，可以在不通知父依赖的情况下，对此模块处理和重新取值。如果此模块没有导出（或以其他方式更新的导出），这是有意义的。</p>
<p>当执行此模块（或依赖模块）抛出异常时，会触发 <code>errorHandler</code>。</p>
<h3 id="decline"><code>decline</code> <a href="#decline" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>拒绝给定<code>依赖模块</code>的更新，使用 <code>'decline'</code> 方法强制更新失败。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">decline</span><span class="token punctuation">(</span>
  dependencies <span class="token comment">// 可以是一个字符串或字符串数组</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>将依赖模块标记为不可更新(not-update-able)。在处理「依赖的导出正在更新」或「尚未实现处理」时，这是有意义的。取决于你的 HMR 管理代码，此依赖模块（或其未接受的依赖模块）更新，通常会导致页面被完全重新加载。</p>
<h3 id="decline-self"><code>decline</code> (自身) <a href="#decline-self" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>拒绝自身更新。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">decline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>将依赖模块标记为不可更新(not-update-able)。当此模块具有无法避免的外部作用(side-effect)，或者尚未对此模块进行 HMR 处理时，这是有意义的。取决于你的 HMR 管理代码，此依赖模块（或其未接受的依赖模块）更新，通常会导致页面被完全重新加载。</p>
<h3 id="dispose-or-adddisposehandler"><code>dispose</code> (or <code>addDisposeHandler</code>) <a href="#dispose-or-adddisposehandler" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>添加一个处理函数，在当前模块代码被替换时执行。此函数应该用于移除你声明或创建的任何持久资源。如果要将状态传入到更新过的模块，请添加给定 <code>data</code> 参数。更新后，此对象在更新之后可通过 <code>module.hot.data</code> 调用。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 清理并将 data 传递到更新后的模块...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="invalidate"><code>invalidate</code> <a href="#invalidate" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>调用此方法将使当前模块无效，而当前模块将在应用 HMR 更新时进行部署并重新创建。这个模块的更新像冒泡一样，拒绝自身更新。</p>
<p>在 <code>idle</code> 状态下调用时，将创建一个包含此模块的新 HMR 更新。HMR 将进入 <code>ready</code> 状态。</p>
<p>在 <code>ready</code> 或 <code>prepare</code> 状态下调用时，此模块将添加到当前 HMR 的更新中。</p>
<p>在 <code>check</code> 状态期间被调用时，如果有可用更新，则此模块将添加到更新中。如果没有可用的更新，它将创建一个新更新。HMR 将进入 <code>ready</code> 状态。</p>
<p>在 <code>dispose</code> 或 <code>apply</code> 状态下调用时，HMR 将在退出这些状态后将其拾取。</p>
<h3 id="use-cases">用例 <a href="#use-cases" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><strong>Conditional Accepting</strong></p>
<p>一个模块可以接受一个依赖，但是当依赖的改变无法处理时，可以调用 <code>invalidate</code>：</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./dep'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> processX<span class="token punctuation">,</span> processY <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'anotherDep'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> oldY <span class="token operator">=</span> y<span class="token punctuation">;</span>

<span class="token function">processX</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">processY</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./dep'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">!==</span> oldY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 无法处理，冒泡给父级</span>
    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 可以处理</span>
  <span class="token function">processX</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>Conditional self accept</strong></p>
<p>模块可以自我接受，但是当更改无法处理时可以使自身失效：</p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> <span class="token constant">VALUE</span> <span class="token operator">=</span> <span class="token string">'constant'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">VALUE</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span>data <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span>data<span class="token punctuation">.</span>value <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span>data<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token constant">VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token constant">VALUE</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>Triggering custom HMR updates</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> moduleId <span class="token operator">=</span> <span class="token function">chooseAModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> code <span class="token operator">=</span> __webpack_modules__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
__webpack_modules__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">makeChanges</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<blockquote class="tip">
<p>当调用 <code>invalidate</code> 时，将最终调用 <a href="#dispose-or-adddisposehandler"><code>dispose</code></a> 处理函数并填充 <code>module.hot.data</code>。如果未注册 <a href="#dispose-or-adddisposehandler"><code>dispose</code></a> 处理程序, 则将空对象提供给 <code>module.hot.data</code>.</p>
</blockquote>
<blockquote class="warning">
<p>通过一次次的调用 <code>invalidate</code>，不要陷入 <code>invalidate</code> 循环。这将导致栈溢出并且 HMR 进入 <code>fail</code> 状态。</p>
</blockquote>
<h3 id="removedisposehandler"><code>removeDisposeHandler</code> <a href="#removedisposehandler" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>删除由 <code>dispose</code> 或 <code>addDisposeHandler</code> 添加的回调函数。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">removeDisposeHandler</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="management-api">API 管理 <a href="#management-api" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<h3 id="status"><code>status</code> <a href="#status" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>获取当前模块热替换进程的状态。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回以下字符串之一...</span></code></pre>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>idle<p class="description mobile">该进程正在等待调用 <code>check</code>（见下文）</p></p></div></td>
<td class="description desktop">该进程正在等待调用 
<code>check</code>
（见下文）</td>
</tr>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>check<p class="description mobile">该进程正在检查以更新</p></p></div></td>
<td class="description desktop">该进程正在检查以更新</td>
</tr>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>prepare    <p class="description mobile">该进程正在准备更新（例如，下载已更新的模块）</p></p></div></td>
<td class="description desktop">该进程正在准备更新（例如，下载已更新的模块）</td>
</tr>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>ready<p class="description mobile">此更新已准备并可用</p></p></div></td>
<td class="description desktop">此更新已准备并可用</td>
</tr>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>dispose<p class="description mobile">该进程正在调用将被替换模块的 <code>dispose</code> 处理函数</p></p></div></td>
<td class="description desktop">该进程正在调用将被替换模块的 
<code>dispose</code>
 处理函数</td>
</tr>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>apply<p class="description mobile">该进程正在调用 <code>accept</code> 处理函数，并重新执行自我接受(self-accepted)的模块</p></p></div></td>
<td class="description desktop">该进程正在调用 
<code>accept</code>
 处理函数，并重新执行自我接受(self-accepted)的模块</td>
</tr>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>abort<p class="description mobile">更新已中止，但系统仍处于之前的状态</p></p></div></td>
<td class="description desktop">更新已中止，但系统仍处于之前的状态</td>
</tr>
<tr>
<td><div class="title"><p>Status</p><p>Description</p></div>
<div class="content"><p>fail<p class="description mobile">更新已抛出异常，系统状态已被破坏</p></p></div></td>
<td class="description desktop">更新已抛出异常，系统状态已被破坏</td>
</tr>
</tbody>
</table>
<h3 id="check"><code>check</code> <a href="#check" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>测试所有加载的模块以进行更新，如果有更新，则 <code>apply</code> 它们。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>autoApply<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>outdatedModules <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 超时的模块...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 捕获错误</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>当被调用时，传递给 <code>apply</code> 方法的 <code>autoApply</code> 参数可以是布尔值，也可以是 <code>options</code>，</p>
<h3 id="apply"><code>apply</code> <a href="#apply" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>继续更新进程（当 <code>module.hot.status() === 'ready'</code> 时）。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>outdatedModules <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 超时的模块...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 捕获错误</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>可选的 <code>options</code> 对象可以包含以下属性：</p>
<ul>
<li><code>ignoreUnaccepted</code> (boolean): 忽略对不可接受的模块所做的更改。</li>
<li><code>ignoreDeclined</code> (boolean): 忽略对已拒绝的模块所做的更改。</li>
<li><code>ignoreErrored</code> (boolean): 忽略在接受处理程序、错误处理程序以及重新评估模块时抛出的错误。</li>
<li><code>onDeclined</code> (function(info)): 拒绝模块的通知者。</li>
<li><code>onUnaccepted</code> (function(info)): 不可接受的模块的通知程序。</li>
<li><code>onAccepted</code> (function(info)): 可接受模块的通知者。</li>
<li><code>onDisposed</code> (function(info)): 废弃模块的通知者。</li>
<li><code>onErrored</code> (function(info)): 错误通知者。</li>
</ul>
<p><code>info</code> 参数将是一个包含以下某些值的对象：</p>
<!-- eslint-skip -->
<pre><code class="hljs language-js"><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'self-declined'</span> <span class="token operator">|</span> <span class="token string">'declined'</span> <span class="token operator">|</span>
        <span class="token string">'unaccepted'</span> <span class="token operator">|</span> <span class="token string">'accepted'</span> <span class="token operator">|</span>
        <span class="token string">'disposed'</span> <span class="token operator">|</span> <span class="token string">'accept-errored'</span> <span class="token operator">|</span>
        <span class="token string">'self-accept-errored'</span> <span class="token operator">|</span> <span class="token string">'self-accept-error-handler-errored'</span><span class="token punctuation">,</span>
  moduleId<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// 有问题的模块。</span>
  dependencyId<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 对于错误：拥有接受处理程序的模块 ID。</span>
  chain<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 对于拒绝/接受/不接受：传播更新的 `chain`。</span>
  parentId<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 对于拒绝：下降的父模块 ID。</span>
  outdatedModules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 对于接受：已过时且将被处置的模块。</span>
  outdatedDependencies<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对于接受：将处理更新的接受处理程序的位置。</span>
    <span class="token number">5</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 对于错误：抛出错误</span>
  originalError<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">// 对于自我接受错误处理程序错误：</span>
                                <span class="token comment">// 在错误处理程序尝试处理该模块之前，该模块引发的错误。</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="addstatushandler"><code>addStatusHandler</code> <a href="#addstatushandler" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>注册一个函数来监听 <code>status</code> 的变化。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">addStatusHandler</span><span class="token punctuation">(</span>status <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 响应当前状态...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="removestatushandler"><code>removeStatusHandler</code> <a href="#removestatushandler" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>移除一个注册的状态处理函数。</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">removeStatusHandler</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h1 id="Loader-Interface">Loader Interface<a href="#Loader-Interface" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>A loader is just a JavaScript module that exports a function. The <a href="https://github.com/webpack/loader-runner">loader runner</a> calls this function and passes the result of the previous loader or the resource file into it. The <code>this</code> context of the function is filled-in by webpack and the <a href="https://github.com/webpack/loader-runner">loader runner</a> with some useful methods that allow the loader (among other things) to change its invocation style to async, or get query parameters.</p>
<p>The first loader is passed one argument: the content of the resource file. The compiler expects a result from the last loader. The result should be a <code>String</code> or a <code>Buffer</code> (which is converted to a string), representing the JavaScript source code of the module. An optional SourceMap result (as a JSON object) may also be passed.</p>
<p>A single result can be returned in <strong>sync mode</strong>. For multiple results the <code>this.callback()</code> must be called. In <strong>async mode</strong> <code>this.async()</code> must be called to indicate that the <a href="https://github.com/webpack/loader-runner">loader runner</a> should wait for an asynchronous result. It returns <code>this.callback()</code>. Then the loader must return <code>undefined</code> and call that callback.</p>
<h2 id="examples">Examples <a href="#examples" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The following sections provide some basic examples of the different types of loaders. Note that the <code>map</code> and <code>meta</code> parameters are optional, see <a href="#thiscallback"><code>this.callback</code></a> below.</p>
<h3 id="synchronous-loaders">Synchronous Loaders <a href="#synchronous-loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Either <code>return</code> or <code>this.callback</code> can be used to return the transformed <code>content</code> synchronously:</p>
<p><strong>sync-loader.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>The <code>this.callback</code> method is more flexible as it allows multiple arguments to be passed as opposed to just the <code>content</code>.</p>
<p><strong>sync-loader-with-multiple-results.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// always return undefined when calling callback()</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="asynchronous-loaders">Asynchronous Loaders <a href="#asynchronous-loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>For asynchronous loaders, <a href="#thisasync"><code>this.async</code></a> is used to retrieve the <code>callback</code> function:</p>
<p><strong>async-loader.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>async-loader-with-multiple-results.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<blockquote class="tip">
<p>Loaders were originally designed to work in synchronous loader pipelines, like Node.js (using <a href="https://github.com/webpack/enhanced-require">enhanced-require</a>), <em>and</em> asynchronous pipelines, like in webpack. However, since expensive synchronous computations are a bad idea in a single-threaded environment like Node.js, we advise making your loader asynchronous if possible. Synchronous loaders are ok if the amount of computation is trivial.</p>
</blockquote>
<h3 id="raw-loader">"Raw" Loader <a href="#raw-loader" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>By default, the resource file is converted to a UTF-8 string and passed to the loader. By setting the <code>raw</code> flag to <code>true</code>, the loader will receive the raw <code>Buffer</code>. Every loader is allowed to deliver its result as a <code>String</code> or as a <code>Buffer</code>. The compiler converts them between loaders.</p>
<p><strong>raw-loader.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">assert</span><span class="token punctuation">(</span>content <span class="token keyword">instanceof</span> <span class="token class-name">Buffer</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// return value can be a `Buffer` too</span>
  <span class="token comment">// This is also allowed if loader is not "raw"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code></pre>
<h3 id="pitching-loader">Pitching Loader <a href="#pitching-loader" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Loaders are <strong>always</strong> called from right to left. There are some instances where the loader only cares about the <strong>metadata</strong> behind a request and can ignore the results of the previous loader. The <code>pitch</code> method on loaders is called from <strong>left to right</strong> before the loaders are actually executed (from right to left).</p>
<blockquote class="tip">
<p>Loaders may be added inline in requests and disabled via inline prefixes, which will impact the order in which they are "pitched" and executed. See <a href="/configuration/module/#ruleenforce"><code>Rule.enforce</code></a> for more details.</p>
</blockquote>
<p>For the following configuration of <a href="/configuration/module/#ruleuse"><code>use</code></a>:</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'a-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'b-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'c-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>These steps would occur:</p>
<pre><code class="hljs language-diff">|- a-loader `pitch`
  |- b-loader `pitch`
    |- c-loader `pitch`
      |- requested module is picked up as a dependency
    |- c-loader normal execution
  |- b-loader normal execution
|- a-loader normal execution</code></pre>
<p>So why might a loader take advantage of the "pitching" phase?</p>
<p>First, the <code>data</code> passed to the <code>pitch</code> method is exposed in the execution phase as well under <code>this.data</code> and could be useful for capturing and sharing information from earlier in the cycle.</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Second, if a loader delivers a result in the <code>pitch</code> method, the process turns around and skips the remaining loaders. In our example above, if the <code>b-loader</code>s <code>pitch</code> method returned something:</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'module.exports = require('</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'-!'</span> <span class="token operator">+</span> remainingRequest<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">');'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>The steps above would be shortened to:</p>
<pre><code class="hljs language-diff">|- a-loader `pitch`
  |- b-loader `pitch` returns a module
|- a-loader normal execution</code></pre>
<h2 id="the-loader-context">The Loader Context <a href="#the-loader-context" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The loader context represents the properties that are available inside of a loader assigned to the <code>this</code> property.</p>
<p>Given the following example, this require call is used:</p>
<p>In <code>/abc/file.js</code>:</p>
<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loader1?xyz!loader2!./resource?rrr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="thisversion"><code>this.version</code> <a href="#thisversion" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><strong>Loader API version.</strong> Currently <code>2</code>. This is useful for providing backwards compatibility. Using the version you can specify custom logic or fallbacks for breaking changes.</p>
<h3 id="thiscontext"><code>this.context</code> <a href="#thiscontext" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><strong>The directory of the module.</strong> Can be used as a context for resolving other stuff.</p>
<p>In the example: <code>/abc</code> because <code>resource.js</code> is in this directory</p>
<h3 id="thisrootcontext"><code>this.rootContext</code> <a href="#thisrootcontext" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Since webpack 4, the formerly <code>this.options.context</code> is provided as <code>this.rootContext</code>.</p>
<h3 id="thisrequest"><code>this.request</code> <a href="#thisrequest" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The resolved request string.</p>
<p>In the example: <code>'/abc/loader1.js?xyz!/abc/node_modules/loader2/index.js!/abc/resource.js?rrr'</code></p>
<h3 id="thisquery"><code>this.query</code> <a href="#thisquery" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ol>
<li>If the loader was configured with an <a href="/configuration/module/#useentry"><code>options</code></a> object, this will point to that object.</li>
<li>If the loader has no <code>options</code>, but was invoked with a query string, this will be a string starting with <code>?</code>.</li>
</ol>
<h3 id="thisgetoptionsschema"><code>this.getOptions(schema)</code> <a href="#thisgetoptionsschema" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Extracts given loader options. Optionally, accepts JSON schema as an argument.</p>
<blockquote class="tip">
<p>Since webpack 5, <code>this.getOptions</code> is available in loader context. It substitutes <code>getOptions</code> method from <a href="https://github.com/webpack/loader-utils#getoptions">loader-utils</a>.</p>
</blockquote>
<h3 id="thiscallback"><code>this.callback</code> <a href="#thiscallback" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A function that can be called synchronously or asynchronously in order to return multiple results. The expected arguments are:</p>
<!-- eslint-skip -->
<pre><code class="hljs language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
  err<span class="token punctuation">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
  sourceMap<span class="token operator">?</span><span class="token punctuation">:</span> SourceMap<span class="token punctuation">,</span>
  meta<span class="token operator">?</span><span class="token punctuation">:</span> any
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ol>
<li>The first argument must be an <code>Error</code> or <code>null</code></li>
<li>The second argument is a <code>string</code> or a <a href="https://nodejs.org/api/buffer.html"><code>Buffer</code></a>.</li>
<li>Optional: The third argument must be a source map that is parsable by <a href="https://github.com/mozilla/source-map">this module</a>.</li>
<li>Optional: The fourth option, ignored by webpack, can be anything (e.g. some metadata).</li>
</ol>
<blockquote class="tip">
<p>It can be useful to pass an abstract syntax tree (AST), like <a href="https://github.com/estree/estree"><code>ESTree</code></a>, as the fourth argument (<code>meta</code>) to speed up the build time if you want to share common ASTs between loaders.</p>
</blockquote>
<p>In case this function is called, you should return undefined to avoid ambiguous loader results.</p>
<h3 id="thisasync"><code>this.async</code> <a href="#thisasync" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Tells the <a href="https://github.com/webpack/loader-runner">loader-runner</a> that the loader intends to call back asynchronously. Returns <code>this.callback</code>.</p>
<h3 id="thisdata"><code>this.data</code> <a href="#thisdata" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A data object shared between the pitch and the normal phase.</p>
<h3 id="thiscacheable"><code>this.cacheable</code> <a href="#thiscacheable" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A function that sets the cacheable flag:</p>
<pre><code class="hljs language-typescript"><span class="token function">cacheable</span><span class="token punctuation">(</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span></code></pre>
<p>By default, loader results are flagged as cacheable. Call this method passing <code>false</code> to make the loader's result not cacheable.</p>
<p>A cacheable loader must have a deterministic result when inputs and dependencies haven't changed. This means the loader shouldn't have dependencies other than those specified with <code>this.addDependency</code>.</p>
<h3 id="thisloaders"><code>this.loaders</code> <a href="#thisloaders" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>An array of all the loaders. It is writable in the pitch phase.</p>
<!-- eslint-skip -->
<pre><code class="hljs language-javascript">loaders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>request<span class="token punctuation">:</span> string<span class="token punctuation">,</span> path<span class="token punctuation">:</span> string<span class="token punctuation">,</span> query<span class="token punctuation">:</span> string<span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre>
<p>In the example:</p>
<pre><code class="hljs language-javascript"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    request<span class="token punctuation">:</span> <span class="token string">'/abc/loader1.js?xyz'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> <span class="token string">'/abc/loader1.js'</span><span class="token punctuation">,</span>
    query<span class="token punctuation">:</span> <span class="token string">'?xyz'</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    request<span class="token punctuation">:</span> <span class="token string">'/abc/node_modules/loader2/index.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> <span class="token string">'/abc/node_modules/loader2/index.js'</span><span class="token punctuation">,</span>
    query<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<h3 id="thisloaderindex"><code>this.loaderIndex</code> <a href="#thisloaderindex" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The index in the loaders array of the current loader.</p>
<p>In the example: in loader1: <code>0</code>, in loader2: <code>1</code></p>
<h3 id="thisresource"><code>this.resource</code> <a href="#thisresource" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The resource part of the request, including query.</p>
<p>In the example: <code>'/abc/resource.js?rrr'</code></p>
<h3 id="thisresourcepath"><code>this.resourcePath</code> <a href="#thisresourcepath" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The resource file.</p>
<p>In the example: <code>'/abc/resource.js'</code></p>
<h3 id="thisresourcequery"><code>this.resourceQuery</code> <a href="#thisresourcequery" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The query of the resource.</p>
<p>In the example: <code>'?rrr'</code></p>
<h3 id="thistarget"><code>this.target</code> <a href="#thistarget" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Target of compilation. Passed from configuration options.</p>
<p>Example values: <code>'web'</code>, <code>'node'</code></p>
<h3 id="thiswebpack"><code>this.webpack</code> <a href="#thiswebpack" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>This boolean is set to true when this is compiled by webpack.</p>
<blockquote class="tip">
<p>Loaders were originally designed to also work as Babel transforms. Therefore, if you write a loader that works for both, you can use this property to know if there is access to additional loaderContext and webpack features.</p>
</blockquote>
<h3 id="thissourcemap"><code>this.sourceMap</code> <a href="#thissourcemap" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Tells if source map should be generated. Since generating source maps can be an expensive task, you should check if source maps are actually requested.</p>
<h3 id="thisemitwarning"><code>this.emitWarning</code> <a href="#thisemitwarning" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">emitWarning</span><span class="token punctuation">(</span>warning<span class="token punctuation">:</span> Error<span class="token punctuation">)</span></code></pre>
<p>Emit a warning that will be displayed in the output like the following:</p>
<pre><code class="hljs language-bash">WARNING <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module Warning <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Here is a Warning<span class="token operator">!</span>
 @ ./src/index.js 1:0-25</code></pre>
<blockquote class="tip">
<p>Note that the warnings will not be displayed if <code>stats.warnings</code> is set to <code>false</code>, or some other omit setting is used to <code>stats</code> such as <code>none</code> or <code>errors-only</code>. See the <a href="/configuration/stats/#stats-presets">stats presets configuration</a>.</p>
</blockquote>
<h3 id="thisemiterror"><code>this.emitError</code> <a href="#thisemiterror" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">emitError</span><span class="token punctuation">(</span>error<span class="token punctuation">:</span> Error<span class="token punctuation">)</span></code></pre>
<p>Emit an error that also can be displayed in the output.</p>
<pre><code class="hljs language-bash">ERROR <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module Error <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Here is an Error<span class="token operator">!</span>
 @ ./src/index.js 1:0-25</code></pre>
<blockquote class="tip">
<p>Unlike throwing an Error directly, it will NOT interrupt the compilation process of the current module.</p>
</blockquote>
<h3 id="thisloadmodule"><code>this.loadModule</code> <a href="#thisloadmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">loadModule</span><span class="token punctuation">(</span>request<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> source<span class="token punctuation">,</span> sourceMap<span class="token punctuation">,</span> <span class="token keyword">module</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>Resolves the given request to a module, applies all configured loaders and calls back with the generated source, the sourceMap and the module instance (usually an instance of <a href="https://github.com/webpack/webpack/blob/master/lib/NormalModule.js"><code>NormalModule</code></a>). Use this function if you need to know the source code of another module to generate the result.</p>
<h3 id="thisresolve"><code>this.resolve</code> <a href="#thisresolve" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">resolve</span><span class="token punctuation">(</span>context<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> request<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>Resolve a request like a require expression.</p>
<h3 id="thisadddependency"><code>this.addDependency</code> <a href="#thisadddependency" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">addDependency</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token function">dependency</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token comment">// shortcut</span></code></pre>
<p>Add a file as dependency of the loader result in order to make them watchable. For example, <a href="https://github.com/webpack-contrib/sass-loader"><code>sass-loader</code></a>, <a href="https://github.com/webpack-contrib/less-loader"><code>less-loader</code></a> uses this to recompile whenever any imported <code>css</code> file changes.</p>
<h3 id="thisaddcontextdependency"><code>this.addContextDependency</code> <a href="#thisaddcontextdependency" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">addContextDependency</span><span class="token punctuation">(</span>directory<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span></code></pre>
<p>Add a directory as dependency of the loader result.</p>
<h3 id="thiscleardependencies"><code>this.clearDependencies</code> <a href="#thiscleardependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">clearDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>Remove all dependencies of the loader result, even initial dependencies and those of other loaders. Consider using <code>pitch</code>.</p>
<h3 id="thisemitfile"><code>this.emitFile</code> <a href="#thisemitfile" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">emitFile</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> Buffer<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> sourceMap<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>Emit a file. This is webpack-specific.</p>
<h3 id="thishot"><code>this.hot</code> <a href="#thishot" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Information about HMR for loaders.</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hot<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true if HMR is enabled via --hot flag or webpack configuration</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="thisfs"><code>this.fs</code> <a href="#thisfs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Access to the <code>compilation</code>'s <code>inputFileSystem</code> property.</p>
<h3 id="thismode"><code>this.mode</code> <a href="#thismode" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Read in which <a href="/configuration/mode/"><code>mode</code></a> webpack is running.</p>
<p>Possible values: <code>'production'</code>, <code>'development'</code>, <code>'none'</code></p>
<h2 id="deprecated-context-properties">Deprecated context properties <a href="#deprecated-context-properties" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<blockquote class="warning">
<p>The usage of these properties is highly discouraged since we are planning to remove them from the context. They are still listed here for documentation purposes.</p>
</blockquote>
<h3 id="thisexec"><code>this.exec</code> <a href="#thisexec" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-typescript"><span class="token function">exec</span><span class="token punctuation">(</span>code<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> filename<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span></code></pre>
<p>Execute some code fragment like a module. See <a href="https://github.com/webpack/webpack.js.org/issues/1268#issuecomment-313513988">this comment</a> for a replacement method if needed.</p>
<h3 id="thisvalue"><code>this.value</code> <a href="#thisvalue" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Pass values to the next loader. If you know what your result exports if executed as a module, set this value here (as an only element array).</p>
<h3 id="thisinputvalue"><code>this.inputValue</code> <a href="#thisinputvalue" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Passed from the last loader. If you would execute the input argument as a module, consider reading this variable for a shortcut (for performance).</p>
<h3 id="thisdebug"><code>this.debug</code> <a href="#thisdebug" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A boolean flag. It is set when in debug mode.</p>
<h3 id="thisminimize"><code>this.minimize</code> <a href="#thisminimize" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Tells if result should be minimized.</p>
<h3 id="this_compilation"><code>this._compilation</code> <a href="#this_compilation" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Hacky access to the Compilation object of webpack.</p>
<h3 id="this_compiler"><code>this._compiler</code> <a href="#this_compiler" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Hacky access to the Compiler object of webpack.</p>
<h3 id="this_module"><code>this._module</code> <a href="#this_module" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Hacky access to the Module object being loaded.</p>
<h2 id="error-reporting">Error Reporting <a href="#error-reporting" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>You can report errors from inside a loader by:</p>
<ul>
<li>Using <a href="/api/loaders/#thisemiterror">this.emitError</a>. Will report the errors without interrupting module's compilation.</li>
<li>Using <code>throw</code> (or other uncaught exception). Throwing an error while a loader is running will cause current module compilation failure.</li>
<li>Using <code>callback</code> (in async mode). Pass an error to the callback will also cause module compilation failure.</li>
</ul>
<p>For example:</p>
<p><strong>./src/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loader!./lib'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Throwing an error from loader:</p>
<p><strong>./src/loader.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'This is a Fatal Error!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Or pass an error to the callback in async mode:</p>
<p><strong>./src/loader.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//...</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'This is a Fatal Error!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>The module will get bundled like this:</p>
<!-- eslint-skip -->
<pre><code class="hljs language-javascript"><span class="token comment">/***/</span> <span class="token string">"./src/loader.js!./src/lib.js"</span><span class="token punctuation">:</span>
<span class="token comment">/*!************************************!*\
  !*** ./src/loader.js!./src/lib.js ***!
  \************************************/</span>
<span class="token comment">/*! no static exports found */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Module build failed (from ./src/loader.js):\nError: This is a Fatal Error!\n    at Object.module.exports (/workspace/src/loader.js:3:9)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/***/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>Then the build output will also display the error (Similar to <code>this.emitError</code>):</p>
<pre><code class="hljs language-bash">ERROR <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module build failed <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Error: This is a Fatal Error<span class="token operator">!</span>
    at Object.module.exports <span class="token punctuation">(</span>/workspace/src/loader.js:2:9<span class="token punctuation">)</span>
 @ ./src/index.js 1:0-25</code></pre>
<p>As you can see below, not only error message, but also details about which loader and module are involved:</p>
<ul>
<li>the module path: <code>ERROR in ./src/lib.js</code></li>
<li>the request string: <code>(./src/loader.js!./src/lib.js)</code></li>
<li>the loader path: <code>(from ./src/loader.js)</code></li>
<li>the caller path: <code>@ ./src/index.js 1:0-25</code></li>
</ul>
<blockquote class="warning">
<p>The loader path in the error is displayed since webpack 4.12</p>
</blockquote>
<blockquote class="tip">
<p>All the errors and warnings will be recorded into <code>stats</code>. Please see <a href="/api/stats/#errors-and-warnings">Stats Data</a>.</p>
</blockquote>
<h3 id="inline-matchresource">Inline matchResource <a href="#inline-matchresource" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A new inline request syntax was introduced in webpack v4. Prefixing <code>&#x3C;match-resource>!=!</code> to a request will set the <code>matchResource</code> for this request.</p>
<blockquote class="warning">
<p>It is not recommended to use this syntax in application code.
Inline request syntax is intended to only be used by loader generated code.
Not following this recommendation will make your code webpack-specific and non-standard.</p>
</blockquote>
<blockquote class="tip">
<p>A relative <code>matchResource</code> will resolve relative to the current context of the containing module.</p>
</blockquote>
<p>When a <code>matchResource</code> is set, it will be used to match with the <a href="/configuration/module/#modulerules"><code>module.rules</code></a> instead of the original resource. This can be useful if further loaders should be applied to the resource, or if the module type needs to be changed. It's also displayed in the stats and used for matching <a href="/configuration/module/#ruleissuer"><code>Rule.issuer</code></a> and <a href="/plugins/split-chunks-plugin/#splitchunkscachegroupscachegrouptest"><code>test</code> in <code>splitChunks</code></a>.</p>
<p>Example:</p>
<p><strong>file.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token comment">/* STYLE: body { background: red; } */</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>A loader could transform the file into the following file and use the <code>matchResource</code> to apply the user-specified CSS processing rules:</p>
<p><strong>file.js</strong> (transformed by loader)</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">'./file.js.css!=!extract-style-loader/getStyles!./file.js'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This will add a dependency to <code>extract-style-loader/getStyles!./file.js</code> and treat the result as <code>file.js.css</code>. Because <a href="/configuration/module/#modulerules"><code>module.rules</code></a> has a rule matching <code>/\.css$/</code> and it will apply to this dependency.</p>
<p>The loader could look like this:</p>
<p><strong>extract-style-loader/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> stringifyRequest <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stringifyRequest<span class="token punctuation">;</span>
<span class="token keyword">const</span> getRemainingRequest <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getRemainingRequest<span class="token punctuation">;</span>
<span class="token keyword">const</span> getStylesLoader <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./getStyle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">STYLES_REGEXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">STYLES_REGEXP</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> remReq <span class="token operator">=</span> <span class="token function">getRemainingRequest</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`import ${stringifyRequest(`</span></span>$<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>resource<span class="token punctuation">}</span><span class="token punctuation">.</span>css<span class="token operator">!=</span><span class="token operator">!</span>$<span class="token punctuation">{</span>getStylesLoader<span class="token punctuation">}</span><span class="token operator">!</span>$<span class="token punctuation">{</span>remReq<span class="token punctuation">}</span><span class="token template-string"><span class="token string">`)};</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>extract-style-loader/getStyles.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token constant">STYLES_REGEXP</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="logging">Logging <a href="#logging" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Logging API is available since the release of webpack 4.37. When <code>logging</code> is enabled in <a href="/configuration/stats/#statslogging"><code>stats configuration</code></a> and/or when <a href="/configuration/other-options/#infrastructurelogging"><code>infrastructure logging</code></a> is enabled, loaders may log messages which will be printed out in the respective logger format (stats, infrastructure).</p>
<ul>
<li>Loaders should prefer to use <code>this.getLogger()</code> for logging which is a shortcut to <code>compilation.getLogger()</code> with loader path and processed file. This kind of logging is stored to the Stats and formatted accordingly. It can be filtered and exported by the webpack user.</li>
<li>Loaders may use <code>this.getLogger('name')</code> to get an independent logger with a child name. Loader path and processed file is still added.</li>
<li>Loaders may use special fallback logic for detecting logging support <code>this.getLogger() ? this.getLogger() : console</code> to provide a fallback when an older webpack version is used which does not support <code>getLogger</code> method.</li>
</ul>
<h1 id="Logger-接口">Logger 接口<a href="#Logger-%E6%8E%A5%E5%8F%A3" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>本 API 从 v4.39.0 开始可用</p>
</blockquote>
<p>使用 Logger 输出消息是一种向用户展示信息的有效方式。</p>
<p>Webpack Logger 可以用在 <a href="/loaders/">loader</a> 和 <a href="/api/plugins/#logging">plugin</a>。生成的 Logger 将作为 <a href="/api/stats/">统计信息</a> 的一部分进行输出，并且用户可以在 <a href="/configuration/">webpack 配置文件</a> 中对 Logger 进行配置。</p>
<p>在 Webpack 中使用自定义 Logger API 的优点：</p>
<ul>
<li>可以 <a href="/configuration/stats/#statslogging">配置</a> 日志的展示级别</li>
<li>日志内容可作为 <code>stats.json</code> 的一部分输出</li>
<li>统计预设会影响日志的输出</li>
<li>使用 plugin 可以影响日志的捕获与展示级别</li>
<li>当使用多个 plugin 和 loader 时，提供更加通用的日志记录解决方案</li>
<li>基于 Webpack 开发的 CLI、UI 工具等可能会选择不同的方式来展示日志</li>
<li>Webpack 核心可以触发日志输出，例如：timing data</li>
</ul>
<p>通过引入 Webpack Logger API，我们希望统一 Webpack plugins 和 loaders 生成日志的方式，并提供更好的方法来检查构建问题。 集成的 Logging 解决方案可以帮助 plugins 和 loader 的开发人员提升他们的开发经验。同时为非 CLI 形式的 Webpack 解决方案构建铺平了道路，例如 dashboard 或其他 UI。</p>
<blockquote class="warning">
<p><strong>避免在日志中输出无效信息！</strong>请记住，多个 plugin 和 loader 经常一起使用。loader 通常处理多个文件，并且每个文件都会调用，所以尽可能选择较低的日志级别以保证 log 的信息量。</p>
</blockquote>
<h2 id="examples-of-how-to-get-and-use-webpack-logger-in-loaders-and-plugins">Examples of how to get and use webpack logger in loaders and plugins <a href="#examples-of-how-to-get-and-use-webpack-logger-in-loaders-and-plugins" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><strong>my-webpack-plugin.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token constant">PLUGIN_NAME</span> <span class="token operator">=</span> <span class="token string">'my-webpack-plugin'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyWebpackPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// you can access Logger from compiler</span>
    <span class="token keyword">const</span> logger <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">getInfrastructureLogger</span><span class="token punctuation">(</span><span class="token constant">PLUGIN_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'log from compiler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token constant">PLUGIN_NAME</span><span class="token punctuation">,</span> compilation <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// you can also access Logger from compilation</span>
      <span class="token keyword">const</span> logger <span class="token operator">=</span> compilation<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token constant">PLUGIN_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'log from compilation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>my-webpack-loader.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// you can get Logger with `this.getLogger` in your webpack loaders</span>
  <span class="token keyword">const</span> logger <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">'my-webpack-loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'hello Logger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="logger-methods">Logger methods <a href="#logger-methods" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<ul>
<li><code>logger.error(...)</code>：用于输出错误信息</li>
<li><code>logger.warn(...)</code>：用于输出警告信息</li>
<li><code>logger.info(...)</code>：用于输出<strong>重要</strong>信息。默认情况下会显示这些信息，所以仅用于输出用户真正需要查看的消息</li>
<li><code>logger.log(...)</code>：用于输出<strong>不重要</strong>的信息。只有当用户选择查看时，才会显示</li>
<li><code>logger.debug(...)</code>：用于输出调试信息。只有当用户选择查看特定模块的调试日志时，才会显示</li>
<li><code>logger.trace()</code>：显示堆栈跟踪信息，展示形式类似于 <code>logger.debug</code></li>
<li><code>logger.group(...)</code>：将消息进行分组，展示形式类似于 <code>logger.log</code></li>
<li><code>logger.groupEnd()</code>：结束消息分组</li>
<li><code>logger.groupCollapsed(...)</code>：将消息进行分组。默认显示为折叠 <code>logger.log</code> 日志，当日志记录级别设置为 <code>'verbose'</code> 或 <code>'debug'</code> 时，显示展开的日志</li>
<li><code>logger.status</code>：写入一条临时消息，并且设置新状态，覆盖上一个状态</li>
<li><code>logger.clear()</code>：打印水平线。展示形式类似于 <code>logger.log</code></li>
<li><code>logger.profile(...)</code>，<code>logger.profileEnd(...)</code>：捕获配置文件。当支持 <code>console.profile</code> API 时，使用其进行输出</li>
</ul>
<h2 id="runtime-logger-api">Runtime Logger API <a href="#runtime-logger-api" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Runtime logger API 仅应该用作开发工具，不应该包含在 <a href="/configuration/mode/#mode-production">生产模式</a>中。</p>
<ul>
<li><code>const logging = require('webpack/lib/logging/runtime')</code>：直接从 Webpack 中引入即可使用 logger API</li>
<li><code>logging.getLogger('name')</code>：根据名称获取一个 logger 的实例</li>
<li><code>logging.configureDefaultLogger(...)</code>：重写 logger 的默认配置</li>
</ul>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> logging <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/logging/runtime'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logging<span class="token punctuation">.</span><span class="token function">configureDefaultLogger</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  level<span class="token punctuation">:</span> <span class="token string">'log'</span><span class="token punctuation">,</span>
  debug<span class="token punctuation">:</span> <span class="token regex">/something/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><code>logging.hooks.log</code>：向 logger 中添加 Plugins</li>
</ul>
<h1 id="模块方法">模块方法<a href="#%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>本章节涵盖了使用 webpack 编译代码的所有方法。在 webpack 打包应用程序时，你可以选择各种模块语法风格，包括 <a href="https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_-_ECMAScript_2015">ES6</a>，<a href="https://en.wikipedia.org/wiki/CommonJS">CommonJS</a> 和 <a href="https://en.wikipedia.org/wiki/Asynchronous_module_definition">AMD</a>。</p>
<blockquote class="warning">
<p>虽然 webpack 支持多种模块语法，但我们建议尽量遵循一致的语法，以此避免一些奇怪的行为和 bug。这是一个混合使用了 ES6 和 CommonJS 的<a href="https://github.com/webpack/webpack.js.org/issues/552">示例</a>，但肯定还会有其他的 bug 产生。</p>
</blockquote>
<h2 id="es6-recommended">ES6 (推荐) <a href="#es6-recommended" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>webpack 2 支持原生的 ES6 模块语法，意味着你无须额外引入 babel 这样的工具，就可以使用 <code>import</code> 和 <code>export</code>。但是注意，如果使用其他的 ES6+ 特性，仍然需要引入 babel。webpack 支持以下的方法：</p>
<h3 id="import"><code>import</code> <a href="#import" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>通过 <code>import</code> 以静态的方式导入另一个通过 <code>export</code> 导出的模块。</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> MyModule <span class="token keyword">from</span> <span class="token string">'./my-module.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NamedExport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./other-module.js'</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>这里的关键词是<strong>静态的</strong>。标准的 <code>import</code> 语句中，模块语句中不能以「具有逻辑或含有变量」的动态方式去引入其他模块。关于 import 的更多信息和 <code>import()</code> 动态用法，请查看这里的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">说明</a>。</p>
</blockquote>
<h3 id="export"><code>export</code> <a href="#export" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>默认</code>导出整个模块或具名导出模块。</p>
<pre><code class="hljs language-javascript"><span class="token comment">// 具名导出</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> Count <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Multiply</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 默认导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// Some data...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="import"><code>import()</code> <a href="#import" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function(string path):Promise</code></p>
<p>动态的加载模块。调用 <code>import</code> 的之处，被视为分割点，意思是，被请求的模块和它引用的所有子模块，会分割到一个单独的 chunk 中。</p>
<blockquote class="tip">
<p><a href="https://whatwg.github.io/loader/">ES2015 Loader 规范</a> 定义了 <code>import()</code> 方法，可以在运行时动态地加载 ES2015 模块。</p>
</blockquote>
<pre><code class="hljs language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span> module<span class="token punctuation">.</span>hot <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>_ <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with lodash (a.k.a '_')...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<blockquote class="warning">
<p>import() 特性依赖于内置的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>。如果想在低版本浏览器中使用 <code>import()</code>，记得使用像 <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> 或者 <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> 这样 polyfill 库，来预先填充(shim) <code>Promise</code> 环境。</p>
</blockquote>
<h3 id="dynamic-expressions-in-import">import() 中的表达式 <a href="#dynamic-expressions-in-import" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>不能使用完全动态的 import 语句，例如 <code>import(foo)</code>。是因为 <code>foo</code> 可能是系统或项目中任何文件的任何路径。</p>
<p><code>import()</code> 必须至少包含一些关于模块的路径信息。打包可以限定于一个特定的目录或文件集，以便于在使用动态表达式时 - 包括可能在 <code>import()</code> 调用中请求的每个模块。例如， <code>import(`./locale/${language}.json`)</code> 会把 <code>.locale</code> 目录中的每个 <code>.json</code> 文件打包到新的 chunk 中。在运行时，计算完变量 <code>language</code> 后，就可以使用像 <code>english.json</code> 或 <code>german.json</code> 的任何文件。</p>
<pre><code class="hljs language-javascript"><span class="token comment">// 想象我们有一个从 cookies 或其他存储中获取语言的方法</span>
<span class="token keyword">const</span> language <span class="token operator">=</span> <span class="token function">detectVisitorLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./locale/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>module <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with the translations</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="tip">
<p>使用 <a href="/api/module-methods/#magic-comments"><code>webpackInclude</code> and <code>webpackExclude</code></a> 选项可让你添加正则表达式模式，以减少 webpack 打包导入的文件数量。</p>
</blockquote>
<h4 id="magic-comments">Magic Comments <a href="#magic-comments" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>内联注释使这一特性得以实现。通过在 import 中添加注释，我们可以进行诸如给 chunk 命名或选择不同模式的操作。</p>
<pre><code class="hljs language-js"><span class="token comment">// 单个目标</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackChunkName: "my-chunk-name" */</span>
  <span class="token comment">/* webpackMode: "lazy" */</span>
  <span class="token comment">/* webpackExports: ["default", "named"] */</span>
  <span class="token string">'module'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 多个可能的目标</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackInclude: /\.json$/ */</span>
  <span class="token comment">/* webpackExclude: /\.noimport\.json$/ */</span>
  <span class="token comment">/* webpackChunkName: "my-chunk-name" */</span>
  <span class="token comment">/* webpackMode: "lazy" */</span>
  <span class="token comment">/* webpackPrefetch: true */</span>
  <span class="token comment">/* webpackPreload: true */</span>
  <span class="token template-string"><span class="token string">`./locale/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-js"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackIgnore: true */</span> <span class="token string">'ignored-module.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>webpackIgnore</code>：设置为 true 时，禁用动态导入解析。</p>
<blockquote class="warning">
<p>注意：将 <code>webpackIgnore</code> 设置为 <code>true</code> 则不进行代码分割。</p>
</blockquote>
<p><code>webpackChunkName</code>: 新 chunk 的名称。 从 webpack 2.6.0 开始，占位符 <code>[index]</code> 和 <code>[request]</code> 分别支持递增的数字或实际的解析文件名。 添加此注释后，将单独的给我们的 chunk 命名为 [my-chunk-name].js 而不是 [id].js。</p>
<p><code>webpackMode</code>：从 webpack 2.6.0 开始，可以指定以不同的模式解析动态导入。支持以下选项：</p>
<ul>
<li><code>'lazy'</code> (默认值)：为每个 <code>import()</code> 导入的模块生成一个可延迟加载（lazy-loadable）的 chunk。</li>
<li><code>'lazy-once'</code>：生成一个可以满足所有 <code>import()</code> 调用的单个可延迟加载（lazy-loadable）的 chunk。此 chunk 将在第一次 <code>import()</code> 时调用时获取，随后的 <code>import()</code> 则使用相同的网络响应。注意，这种模式仅在部分动态语句中有意义，例如 <code>import(`./locales/${language}.json`)</code>，其中可能含有多个被请求的模块路径。</li>
<li><code>'eager'</code>：不会生成额外的 chunk。所有的模块都被当前的 chunk 引入，并且没有额外的网络请求。但是仍会返回一个 resolved 状态的 <code>Promise</code>。与静态导入相比，在调用 <code>import()</code> 完成之前，该模块不会被执行。</li>
<li><code>'weak'</code>：尝试加载模块，如果该模块函数已经以其他方式加载，（即另一个 chunk 导入过此模块，或包含模块的脚本被加载）。仍会返回 <code>Promise</code>， 但是只有在客户端上已经有该 chunk 时才会成功解析。如果该模块不可用，则返回 rejected 状态的 <code>Promise</code>，且网络请求永远都不会执行。当需要的 chunks 始终在（嵌入在页面中的）初始请求中手动提供，而不是在应用程序导航在最初没有提供的模块导入的情况下触发，这对于通用渲染（SSR）是非常有用的。</li>
</ul>
<p><code>webpackPrefetch</code>：告诉浏览器将来可能需要该资源来进行某些导航跳转。查看指南，了解有关更多信息 <a href="/guides/code-splitting/#prefetchingpreloading-modules">how webpackPrefetch works</a>。</p>
<p><code>webpackPreload</code>：告诉浏览器在当前导航期间可能需要该资源。 查阅指南，了解有关的更多信息 <a href="/guides/code-splitting/#prefetchingpreloading-modules">how webpackPreload works</a>。</p>
<blockquote class="tip">
<p>注意：所有选项都可以像这样组合 <code>/* webpackMode: "lazy-once", webpackChunkName: "all-i18n-data" */</code>。这会按没有花括号的 JSON5 对象去解析。它会被包裹在 JavaScript 对象中，并使用 <a href="https://nodejs.org/dist/latest-v8.x/docs/api/vm.html">node VM</a> 执行。所以你不需要添加花括号。</p>
</blockquote>
<p><code>webpackInclude</code>：在导入解析（import resolution）过程中，用于匹配的正则表达式。只有匹配到的模块<strong>才会被打包</strong>。</p>
<p><code>webpackExclude</code>：在导入解析（import resolution）过程中，用于匹配的正则表达式。所有匹配到的模块<strong>都不会被打包</strong>。</p>
<blockquote class="tip">
<p>注意，<code>webpackInclude</code> 和 <code>webpackExclude</code> 不会影响到前缀，例如 <code>./locale</code>。</p>
</blockquote>
<p><code>webpackExports</code>: 告诉 webpack 在使用动态导入时，只打包这个模块使用的导出项。它可以减小 chunk 的大小。从 <a href="https://github.com/webpack/webpack/releases/tag/v5.0.0-beta.18">webpack 5.0.0-beta.18</a> 起可用。</p>
<h2 id="commonjs">CommonJS <a href="#commonjs" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>CommonJS 的目标是为浏览器之外的 JavaScript 指定一个生态系统。webpack 支持以下 CommonJS 的方法：</p>
<h3 id="require"><code>require</code> <a href="#require" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span>dependency<span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>已同步的方式检索其他模块的导出。编译器（compiler）会确保依赖项在输出 bundle 中可用。</p>
<pre><code class="hljs language-javascript"><span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myModule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'my-module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>以异步的方式使用，可能不会达到预期效果。</p>
</blockquote>
<h3 id="requireresolve"><code>require.resolve</code> <a href="#requireresolve" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dependency<span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>已同步的方式获取模块的 ID。编译器（compiler）会确保依赖项在最终输出 bundle 中可用。建议将其视为不透明值，只能与 <code>require.cache[id]</code> 或 <code>__webpack_require__(id)</code> 配合使用（最好避免这种用法）。</p>
<blockquote class="warning">
<p>模块 ID 的类型可以是 <code>number</code> 或 <code>string</code>，具体取决于 <a href="/configuration/optimization/#optimizationmoduleids"><code>optimization.moduleIds</code></a> 配置。</p>
</blockquote>
<p>有关更多模块的信息，详见 <a href="/api/module-variables/#moduleid-commonjs"><code>module.id</code></a>。</p>
<h3 id="requirecache"><code>require.cache</code> <a href="#requirecache" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>多处引用同一模块，最终只会产生一次模块执行和一次导出。所以，会在运行时（runtime）中会保存一份缓存。删除此缓存，则会产生新的模块执行和新的导出。</p>
<blockquote class="warning">
<p>仅在极少数情况下才需要考虑兼容性！</p>
</blockquote>
<pre><code class="hljs language-javascript"><span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span> <span class="token operator">===</span> d1<span class="token punctuation">;</span>
<span class="token keyword">delete</span> require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> d1<span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-javascript"><span class="token comment">// in file.js</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">===</span> module<span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span> <span class="token operator">===</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token keyword">delete</span> require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">===</span> undefined<span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span> <span class="token comment">// 理论上是不相等的；实际运行中，则会导致堆栈溢出</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">!==</span> module<span class="token punctuation">;</span></code></pre>
<h3 id="requireensure"><code>require.ensure</code> <a href="#requireensure" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<blockquote class="warning">
<p><code>require.ensure()</code> 是 webpack 特有的，已被 <code>import()</code> 取代。</p>
</blockquote>
<!-- eslint-skip -->
<pre><code class="hljs language-js">require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span>
  dependencies<span class="token punctuation">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span><span class="token punctuation">,</span>
  errorCallback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span>
  chunkName<span class="token punctuation">:</span> String
<span class="token punctuation">)</span></code></pre>
<p>给定 <code>dependencies</code> 参数，将其对应的文件拆分到一个单独的 bundle 中，此 bundle 会被异步加载。当使用 CommonJS 模块语法时，这是动态加载依赖项的唯一方法。这意味着，可以在模块执行时才允许代码，只有在满足特定条件时才会加载 <code>dependencies</code>。</p>
<blockquote class="warning">
<p>这个特性依赖内置的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>。如果你在低版本浏览器中使用 <code>require.ensure</code>，记得使用像 <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> 或 <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> 这样的 polyfill 库，预先填充（shim）<code>Promise</code> 环境。</p>
</blockquote>
<pre><code class="hljs language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'normal-dep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> module<span class="token punctuation">.</span>hot <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Do something special...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>按照上面指定的顺序，<code>require.ensure</code> 支持以下参数：</p>
<ul>
<li><code>dependencies</code>：字符串数组，声明 <code>callback</code> 回调函数中所需要的所有模块。</li>
<li><code>callback</code>：当依赖项加载完成后，webpack 将会执行此函数，<code>require</code> 函数的实现，作为参数传入此函数中。当程序运行需要依赖时，可以使用 <code>require()</code> 来加载依赖。函数体可以使用此参数，来进一步执行 <code>require()</code> 模块。</li>
<li><code>errorCallback</code>：当 webpack 加载依赖失败时会执行此函数。</li>
<li><code>chunkName</code>：由 <code>require.ensure</code> 创建的 chunk 的名称。通过将相同 <code>chunkName</code> 传递给不同的 <code>require.ensure</code> 调用，我们可以将其代码合并到一个单独的 chunk 中，从而只产生一个浏览器必须加载的 bundle。</li>
</ul>
<blockquote class="warning">
<p>虽然将 <code>require</code> 的实现作为参数（可以使用任意名称）传递给 <code>callback</code> 函数，例如，<code>require.ensure([], function(request) { request('someModule'); })</code> 则不能被 webpack 静态解析器处理，因此还是使用 <code>require</code> 作为参数名，例如，<code>require.ensure([], function(require) { require('someModule') })</code>。</p>
</blockquote>
<h2 id="amd">AMD <a href="#amd" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>AMD（Asynchronous Module Definition）是一种定义了用于编写和加载模块接口的 JavaScript 规范。</p>
<h3 id="define-with-factory"><code>define</code> (通过 factory 方法导出) <a href="#define-with-factory" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<!-- eslint-skip -->
<pre><code class="hljs language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">:</span> String<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dependencies<span class="token punctuation">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factoryMethod<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>如果提供了 <code>dependencies</code> 参数，就会调用 <code>factoryMethod</code> 方法，并（以相同的顺序）导出每个依赖项。如果未提供 <code>dependencies</code> 参数，调用 <code>factoryMethod</code> 方法时会传入 <code>require</code> , <code>exports</code> 和 <code>module</code>（用于兼容！）。如果此方法返回一个值，则返回值会作为此模块的导出。由编译器（compiler）来确保依赖项在最终输出的 bundle 中可用。</p>
<blockquote class="warning">
<p>注意：webpack 会忽略 <code>name</code> 参数。</p>
</blockquote>
<pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'my-module'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>$<span class="token punctuation">,</span> myModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 $ 和 myModule 做一些操作...</span>

  <span class="token comment">// 导出一个函数</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>上面的写法不能在异步函数中使用。</p>
</blockquote>
<h3 id="define-with-value"><code>define</code> (通过 value 导出) <a href="#define-with-value" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<!-- eslint-skip -->
<pre><code class="hljs language-js"><span class="token function">define</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token operator">!</span>Function<span class="token punctuation">)</span></code></pre>
<p>这种方式只将提供的 <code>value</code> 导出。这里的 <code>value</code> 可以是除函数以外的任何值。</p>
<pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  answer<span class="token punctuation">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>上面的写法不能在异步函数中使用。</p>
</blockquote>
<h3 id="require-amd-version"><code>require</code> (AMD 版本) <a href="#require-amd-version" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<!-- eslint-skip -->
<pre><code class="hljs language-js"><span class="token function">require</span><span class="token punctuation">(</span>dependencies<span class="token punctuation">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>
<p>与 <code>require.ensure</code> 类似，给定 <code>dependencies</code> 参数，将其对应的文件拆分到一个单独的 bundle 中，此 bundle 会被异步加载。然后会调用 <code>callback</code> 回调函数，并传入 <code>dependencies</code> 数组中的每个项导出。</p>
<blockquote class="warning">
<p>这个特性依赖内置的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>。如果你在低版本浏览器中使用 <code>require.ensure</code>，记得使用像 <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> 或 <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> 这样的 polyfill 库，预先填充（shim）<code>Promise</code> 环境。</p>
</blockquote>
<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>这里没有提供命名 bundle 名称的选项。</p>
</blockquote>
<h2 id="labeled-modules">标签模块(Labeled Modules) <a href="#labeled-modules" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>webpack 内置的 <code>LabeledModulesPlugin</code> 插件，允许你使用下面的方法导出和导入模块：</p>
<h3 id="export-label"><code>export</code> 标签 <a href="#export-label" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>导出给定的 <code>value</code>。标签可以出现在函数声明或变量声明之前。函数名或变量名是导出值的标识符。</p>
<!-- eslint-skip -->
<pre><code class="hljs language-js"><span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>在异步函数中使用，可能不会达到预期的效果。</p>
</blockquote>
<h3 id="require-label"><code>require</code> 标签 <a href="#require-label" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>在当前作用域下，依赖项的所有导出均可用。<code>require</code> 标签可以放置在一个字符串之前。依赖模块必须使用 <code>export</code> 标签导出值。CommonJS 或 AMD 模块无法通过这种方式使用。</p>
<p><strong>some-dependency.js</strong></p>
<!-- eslint-skip -->
<pre><code class="hljs language-js"><span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<!-- eslint-skip -->
<pre><code class="hljs language-js">require<span class="token punctuation">:</span> <span class="token string">'some-dependency'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="webpack">Webpack <a href="#webpack" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>除了上述模块语法之外，还允许使用一些 webpack 特定的方法：</p>
<h3 id="requirecontext"><code>require.context</code> <a href="#requirecontext" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<!-- eslint-skip -->
<pre><code class="hljs language-js">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
  directory<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  includeSubdirs<span class="token punctuation">:</span> Boolean <span class="token comment">/* 可选的，默认值是 true */</span><span class="token punctuation">,</span>
  filter<span class="token punctuation">:</span> RegExp <span class="token comment">/* 可选的，默认值是 /^\.\/.*$/，所有文件 */</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> String  <span class="token comment">/* 可选的， 'sync' | 'eager' | 'weak' | 'lazy' | 'lazy-once'，默认值是 'sync' */</span>
<span class="token punctuation">)</span></code></pre>
<p>指定一系列依赖项，通过使用 <code>directory</code> 的路径，以及 <code>includeSubdirs</code> ，<code>filter</code> 选项，进行更细粒度的模块引入，使用 <code>mode</code> 定义加载方式。以此可以很容易的解析模块：</p>
<pre><code class="hljs language-javascript"><span class="token keyword">var</span> context <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'components'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.html$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> componentA <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'componentA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>如果 <code>mode</code> 设置为 <code>lazy</code>，基础模块将以异步方式加载：</p>
<pre><code class="hljs language-javascript"><span class="token keyword">var</span> context <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'locales'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.json$/</span><span class="token punctuation">,</span> <span class="token string">'lazy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'localeA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>locale <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with locale</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>mode</code> 的可用模式及说明的完整列表在 <a href="#import-1"><code>import()</code></a> 文档中进行了描述。</p>
<h3 id="requireinclude"><code>require.include</code> <a href="#requireinclude" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<!-- eslint-skip -->
<pre><code class="hljs language-js">require<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>dependency<span class="token punctuation">:</span> String<span class="token punctuation">)</span></code></pre>
<p>引入一个不需要执行的 <code>dependency</code>，这样可以用于优化输出 chunk 中依赖模块的位置。</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>这会产生以下输出：</p>
<ul>
<li>entry chunk: <code>file.js</code> and <code>a</code></li>
<li>anonymous chunk: <code>b</code></li>
<li>anonymous chunk: <code>c</code></li>
</ul>
<p>不使用 <code>require.include('a')</code>，输出的两个匿名 chunk 都会有模块 a。</p>
<h3 id="requireresolveweak"><code>require.resolveWeak</code> <a href="#requireresolveweak" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>与 <code>require.resolve</code> 类似，但是不会把 <code>module</code> 引入到 bundle 中。这就是所谓的“弱（weak）”依赖。</p>
<pre><code class="hljs language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>__webpack_modules__<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当模块可用时，执行一些操作……</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在模块加载完成之前，执行一些操作……</span>
<span class="token punctuation">}</span>

<span class="token comment">// 你可以像执行其他 require/import 方法一样，</span>
<span class="token comment">// 执行动态解析上下文 resolves ("context")。</span>
<span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token string">'Foo'</span><span class="token punctuation">;</span>
__webpack_modules__<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./page/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<blockquote class="tip">
<p><code>require.resolveWeak</code> 是<em>通用渲染</em>（服务器端渲染 SSR + 代码分割 Code Splitting）的基础。例如在 <a href="https://github.com/faceyspacey/react-universal-component">react-universal-component</a> 等包中的用法。它允许代码在服务器端和客户端初始页面的加载上同步渲染。它要求手动或以某种方式提供 chunk。它可以在不需要指示应该被打包的情况下引入模块。它与 <code>import()</code> 一起使用，当用户导航触发额外的导入时，它会被接管。</p>
</blockquote>
<h1 id="Module-Variables">Module Variables<a href="#Module-Variables" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>本章节涵盖了使用 webpack 编译的代码中所有的 <strong>变量</strong>。模块将通过 <code>module</code> 和其他变量，来访问编译过程中的某些数据。</p>
<h3 id="moduleloaded-nodejs"><code>module.loaded</code> (NodeJS) <a href="#moduleloaded-nodejs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>false</code> 表示该模块正在执行， <code>true</code> 表示同步执行已经完成。</p>
<h3 id="modulehot-webpack-specific"><code>module.hot</code> (webpack-specific) <a href="#modulehot-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>表示 <a href="/concepts/hot-module-replacement">模块热替换(Hot Module Replacement)</a> 是否启用，并给进程提供一个接口。详细说明请查看 <a href="/api/hot-module-replacement">模块热替换 API 页面</a>。</p>
<h3 id="moduleid-commonjs"><code>module.id</code> (CommonJS) <a href="#moduleid-commonjs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>当前模块的 ID。</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>id <span class="token operator">===</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="moduleexports-commonjs"><code>module.exports</code> (CommonJS) <a href="#moduleexports-commonjs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>调用者通过 <code>require</code> 对模块进行调用时返回的值（默认为一个新对象）。</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<blockquote class="warning">
<p>无法在异步函数中访问该变量。</p>
</blockquote>
<h3 id="exports-commonjs"><code>exports</code> (CommonJS) <a href="#exports-commonjs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>该变量默认值为 <code>module.exports</code>（即一个对象）。 如果 <code>module.exports</code> 被重写的话， <code>exports</code> 不再会被导出。</p>
<pre><code class="hljs language-javascript">exports<span class="token punctuation">.</span>someValue <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>anObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token number">123</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">aFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="global-nodejs"><code>global</code> (NodeJS) <a href="#global-nodejs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>见 <a href="https://nodejs.org/api/globals.html#globals_global">node.js global</a>.</p>
<h3 id="process-nodejs"><code>process</code> (NodeJS) <a href="#process-nodejs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>见 <a href="https://nodejs.org/api/process.html">node.js process</a>.</p>
<h3 id="__dirname-nodejs"><code>__dirname</code> (NodeJS) <a href="#__dirname-nodejs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>取决于 <code>node.__dirname</code> 配置选项：</p>
<ul>
<li><code>false</code>: 未定义</li>
<li><code>mock</code>: 等同于 <code>'/'</code></li>
<li><code>true</code>: <a href="https://nodejs.org/api/globals.html#globals_dirname">node.js __dirname</a></li>
</ul>
<p>如果在一个被 Parser 解析的表达式内部使用，则配置选项会被当作 <code>true</code> 处理。</p>
<h3 id="__filename-nodejs"><code>__filename</code> (NodeJS) <a href="#__filename-nodejs" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>取决于 <code>node.__filename</code> 配置选项：</p>
<ul>
<li><code>false</code>: 未定义</li>
<li><code>mock</code>: 等同于 <code>'/index.js'</code></li>
<li><code>true</code>: <a href="https://nodejs.org/api/globals.html#globals_filename">node.js __filename</a></li>
</ul>
<p>如果在一个被 Parser 解析的表达式内部使用，则配置选项会被当作 <code>true</code> 处理。</p>
<h3 id="__resourcequery-webpack-specific"><code>__resourceQuery</code> (webpack 特有变量) <a href="#__resourcequery-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>当前模块的资源查询(resource query) 。如果进行了如下的 <code>reqiure</code> 调用，那么查询字符串(query string)在<code>file.js</code> 中可访问。</p>
<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'file.js?test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>file.js</strong></p>
<pre><code class="hljs language-javascript">__resourceQuery <span class="token operator">===</span> <span class="token string">'?test'</span><span class="token punctuation">;</span></code></pre>
<h3 id="webpack_public_path-webpack-specific"><code>__webpack_public_path__</code> (webpack 特有变量) {#<strong>webpack_public_path</strong>-webpack-specific}<a href="#webpack_public_path-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>等同于 <code>output.publicPath</code> 配置选项。</p>
<h3 id="webpack_require-webpack-specific"><code>__webpack_require__</code> (webpack 特有变量) {#<strong>webpack_require</strong>-webpack-specific}<a href="#webpack_require-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>原始 require 函数。这个表达式不会被解析器解析为依赖。</p>
<h3 id="webpack_chunk_load-webpack-specific"><code>__webpack_chunk_load__</code> (webpack 特有变量) {#<strong>webpack_chunk_load</strong>-webpack-specific}<a href="#webpack_chunk_load-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>内部 chunk 载入函数，有两个输入参数：</p>
<ul>
<li><code>chunkId</code> 需要载入的 chunk id。</li>
<li><code>callback(require)</code> chunk 载入后调用的回调函数。</li>
</ul>
<h3 id="webpack_modules-webpack-specific"><code>__webpack_modules__</code> (webpack 特有变量) {#<strong>webpack_modules</strong>-webpack-specific}<a href="#webpack_modules-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>访问所有模块的内部对象。</p>
<h3 id="webpack_hash-webpack-specific"><code>__webpack_hash__</code> (webpack 特有变量) {#<strong>webpack_hash</strong>-webpack-specific}<a href="#webpack_hash-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>这个变量只有在启用 <code>HotModuleReplacementPlugin</code> 或者 <code>ExtendedAPIPlugin</code> 时才生效。这个变量提供对编译过程中(compilation)的 hash 信息的获取。</p>
<h3 id="non_webpack_require-webpack-specific"><code>__non_webpack_require__</code> (webpack 特有变量) {#<strong>non_webpack_require</strong>-webpack-specific}<a href="#non_webpack_require-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>生成一个不会被 webpack 解析的 <code>require</code> 函数。配合全局可以获取到的 require 函数，可以完成一些酷炫操作。</p>
<h3 id="webpack_exports_info-webpack-specific"><code>__webpack_exports_info__</code> (webpack 特有变量) {#<strong>webpack_exports_info</strong>-webpack-specific}<a href="#webpack_exports_info-webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>在模块中, <code>__webpack_exports_info__</code> 可以被获取到，以便导出模块用以自我检查：</p>
<ul>
<li>
<p><code>__webpack_exports_info__</code> 总是 <code>true</code></p>
</li>
<li>
<p>当导出模块未被使用时 <code>__webpack_exports_info__.&#x3C;exportName>.used</code> 为 <code>false</code>, 否则是 <code>true</code></p>
</li>
<li>
<p><code>__webpack_exports_info__.&#x3C;exportName>.useInfo</code> 是</p>
<ul>
<li><code>false</code> 当导出模块未被使用</li>
<li><code>true</code> 当导出模块被使用</li>
<li><code>null</code> 当导出模块的使用情况取决于运行时的条件</li>
<li><code>undefined</code> 当没有可用信息时</li>
</ul>
</li>
<li>
<p><code>__webpack_exports_info__.&#x3C;exportName>.provideInfo</code> 是</p>
<ul>
<li><code>false</code> 当导出模块没有被提供</li>
<li><code>true</code> 当导出模块被提供</li>
<li><code>null</code> 当导出模块的提供情况取决于运行时的条件</li>
<li><code>undefined</code> 当没有可用信息时</li>
</ul>
</li>
<li>
<p>可以从嵌套的 exports 中得到相关信息: 例如 <code>__webpack_exports_info__.&#x3C;exportName>.&#x3C;exportName>.&#x3C;exportName>.used</code></p>
</li>
</ul>
<h3 id="debug--webpack-specific"><code>DEBUG</code>  (webpack 特有变量) <a href="#debug--webpack-specific" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>等同于 <code>debug</code> 配置选项。</p>
<h1 id="compiler-钩子">compiler 钩子<a href="#compiler-%E9%92%A9%E5%AD%90" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p><code>Compiler</code> 模块是 webpack 的主要引擎，它通过 <a href="/api/cli">CLI</a> 传递的所有选项，
或者 <a href="/api/node">Node API</a>，创建出一个 compilation 实例。
它扩展(extend)自 <code>Tapable</code> 类，用来注册和调用插件。
大多数面向用户的插件会首先在 <code>Compiler</code> 上注册。</p>
<blockquote class="tip">
<p>此模块会暴露在 <code>webpack.Compiler</code>，
可以直接通过这种方式使用。
关于更多信息，请查看 <a href="https://github.com/pksjce/webpack-internal-examples/tree/master/compiler-example">这个示例</a>。</p>
</blockquote>
<p>在为 webpack 开发插件时，你可能需要知道每个钩子函数是在哪里调用的。想要了解这些内容，请在 webpack 源码中搜索 <code>hooks.&#x3C;hook name>.call</code>。</p>
<h2 id="watching">监听(watching) <a href="#watching" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><code>Compiler</code> 支持可以监控文件系统的 <a href="/api/node/#watching">监听(watching)</a> 机制，并且在文件修改时重新编译。
当处于监听模式(watch mode)时，
compiler 会触发诸如 <code>watchRun</code>, <code>watchClose</code> 和 <code>invalid</code> 等额外的事件。
通常在 <a href="/guides/development">开发环境</a> 中使用，
也常常会在 <code>webpack-dev-server</code> 这些工具的底层调用，
由此开发人员无须每次都使用手动方式重新编译。
还可以通过 <a href="/api/cli/#watch-options">CLI</a> 进入监听模式。</p>
<h2 id="hooks">钩子 <a href="#hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>以下生命周期钩子函数，是由 <code>compiler</code> 暴露，
可以通过如下方式访问：</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>取决于不同的钩子类型，也可以在某些钩子上访问 <code>tapAsync</code> 和 <code>tapPromise</code>。</p>
<p>关于钩子类型的描述，请查看 <a href="https://github.com/webpack/tapable#tapable">Tapable 文档</a>.</p>
<h3 id="entryoption"><code>entryOption</code> <a href="#entryoption" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>在 webpack 选项中的 <a href="/configuration/entry-context/#entry"><code>entry</code></a> 被处理过之后调用。</p>
<ul>
<li>回调参数：<a href="/configuration/entry-context/#context"><code>context</code></a>, <a href="/configuration/entry-context/#entry"><code>entry</code></a></li>
</ul>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>entryOption<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> entry<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>参数：<code>context</code>, <code>entry</code></p>
<h3 id="afterplugins"><code>afterPlugins</code> <a href="#afterplugins" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在初始化内部插件集合完成设置之后调用。</p>
<ul>
<li>回调参数：<code>compiler</code></li>
</ul>
<h3 id="afterresolvers"><code>afterResolvers</code> <a href="#afterresolvers" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>resolver 设置完成之后触发。</p>
<ul>
<li>回调参数：<code>compiler</code></li>
</ul>
<h3 id="environment"><code>environment</code> <a href="#environment" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在初始化配置文件中的插件之后立即调用，在 compiler environment 准备时调用。</p>
<h3 id="afterenvironment"><code>afterEnvironment</code> <a href="#afterenvironment" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在 <code>environment</code> 钩子之后立即调用，在 compiler environment 完成设置时调用。</p>
<h3 id="beforerun"><code>beforeRun</code> <a href="#beforerun" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在 compiler.run 执行之前调用。</p>
<ul>
<li>回调参数：<code>compiler</code></li>
</ul>
<h3 id="additionalpass"><code>additionalPass</code> <a href="#additionalpass" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>This hook allows you to do a one more additional pass of the build.</p>
<h3 id="run"><code>run</code> <a href="#run" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在开始读取 <a href="/configuration/other-options/#recordspath"><code>records</code></a> 之前调用。</p>
<ul>
<li>回调参数：<code>compiler</code></li>
</ul>
<h3 id="watchrun"><code>watchRun</code> <a href="#watchrun" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在监听模式下，一个新的 compilation 触发之后，但在 compilation 实际开始之前执行。</p>
<ul>
<li>回调参数：<code>compiler</code></li>
</ul>
<h3 id="normalmodulefactory"><code>normalModuleFactory</code> <a href="#normalmodulefactory" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p><code>NormalModuleFactory</code> 创建之后调用。</p>
<ul>
<li>回调参数：<code>normalModuleFactory</code></li>
</ul>
<h3 id="contextmodulefactory"><code>contextModuleFactory</code> <a href="#contextmodulefactory" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p><code>ContextModuleFactory</code> 创建之后调用。</p>
<ul>
<li>回调参数：<code>contextModuleFactory</code></li>
</ul>
<h3 id="initialize"><code>initialize</code> <a href="#initialize" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在初始化 compiler 对象时调用。</p>
<h3 id="beforecompile"><code>beforeCompile</code> <a href="#beforecompile" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在创建 compilation parameter 之后执行。</p>
<ul>
<li>回调参数：<code>compilationParams</code></li>
</ul>
<p>初始化 <code>compilationParams</code> 变量的示例如下：</p>
<pre><code class="hljs language-js">compilationParams <span class="token operator">=</span> <span class="token punctuation">{</span>
  normalModuleFactory<span class="token punctuation">,</span>
  contextModuleFactory<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>此钩子可用于添加/修改 compilation parameter：</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>beforeCompile<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>params<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  params<span class="token punctuation">[</span><span class="token string">'MyPlugin - data'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'important stuff my plugin will use later'</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="compile"><code>compile</code> <a href="#compile" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p><code>beforeCompile</code> 之后立即调用，但在一个新的 compilation 创建之前。</p>
<ul>
<li>回调参数：<code>compilationParams</code></li>
</ul>
<h3 id="thiscompilation"><code>thisCompilation</code> <a href="#thiscompilation" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>初始化 compilation 时调用，在触发 <code>compilation</code> 事件之前调用。</p>
<ul>
<li>回调参数：<code>compilation</code>, <code>compilationParams</code></li>
</ul>
<h3 id="compilation"><code>compilation</code> <a href="#compilation" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>compilation 创建之后执行。</p>
<ul>
<li>回调参数：<code>compilation</code>, <code>compilationParams</code></li>
</ul>
<h3 id="make"><code>make</code> <a href="#make" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncParallelHook</code></p>
<p>compilation 结束之前执行。</p>
<ul>
<li>回调参数：<code>compilation</code></li>
</ul>
<h3 id="aftercompile"><code>afterCompile</code> <a href="#aftercompile" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>compilation 结束和封印之后执行。</p>
<ul>
<li>回调参数：<code>compilation</code></li>
</ul>
<h3 id="shouldemit"><code>shouldEmit</code> <a href="#shouldemit" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>在输出 asset 之前调用。返回一个布尔值，告知是否输出。</p>
<ul>
<li>回调参数：<code>compilation</code></li>
</ul>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>shouldEmit<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>compilation<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回 true 以输出 output 结果，否则返回 false</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="emit"><code>emit</code> <a href="#emit" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>输出 asset 到 output 目录之前执行。</p>
<ul>
<li>回调参数：<code>compilation</code></li>
</ul>
<h3 id="afteremit"><code>afterEmit</code> <a href="#afteremit" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>输出 asset 到 output 目录之后执行。</p>
<ul>
<li>回调参数：<code>compilation</code></li>
</ul>
<h3 id="assetemitted"><code>assetEmitted</code> <a href="#assetemitted" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在 asset 被输出时执行。此钩子可以访问被输出的 asset 的相关信息，例如它的输出路径和字节内容。</p>
<ul>
<li>回调参数：<code>file</code>, <code>info</code></li>
</ul>
<p>例如，可以通过 <code>info.content</code> 访问 asset 的内容 buffer：</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>assetEmitted<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
  <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token punctuation">{</span> content<span class="token punctuation">,</span> source<span class="token punctuation">,</span> outputPath<span class="token punctuation">,</span> compilation<span class="token punctuation">,</span> targetPath <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x3C;Buffer 66 6f 6f 62 61 72></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="done"><code>done</code> <a href="#done" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在 compilation 完成时执行。</p>
<ul>
<li>回调参数：<code>stats</code></li>
</ul>
<h3 id="failed"><code>failed</code> <a href="#failed" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在 compilation 失败时调用。</p>
<ul>
<li>回调参数：<code>error</code></li>
</ul>
<h3 id="invalid"><code>invalid</code> <a href="#invalid" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在一个观察中的 compilation 无效时执行。</p>
<ul>
<li>回调参数：<code>fileName</code>, <code>changeTime</code></li>
</ul>
<h3 id="watchclose"><code>watchClose</code> <a href="#watchclose" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在一个观察中的 compilation 停止时执行。</p>
<h3 id="infrastructurelog"><code>infrastructureLog</code> <a href="#infrastructurelog" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>在配置中启用 <a href="/configuration/other-options/#infrastructurelogging"><code>infrastructureLogging</code> 选项</a> 后，允许使用 infrastructure log(基础日志)。</p>
<ul>
<li>回调参数：<code>name</code>, <code>type</code>, <code>args</code></li>
</ul>
<h3 id="log"><code>log</code> <a href="#log" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>启用后允许记录到 <a href="/configuration/stats/">stats</a> 对象，请参阅 <a href="/configuration/stats/#stats-options"><code>stats.logging</code>, <code>stats.loggingDebug</code> 和 <code>stats.loggingTrace</code> 选项</a>。</p>
<ul>
<li>回调参数：<code>origin</code>, <code>logEntry</code></li>
</ul>
<h1 id="compilation-钩子">compilation 钩子<a href="#compilation-%E9%92%A9%E5%AD%90" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p><code>Compilation</code> 模块会被 <code>Compiler</code> 用来创建新的 compilation 对象（或新的 build 对象）。
<code>compilation</code> 实例能够访问所有的模块和它们的依赖（大部分是循环依赖）。
它会对应用程序的依赖图中所有模块，
进行字面上的编译(literal compilation)。
在编译阶段，模块会被加载(load)、封存(seal)、优化(optimize)、
分块(chunk)、哈希(hash)和重新创建(restore)。</p>
<p><code>Compilation</code> 类扩展(extend)自 <code>Tapable</code>，并提供了以下生命周期钩子。
可以按照 compiler 钩子的相同方式来调用 tap：</p>
<pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>和 <code>compiler</code> 用法相同，取决于不同的钩子类型，
所以也可以在某些钩子上访问 <code>tapAsync</code> 和 <code>tapPromise</code>。</p>
<h3 id="buildmodule"><code>buildModule</code> <a href="#buildmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在模块构建开始之前触发，可以用来修改模块。</p>
<ul>
<li>回调参数：<code>module</code></li>
</ul>
<pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>buildModule<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'SourceMapDevToolModuleOptionsPlugin'</span><span class="token punctuation">,</span>
  module <span class="token operator">=></span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>useSourceMap <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="rebuildmodule"><code>rebuildModule</code> <a href="#rebuildmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在重新构建一个模块之前触发。</p>
<ul>
<li>回调参数：<code>module</code></li>
</ul>
<h3 id="failedmodule"><code>failedModule</code> <a href="#failedmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>模块构建失败时执行。</p>
<ul>
<li>回调参数：<code>module</code> <code>error</code></li>
</ul>
<h3 id="succeedmodule"><code>succeedModule</code> <a href="#succeedmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>模块构建成功时执行。</p>
<ul>
<li>回调参数：<code>module</code></li>
</ul>
<h3 id="finishmodules"><code>finishModules</code> <a href="#finishmodules" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>所有模块都完成构建并且没有错误时执行。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="finishrebuildingmodule"><code>finishRebuildingModule</code> <a href="#finishrebuildingmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>一个模块完成重新构建时执行，在都成功或有错误的情况下。</p>
<ul>
<li>回调参数：<code>module</code></li>
</ul>
<h3 id="seal"><code>seal</code> <a href="#seal" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>compilation 对象停止接收新的模块时触发。</p>
<h3 id="unseal"><code>unseal</code> <a href="#unseal" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>compilation 对象开始接收新模块时触发。</p>
<h3 id="optimizedependencies"><code>optimizeDependencies</code> <a href="#optimizedependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>依赖优化开始时触发。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="afteroptimizedependencies"><code>afterOptimizeDependencies</code> <a href="#afteroptimizedependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>依赖优化之后触发。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="optimize"><code>optimize</code> <a href="#optimize" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>优化阶段开始时触发。</p>
<h3 id="optimizemodules"><code>optimizeModules</code> <a href="#optimizemodules" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>在模块优化阶段开始时调用。插件可以 tap 此钩子对模块进行优化。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="afteroptimizemodules"><code>afterOptimizeModules</code> <a href="#afteroptimizemodules" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在模块优化完成之后调用。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="optimizechunks"><code>optimizeChunks</code> <a href="#optimizechunks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>在 chunk 优化阶段开始时调用。插件可以 tap 此钩子对 chunk 执行优化。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<h3 id="afteroptimizechunks"><code>afterOptimizeChunks</code> <a href="#afteroptimizechunks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>chunk 优化完成之后触发。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<h3 id="optimizetree"><code>optimizeTree</code> <a href="#optimizetree" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在优化依赖树之前调用。插件可以 tap 此钩子执行依赖树优化。</p>
<ul>
<li>回调参数：<code>chunks</code> <code>modules</code></li>
</ul>
<h3 id="afteroptimizetree"><code>afterOptimizeTree</code> <a href="#afteroptimizetree" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在依赖树优化成功完成之后调用。</p>
<ul>
<li>回调参数：<code>chunks</code> <code>modules</code></li>
</ul>
<h3 id="optimizechunkmodules"><code>optimizeChunkModules</code> <a href="#optimizechunkmodules" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>在树优化之后，chunk 模块优化开始时调用。插件可以 tap 此钩子来执行 chunk 模块的优化。</p>
<ul>
<li>回调参数：<code>chunks</code> <code>modules</code></li>
</ul>
<h3 id="afteroptimizechunkmodules"><code>afterOptimizeChunkModules</code> <a href="#afteroptimizechunkmodules" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在 chunk 模块优化成功完成之后调用。</p>
<ul>
<li>回调参数：<code>chunks</code> <code>modules</code></li>
</ul>
<h3 id="shouldrecord"><code>shouldRecord</code> <a href="#shouldrecord" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>调用来决定是否存储 record。返回任何内容 <code>!== false</code> 将阻止执行所有其他 "record" 钩子（<a href="#record"><code>record</code></a>, <a href="#recordmodules"><code>recordModules</code></a>, <a href="#recordchunks"><code>recordChunks</code></a> 和 <a href="#recordhash"><code>recordHash</code></a>）。</p>
<h3 id="revivemodules"><code>reviveModules</code> <a href="#revivemodules" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>从 record 中恢复模块信息。</p>
<ul>
<li>回调参数：<code>modules</code> <code>records</code></li>
</ul>
<h3 id="beforemoduleids"><code>beforeModuleIds</code> <a href="#beforemoduleids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在为每个模块分配 <code>id</code> 之前执行。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="moduleids"><code>moduleIds</code> <a href="#moduleids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>调用来每个模块分配一个 <code>id</code>。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="optimizemoduleids"><code>optimizeModuleIds</code> <a href="#optimizemoduleids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在模块 <code>id</code> 优化开始时调用。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="afteroptimizemoduleids"><code>afterOptimizeModuleIds</code> <a href="#afteroptimizemoduleids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在模块 <code>id</code> 优化完成时调用。</p>
<ul>
<li>回调参数：<code>modules</code></li>
</ul>
<h3 id="revivechunks"><code>reviveChunks</code> <a href="#revivechunks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>从 record 中恢复 chunk 信息。</p>
<ul>
<li>回调参数：<code>chunks</code> <code>records</code></li>
</ul>
<h3 id="beforechunkids"><code>beforeChunkIds</code> <a href="#beforechunkids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在为每个 chunk 分配 <code>id</code> 之前执行。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<h3 id="optimizechunkids"><code>optimizeChunkIds</code> <a href="#optimizechunkids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在 chunk <code>id</code> 优化阶段开始时调用。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<h3 id="afteroptimizechunkids"><code>afterOptimizeChunkIds</code> <a href="#afteroptimizechunkids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>chunk <code>id</code> 优化结束之后触发。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<h3 id="recordmodules"><code>recordModules</code> <a href="#recordmodules" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>将模块信息存储到 record 中。<a href="#shouldrecord"><code>shouldRecord</code></a> 返回 truthy 值时触发。</p>
<ul>
<li>回调参数：<code>modules</code> <code>records</code></li>
</ul>
<h3 id="recordchunks"><code>recordChunks</code> <a href="#recordchunks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>将 chunk 存储到 record 中。<a href="#shouldrecord"><code>shouldRecord</code></a> 返回 truthy 值时触发。</p>
<ul>
<li>回调参数：<code>chunks</code> <code>records</code></li>
</ul>
<h3 id="beforehash"><code>beforeHash</code> <a href="#beforehash" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在 compilation 添加哈希(hash)之前。</p>
<h3 id="afterhash"><code>afterHash</code> <a href="#afterhash" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在 compilation 添加哈希(hash)之后。</p>
<h3 id="recordhash"><code>recordHash</code> <a href="#recordhash" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>将有关 record 的信息存储到 <code>records</code> 中。仅在 <a href="#shouldrecord"><code>shouldRecord</code></a> 返回 truthy 值时触发。</p>
<ul>
<li>回调参数：<code>records</code></li>
</ul>
<h3 id="record"><code>record</code> <a href="#record" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>将 <code>compilation</code> 相关信息存储到 <code>record</code> 中。仅在 <a href="#shouldrecord"><code>shouldRecord</code></a> 返回 truthy 值时触发。</p>
<ul>
<li>回调参数：<code>compilation</code> <code>records</code></li>
</ul>
<h3 id="beforemoduleassets"><code>beforeModuleAssets</code> <a href="#beforemoduleassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在创建模块 asset 之前执行。</p>
<h3 id="additionalchunkassets"><code>additionalChunkAssets</code> <a href="#additionalchunkassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<blockquote class="warning">
<p><code>additionalChunkAssets</code> 已弃用（可使用 <a href="#processassets">Compilation.hook.processAssets</a> 来代替，并且可使用 Compilation.PROCESS<em>ASSETS_STAGE</em>* 作为其选项参数。）</p>
</blockquote>
<p>为这些 chunk 创建其他 asset。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<h3 id="shouldgeneratechunkassets"><code>shouldGenerateChunkAssets</code> <a href="#shouldgeneratechunkassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>调用以确定是否生成 chunk asset。返回任何 <code>!== false</code> 将允许生成 chunk asset。</p>
<h3 id="beforechunkassets"><code>beforeChunkAssets</code> <a href="#beforechunkassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>在创建 chunk asset 之前。</p>
<h3 id="additionalassets"><code>additionalAssets</code> <a href="#additionalassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>为 compilation 创建额外 asset。
这个钩子可以用来下载图像，例如：</p>
<pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>additionalAssets<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> callback <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">download</span><span class="token punctuation">(</span><span class="token string">'https://img.shields.io/npm/v/webpack.svg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span><span class="token string">'webpack-version.svg'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">toAsset</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'[webpack-example-plugin] Unable to download the image'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="optimizechunkassets"><code>optimizeChunkAssets</code> <a href="#optimizechunkassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<blockquote class="warning">
<p><code>optimizeChunkAssets</code> 已弃用。（可使用 <a href="#processassets">Compilation.hook.processAssets</a> 来代替，并且可使用 Compilation.PROCESS<em>ASSETS_STAGE</em>* 作为其选项参数。</p>
</blockquote>
<p>优化所有 chunk asset。asset 存储在 <code>compilation.assets</code> 中。
每个 <code>Chunk</code> 都具有一个 <code>files</code> 属性，其指向由一个 chunk 创建的所有文件。
任何额外 chunk asset 都存储在 <code>compilation.additionalChunkAssets</code> 中。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<p>Here's an example that simply adds a banner to each chunk.</p>
<pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks
  <span class="token punctuation">.</span>optimizeChunkAssets
  <span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>chunks<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>chunk <span class="token operator">=></span> <span class="token punctuation">{</span>
      chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>file <span class="token operator">=></span> <span class="token punctuation">{</span>
        compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>file<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcatSource</span><span class="token punctuation">(</span>
          <span class="token string">'\/**Sweet Banner**\/'</span><span class="token punctuation">,</span>
          <span class="token string">'\n'</span><span class="token punctuation">,</span>
          compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>file<span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="afteroptimizechunkassets"><code>afterOptimizeChunkAssets</code> <a href="#afteroptimizechunkassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<blockquote class="warning">
<p><code>afterOptimizeChunkAssets</code> 已弃用。（可使用 <a href="#processassets">Compilation.hook.processAssets</a> 来代替，并且可使用 Compilation.PROCESS<em>ASSETS_STAGE</em>* 作为其选项参数。</p>
</blockquote>
<p>chunk asset 已经被优化。</p>
<ul>
<li>回调参数：<code>chunks</code></li>
</ul>
<p>这里是一个来自 <a href="https://github.com/boopathi">@boopathi</a> 的示例插件，详细地输出每个 chunk 里有什么。</p>
<pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterOptimizeChunkAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> chunks <span class="token operator">=></span> <span class="token punctuation">{</span>
  chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>chunk <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> chunk<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> chunk<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      includes<span class="token punctuation">:</span> chunk<span class="token punctuation">.</span><span class="token function">getModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>module <span class="token operator">=></span> module<span class="token punctuation">.</span>request<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="optimizeassets"><code>optimizeAssets</code> <a href="#optimizeassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>优化存储在 <code>compilation.assets</code> 中的所有 asset。</p>
<ul>
<li>回调参数：<code>assets</code></li>
</ul>
<h3 id="afteroptimizeassets"><code>afterOptimizeAssets</code> <a href="#afteroptimizeassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>asset 已经优化。</p>
<ul>
<li>回调参数：<code>assets</code></li>
</ul>
<h3 id="processassets"><code>processAssets</code> <a href="#processassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>Asset processing.</p>
<ul>
<li>Callback Parameters: <code>assets</code></li>
</ul>
<p>Here's an example:</p>
<pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>processAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
    stage<span class="token punctuation">:</span> Compilation<span class="token punctuation">.</span><span class="token constant">PROCESS_ASSETS_STAGE_ADDITIONS</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>assets<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// code here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>There're many stages to use:</p>
<ul>
<li><code>PROCESS_ASSETS_STAGE_ADDITIONAL</code> - Add additional assets to the compilation.</li>
<li><code>PROCESS_ASSETS_STAGE_PRE_PROCESS</code> - Basic preprocessing of the assets.</li>
<li><code>PROCESS_ASSETS_STAGE_DERIVED</code> - Derive new assets from the existing assets.</li>
<li><code>PROCESS_ASSETS_STAGE_ADDITIONS</code> - Add additional sections to the existing assets e.g. banner or initialization code.</li>
<li><code>PROCESS_ASSETS_STAGE_OPTIMIZE</code> - Optimize existing assets in a general way.</li>
<li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_COUNT</code> - Optimize the count of existing assets, e.g. by merging them.</li>
<li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_COMPATIBILITY</code> - Optimize the compatibility of existing assets, e.g. add polyfills or vendor prefixes.</li>
<li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE</code> - Optimize the size of existing assets, e.g. by minimizing or omitting whitespace.</li>
<li><code>PROCESS_ASSETS_STAGE_SUMMARIZE</code> - Summarize the list of existing assets.</li>
<li><code>PROCESS_ASSETS_STAGE_DEV_TOOLING</code> - Add development tooling to the assets, e.g. by extracting a source map.</li>
<li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_TRANSFER</code> - Optimize the transfer of existing assets, e.g. by preparing a compressed (gzip) file as separate asset.</li>
<li><code>PROCESS_ASSETS_STAGE_ANALYSE</code> - Analyze the existing assets.</li>
<li><code>PROCESS_ASSETS_STAGE_REPORT</code> - Creating assets for the reporting purposes.</li>
</ul>
<h3 id="afterprocessassets"><code>afterProcessAssets</code> <a href="#afterprocessassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>Called after the <a href="#processassets"><code>processAssets</code></a> hook had finished without error.</p>
<h3 id="needadditionalseal"><code>needAdditionalSeal</code> <a href="#needadditionalseal" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>调用来决定 compilation 是否需要解除 seal 以引入其他文件。</p>
<h3 id="afterseal"><code>afterSeal</code> <a href="#afterseal" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>AsyncSeriesHook</code></p>
<p>在 <code>needAdditionalSeal</code> 之后立即执行。</p>
<h3 id="chunkhash"><code>chunkHash</code> <a href="#chunkhash" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>触发来为每个 chunk 生成 hash。</p>
<ul>
<li>回调参数：<code>chunk</code> <code>chunkHash</code></li>
</ul>
<h3 id="moduleasset"><code>moduleAsset</code> <a href="#moduleasset" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>一个模块中的一个 asset 被添加到 compilation 时调用。</p>
<ul>
<li>回调参数：<code>module</code> <code>filename</code></li>
</ul>
<h3 id="chunkasset"><code>chunkAsset</code> <a href="#chunkasset" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>一个 chunk 中的一个 asset 被添加到 compilation 时调用。</p>
<ul>
<li>回调参数：<code>chunk</code> <code>filename</code></li>
</ul>
<h3 id="assetpath"><code>assetPath</code> <a href="#assetpath" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncWaterfallHook</code></p>
<p>调用以决定 asset 的路径。</p>
<ul>
<li>回调参数：<code>path</code> <code>options</code></li>
</ul>
<h3 id="needadditionalpass"><code>needAdditionalPass</code> <a href="#needadditionalpass" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>调用以决定 asset 在输出后是否需要进一步处理。</p>
<h3 id="childcompiler"><code>childCompiler</code> <a href="#childcompiler" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncHook</code></p>
<p>子 compiler 设置之后执行。</p>
<ul>
<li>回调参数：<code>childCompiler</code> <code>compilerName</code> <code>compilerIndex</code></li>
</ul>
<h3 id="normalmoduleloader"><code>normalModuleLoader</code> <a href="#normalmoduleloader" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>从 webpack v5 开始，<code>normalModuleLoader</code> 钩子已经删除。现在要访问loader 请改用 <code>NormalModule.getCompilationHooks(compilation).loader</code>。</p>
<h1 id="JavascriptParser-Hooks">JavascriptParser Hooks<a href="#JavascriptParser-Hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p><code>parser</code> 实例，在 <code>compiler</code> 中被发现，是用来解析由 webpack
处理过的每个模块。<code>parser</code> 也是扩展自 <code>tapable</code> 的 webpack 类
并且提供多种 <code>tapable</code> 钩子，</p>
<p>以下示例中，<code>parser</code> 位于 <a href="/api/compiler-hooks/#normalmodulefactory">module factories</a> 中，因此需要调用额外钩子
来进行获取：</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>normalModuleFactory<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> factory <span class="token operator">=></span> <span class="token punctuation">{</span>
  factory<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>parser<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'javascript/auto'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>parser<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>和 <code>compiler</code> 用法相同，取决于不同的钩子类型，
也可以在某些钩子上访问 <code>tapAsync</code> 和 <code>tapPromise</code>。</p>
<h2 id="hooks">钩子 <a href="#hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>以下生命周期钩子函数，是由 <code>parser</code> 暴露，可以通过
如下方式访问：</p>
<h3 id="evaluatetypeof">evaluateTypeof <a href="#evaluatetypeof" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Triggered when evaluating an expression consisting in a <code>typeof</code> of a free variable</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>evaluateTypeof<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'myIdentifier'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> expressionResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>这会触发 <code>evaluateTypeof</code> 钩子的调用：</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">typeof</span> myIdentifier<span class="token punctuation">;</span></code></pre>
<p>This won't trigger:</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> myIdentifier <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">typeof</span> myIdentifier<span class="token punctuation">;</span></code></pre>
<h3 id="evaluate">evaluate <a href="#evaluate" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when evaluating an expression.</p>
<ul>
<li>Hook parameters: <code>expressionType</code></li>
<li>Callback parameters: <code>expression</code></li>
</ul>
<p>For example:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>MyPlugin.js</strong></p>
<pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>evaluate<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'NewExpression'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> expressionResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Where the expressions types are:</p>
<ul>
<li><code>'ArrowFunctionExpression'</code></li>
<li><code>'AssignmentExpression'</code></li>
<li><code>'AwaitExpression'</code></li>
<li><code>'BinaryExpression'</code></li>
<li><code>'CallExpression'</code></li>
<li><code>'ClassExpression'</code></li>
<li><code>'ConditionalExpression'</code></li>
<li><code>'FunctionExpression'</code></li>
<li><code>'Identifier'</code></li>
<li><code>'LogicalExpression'</code></li>
<li><code>'MemberExpression'</code></li>
<li><code>'NewExpression'</code></li>
<li><code>'ObjectExpression'</code></li>
<li><code>'SequenceExpression'</code></li>
<li><code>'SpreadElement'</code></li>
<li><code>'TaggedTemplateExpression'</code></li>
<li><code>'TemplateLiteral'</code></li>
<li><code>'ThisExpression'</code></li>
<li><code>'UnaryExpression'</code></li>
<li><code>'UpdateExpression'</code></li>
</ul>
<h3 id="evaluateidentifier">evaluateIdentifier <a href="#evaluateidentifier" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when evaluating an identifier that is a free variable.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<h3 id="evaluatedefinedidentifier">evaluateDefinedIdentifier <a href="#evaluatedefinedidentifier" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when evaluating an identifier that is a defined variable.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<h3 id="evaluatecallexpressionmember">evaluateCallExpressionMember <a href="#evaluatecallexpressionmember" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when evaluating a call to a member function of a successfully evaluated expression.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code> <code>param</code></li>
</ul>
<p>This expression will trigger the hook:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> expression<span class="token punctuation">.</span><span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>MyPlugin.js</strong></p>
<pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>evaluateCallExpressionMember<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'myFunc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>expression<span class="token punctuation">,</span> param<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> expressionResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="statement">statement <a href="#statement" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>General purpose hook that is called for every parsed statement in a code fragment.</p>
<ul>
<li>Callback Parameters: <code>statement</code></li>
</ul>
<pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>statement<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> statement <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Where the <code>statement.type</code> could be:</p>
<ul>
<li><code>'BlockStatement'</code></li>
<li><code>'VariableDeclaration'</code></li>
<li><code>'FunctionDeclaration'</code></li>
<li><code>'ReturnStatement'</code></li>
<li><code>'ClassDeclaration'</code></li>
<li><code>'ExpressionStatement'</code></li>
<li><code>'ImportDeclaration'</code></li>
<li><code>'ExportAllDeclaration'</code></li>
<li><code>'ExportDefaultDeclaration'</code></li>
<li><code>'ExportNamedDeclaration'</code></li>
<li><code>'IfStatement'</code></li>
<li><code>'SwitchStatement'</code></li>
<li><code>'ForInStatement'</code></li>
<li><code>'ForOfStatement'</code></li>
<li><code>'ForStatement'</code></li>
<li><code>'WhileStatement'</code></li>
<li><code>'DoWhileStatement'</code></li>
<li><code>'ThrowStatement'</code></li>
<li><code>'TryStatement'</code></li>
<li><code>'LabeledStatement'</code></li>
<li><code>'WithStatement'</code></li>
</ul>
<h3 id="statementif">statementIf <a href="#statementif" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing an if statement. Same as the <code>statement</code> hook, but triggered only when <code>statement.type == 'IfStatement'</code>.</p>
<ul>
<li>Callback Parameters: <code>statement</code></li>
</ul>
<h3 id="label">label <a href="#label" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing statements with a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label">label</a>. Those statements have <code>statement.type === 'LabeledStatement'</code>.</p>
<ul>
<li>Hook Parameters: <code>labelName</code></li>
<li>Callback Parameters: <code>statement</code></li>
</ul>
<h3 id="import">import <a href="#import" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every import statement in a code fragment. The <code>source</code> parameter contains the name of the imported file.</p>
<ul>
<li>Callback Parameters: <code>statement</code> <code>source</code></li>
</ul>
<p>The following import statement will trigger the hook once:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span></code></pre>
<p><strong>MyPlugin.js</strong></p>
<pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token keyword">import</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>statement<span class="token punctuation">,</span> source<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// source == 'lodash'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="importspecifier">importSpecifier <a href="#importspecifier" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every specifier of every <code>import</code> statement.</p>
<ul>
<li>Callback Parameters: <code>statement</code> <code>source</code> <code>exportName</code> <code>identifierName</code></li>
</ul>
<p>The following import statement will trigger the hook twice:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> _<span class="token punctuation">,</span> <span class="token punctuation">{</span> has <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span></code></pre>
<p><strong>MyPlugin.js</strong></p>
<pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>importSpecifier<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>statement<span class="token punctuation">,</span> source<span class="token punctuation">,</span> exportName<span class="token punctuation">,</span> identifierName<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* First call
    source == 'lodash'
    exportName == 'default'
    identifierName == '_'
  */</span>
  <span class="token comment">/* Second call
    source == 'lodash'
    exportName == 'has'
    identifierName == 'has'
  */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="export">export <a href="#export" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every <code>export</code> statement in a code fragment.</p>
<ul>
<li>Callback Parameters: <code>statement</code></li>
</ul>
<h3 id="exportimport">exportImport <a href="#exportimport" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every <code>export</code>-import statement eg: <code>export * from 'otherModule';</code>.</p>
<ul>
<li>Callback Parameters: <code>statement</code> <code>source</code></li>
</ul>
<h3 id="exportdeclaration">exportDeclaration <a href="#exportdeclaration" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every <code>export</code> statement exporting a declaration.</p>
<ul>
<li>Callback Parameters: <code>statement</code> <code>declaration</code></li>
</ul>
<p>Those exports will trigger this hook:</p>
<pre><code class="hljs language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> myVar <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span> <span class="token comment">// also var, let</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">FunctionName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ClassName</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
<h3 id="exportexpression">exportExpression <a href="#exportexpression" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every <code>export</code> statement exporting an expression e.g.<code>export default expression;</code>.</p>
<ul>
<li>Callback Parameters: <code>statement</code> <code>declaration</code></li>
</ul>
<h3 id="exportspecifier">exportSpecifier <a href="#exportspecifier" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every specifier of every <code>export</code> statement.</p>
<ul>
<li>Callback Parameters: <code>statement</code> <code>identifierName</code> <code>exportName</code> <code>index</code></li>
</ul>
<h3 id="exportimportspecifier">exportImportSpecifier <a href="#exportimportspecifier" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called for every specifier of every <code>export</code>-import statement.</p>
<ul>
<li>Callback Parameters: <code>statement</code> <code>source</code> <code>identifierName</code> <code>exportName</code> <code>index</code></li>
</ul>
<h3 id="vardeclaration">varDeclaration <a href="#vardeclaration" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing a variable declaration.</p>
<ul>
<li>Callback Parameters: <code>declaration</code></li>
</ul>
<h3 id="vardeclarationlet">varDeclarationLet <a href="#vardeclarationlet" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing a variable declaration defined using <code>let</code></p>
<ul>
<li>Callback Parameters: <code>declaration</code></li>
</ul>
<h3 id="vardeclarationconst">varDeclarationConst <a href="#vardeclarationconst" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing a variable declaration defined using <code>const</code></p>
<ul>
<li>Callback Parameters: <code>declaration</code></li>
</ul>
<h3 id="vardeclarationvar">varDeclarationVar <a href="#vardeclarationvar" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing a variable declaration defined using <code>var</code></p>
<ul>
<li>Callback Parameters: <code>declaration</code></li>
</ul>
<h3 id="canrename">canRename <a href="#canrename" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Triggered before renaming an identifier to determine if the renaming is allowed. This is usually used together with the <code>rename</code> hook.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>canRename<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// returning true allows renaming</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="rename">rename <a href="#rename" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Triggered when renaming to get the new identifier. This hook will be called only if <code>canRename</code> returns <code>true</code>.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>rename<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="assigned">assigned <a href="#assigned" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing an <code>AssignmentExpression</code> before parsing the assigned expression.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js">a <span class="token operator">+=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>assigned<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// this is called before parsing b</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="assign">assign <a href="#assign" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing an <code>AssignmentExpression</code> before parsing the assign expression.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js">a <span class="token operator">+=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>assigned<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// this is called before parsing a</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="typeof">typeof <a href="#typeof" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Triggered when parsing the <code>typeof</code> of an identifier</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<h3 id="call">call <a href="#call" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing a function call.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js"><span class="token function">eval</span><span class="token punctuation">(</span><span class="token comment">/* something */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>call<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="callanymember">callAnyMember <a href="#callanymember" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Triggered when parsing a call to a member function of an object.</p>
<ul>
<li>Hook Parameters: <code>objectIdentifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js">myObj<span class="token punctuation">.</span><span class="token function">anyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>callAnyMember<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'myObj'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="new">new <a href="#new" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Invoked when parsing a <code>new</code> expression.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'MyClass'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="expression">expression <a href="#expression" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing an expression.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'this'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="expressionanymember">expressionAnyMember <a href="#expressionanymember" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Executed when parsing a <code>MemberExpression</code>.</p>
<ul>
<li>Hook Parameters: <code>identifier</code></li>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'process'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> expression <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="expressionconditionaloperator">expressionConditionalOperator <a href="#expressionconditionaloperator" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Called when parsing a <code>ConditionalExpression</code> e.g. <code>condition ? a : b</code></p>
<ul>
<li>Callback Parameters: <code>expression</code></li>
</ul>
<h3 id="program">program <a href="#program" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>SyncBailHook</code></p>
<p>Get access to the abstract syntax tree (AST) of a code fragment</p>
<p>Parameters: <code>ast</code> <code>comments</code></p>
<h1 id="Plugin-API">Plugin API<a href="#Plugin-API" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>插件是 webpack 生态的关键部分，
它为社区用户提供了一种强有力的方式来直接触及 webpack 的编译过程(compilation process)。
插件能够 <a href="/api/compiler-hooks/#hooks">hook</a> 到每一个编译(compilation)中发出的关键事件中。
在编译的每个阶段中，插件都拥有对 <code>compiler</code> 对象的完全访问能力，
并且在合适的时机，还可以访问当前的 <code>compilation</code> 对象。</p>
<blockquote class="tip">
<p>关于编写插件的高级介绍，请移步：
<a href="/contribute/writing-a-plugin">自定义插件</a>。</p>
</blockquote>
<p>让我们首先从 tapable 工具开始，
它为 webpack 插件接口提供了核心能力的。</p>
<h2 id="tapable">Tapable <a href="#tapable" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>这个小型库是 webpack 的一个核心工具，但也可用于其他地方，
以提供类似的插件接口。
在 webpack 中的许多对象都扩展自 <code>Tapable</code> 类。
它对外暴露了 <code>tap</code>，<code>tapAsync</code> 和 <code>tapPromise</code> 等方法，
插件可以使用这些方法向 webpack 中注入自定义构建的步骤，这些步骤将在构建过程中触发。</p>
<p>请查阅<a href="https://github.com/webpack/tapable">文档</a>了解更多知识。
理解上面的的三种 <code>tap</code> 方法，
以及提供这些方法的钩子(hooks)对于编写插件来说是至关重要的。
那些扩展自 <code>Tapable</code> 的对象（例如：compiler），
以及其提供的钩子(hooks)和每个钩子的类型（例如：<code>同步钩子(SyncHook)</code>）值得关注。</p>
<h2 id="plugin-types">插件类型 <a href="#plugin-types" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>根据使用不同的钩子(hooks)和 <code>tap</code> 方法，
插件可以以多种不同的方式运行。
这个工作方式与 Tapable 提供的<a href="https://github.com/webpack/tapable#tapable">钩子(hooks)</a>密切相关。
<a href="/api/compiler-hooks/#hooks">compiler hooks</a> 分别记录了 Tapable 内在的钩子，
并指出哪些 tap 方法可用。</p>
<p>所以，依赖于使用的 <code>tap</code> 方法的不同，
插件可能会以不同的方式运行。
例如：当你钩入到 <code>编译(compile)</code> 阶段时，只有同步的 <code>tap</code> 方法可以使用。</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compile<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> params <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以同步方式触及 compile 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>然而，对于可以使用 <code>AsyncHook</code> 的 <code>run</code> 阶段，
则需使用 <code>tapAsync</code> 或 <code>tapPromise</code>（以及 <code>tap</code>）方法。</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以异步方式触及 run 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以具有延迟的异步方式触及 run 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以具有延迟的异步方式触及 run 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>这些需求(story)的含义在于，
我们可以有多种方式 hook 到 compiler 中，可以让各种插件都以合适的方式去运行。</p>
<h2 id="custom-hooks">自定义钩子 <a href="#custom-hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>为了便于其他插件的编译过程中可以 <code>tap</code> 到，则需要创建一个新的 hook，
我们只需要简单的从 <code>tapable</code> 中 <code>require</code> 所需的 hook 类，并创建：</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> SyncHook <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tapable'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SyncHook<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'已存在该钩子'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在你想要触发钩子的位置/时机下调用……</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>再次声明，
查看 <code>tapable</code> <a href="https://github.com/webpack/tapable">文档</a> 来了解更多不同的钩子类(hook class)，以及它们是如何工作的。</p>
<h2 id="reporting-progress">进度报告 <a href="#reporting-progress" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>插件能够通过 <a href="/plugins/progress-plugin/"><code>ProgressPlugin</code></a> 这个在默认情况下将信息打印到标准错误输出(stderr)的插件来进行进度报告。如果想要使用这个功能，只需要在使用 <a href="/api/cli/">webpack CLI</a> 的时候传入 <code>--progress</code> 参数。</p>
<p>如果想要自定义打印输出，只需要传递不同的参数到 <a href="/plugins/progress-plugin/"><code>ProgressPlugin</code></a> 的 <code>reportProgress</code> 方法。</p>
<p>如果想要报告进度，插件必须在 <code>tap</code> 到 hook 的时候使用 <code>context: true</code> 选项。</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
  context<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> compiler<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reportProgress <span class="token operator">=</span> context <span class="token operator">&#x26;&#x26;</span> context<span class="token punctuation">.</span>reportProgress<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>reportProgress<span class="token punctuation">)</span> <span class="token function">reportProgress</span><span class="token punctuation">(</span><span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token string">'Starting work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reportProgress<span class="token punctuation">)</span> <span class="token function">reportProgress</span><span class="token punctuation">(</span><span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token string">'Done work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>reportProgress</code> 方法在被调用的时候会传入以下的参数：</p>
<pre><code class="hljs language-js"><span class="token function">reportProgress</span><span class="token punctuation">(</span>percentage<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><code>percentage</code>：此参数未使用。作为代替，<a href="/plugins/progress-plugin/"><code>ProgressPlugin</code></a> 插件会基于当前的钩子(hook)计算进度。</li>
<li><code>...args</code>：任意数量的字符串，这些字符串会传递给 <code>ProgressPlugin</code> 插件并报告给用户。</li>
</ul>
<p>注意：只有 compiler 和 compilation 钩子的子集才支持 <code>reportProgress</code> 方法。请查看 <a href="/plugins/progress-plugin/#supported-hooks"><code>ProgressPlugin</code></a> 了解更多信息。</p>
<h2 id="logging">日志 <a href="#logging" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>日志的 API 在 webpack 4.37 版本后提供支持。当 <code>logging</code> 在 <a href="/configuration/stats/#statslogging"><code>统计配置(stats configuration)</code></a>中可用和(或)当 <a href="/configuration/other-options/#infrastructurelogging"><code>infrastructure logging</code></a> 可用的时候，插件会通过各自的记录格式(stats，infrastructure)打印信息。</p>
<ul>
<li>插件可以使用 <code>compilation.getLogger('PluginName')</code> 来做记录。这种形式的记录保存在统计数据(Stats)中并做相应的格式化。它能够被用户过滤和导出。</li>
<li>插件也可以使用 <code>compilation.getInfrastructureLogger('PluginName')</code> 来做记录。使用 <code>infrastructure</code> 的形式并不会被保存在统计数据(Stats)中，因此也不会被格式化。它通常直接将记录载入到 console/dashboard/GUI 中。它能够被用户过滤。</li>
<li>插件也可以使用特殊的降级逻辑 <code>compilation.getLogger ? compilation.getLogger('PluginName') : console</code> 来检测是否支持记录，以此来在不支持 <code>compilation.getLogger</code> 方法的旧版本 webpack 中提供降级方法。</li>
</ul>
<h2 id="next-steps">下一步 <a href="#next-steps" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>查看 <a href="/api/compiler-hooks/">compiler hooks</a> 部分，
了解所有可用的 <code>compiler</code> 钩子以及它们提供的参数的详细列表。</p>
<h1 id="解析器（Resolvers）">解析器（Resolvers）<a href="#%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%88Resolvers%EF%BC%89" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>解析器是使用 <code>enhanced-resolve</code> 库创建的。<code>Resolver</code> 类
拓展了 <code>tapable</code> 类，并使用 <code>tapable</code> 来提供了一些钩子。
<code>enhanced-resolve</code> 可以直接用于创建新的解析器，
但是，任何 <a href="/api/node/#compiler-instance"><code>compiler</code> 实例</a> 都有一些解析器实例，可以
被 <code>tap</code> 进去。</p>
<p>在继续阅读之前，请确保你已经读过
<a href="https://github.com/webpack/enhanced-resolve"><code>enhanced-resolve</code></a> 和 <a href="/api/plugins/#tapable"><code>tapable</code></a> 文档。</p>
<h2 id="types">类型 <a href="#types" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>在 <code>compiler</code> 类中，提供了三种类型的内置解析器：</p>
<ul>
<li><code>normal</code>: 通过绝对或相对路径解析模块。</li>
<li><code>context</code>: 在给定的上下文中解析模块。</li>
<li><code>loader</code>: 解析 webpack <a href="/loaders">loader</a>。</li>
</ul>
<p>根据需要，任一个被使用在 <code>compiler</code> 中的内置解析器，
可以通过插件进行定制：</p>
<pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>resolverFactory<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'resolver [type]'</span><span class="token punctuation">,</span> resolver <span class="token operator">=></span> <span class="token punctuation">{</span>
  resolver<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> params <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>其中，<code>[type]</code> 是上述三个解析器之一。</p>
<p>请参阅 <a href="https://github.com/webpack/enhanced-resolve"><code>enhanced-resolve</code> documentation</a> 以获得钩子的完整列表以及它们的
介绍。</p>
<h2 id="configuration-options">配置选项 <a href="#configuration-options" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>上述解析器也可以
利用 <a href="/configuration/resolve/"><code>resolve</code></a> or <a href="/configuration/resolve/#resolveloader"><code>resolveLoader</code></a> 选项，通过配置文件进行定制。这些选项允许
用户可以通过多种选项来更改解析行为，包括
通过解析 <code>plugins</code>。</p>
<p>解析器插件，例如：<a href="https://github.com/shaketbaby/directory-named-webpack-plugin"><code>DirectoryNamedPlugin</code></a>，可以直接引入
在 <code>resolve.plugins</code>，而不是直接在 <a href="/configuration/plugins/#plugins"><code>plugins</code> configuration option</a> 中使用。</p>
<blockquote class="tip">
<p>请注意，<code>resolve</code> 配置会影响 <code>normal</code> 解析器和 <code>context</code> 解析器，而“ <code>resolveLoader</code> 用于修改 <code>loader</code> 解析器。</p>
</blockquote>
<h1 id="Compilation-Object">Compilation Object<a href="#Compilation-Object" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>Compilation 对象有很多可用的方法和钩子。在此页面，我们将会列举出这些可用的方法和属性。</p>
<h2 id="compilation-object-methods">compilation 对象方法 <a href="#compilation-object-methods" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<h3 id="getstats">getStats <a href="#getstats" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<p>返回当前编译的状态对象。</p>
<h3 id="addmodule">addModule <a href="#addmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, cacheGroup)</code></p>
<p>向当前编译添加一个模块。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要添加的模块</li>
<li><code>cacheGroup</code> - 模块的 <code>cacheGroup</code></li>
</ul>
<h3 id="getmodule">getModule <a href="#getmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module)</code></p>
<p>通过编译的标识符获取其模块。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要获取的模块。标识符是通过编译使用 <code>module.identifier()</code> 方法从模块中提取的。</li>
</ul>
<h3 id="findmodule">findModule <a href="#findmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module)</code></p>
<p>尝试通过其标识符搜索模块。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要搜索的模块。标识符是通过编译使用 <code>module.identifier()</code> 方法从模块中提取的。</li>
</ul>
<h3 id="waitforbuildingfinished">waitForBuildingFinished <a href="#waitforbuildingfinished" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, callback)</code></p>
<p>在构建给定模块时运行给定的 <code>callback</code> 函数。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 有问题的模块。</li>
<li><code>callback</code> - 要调用的函数。</li>
</ul>
<h3 id="buildmodule">buildModule <a href="#buildmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, optional, origin, dependencies)</code></p>
<p>构建给定的模块。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要构建的模块。</li>
<li><code>optional</code> - 可选标志。</li>
<li><code>origin</code> - 请求此模块构建的原始模块。</li>
<li><code>dependencies</code> - 要构建模块的可选依赖。</li>
</ul>
<h3 id="processmoduledependencies">processModuleDependencies <a href="#processmoduledependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, callback)</code></p>
<p>处理给定模块依赖。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要被处理依赖的模块。</li>
<li><code>callback</code> - 模块依赖处理完成时回调的函数。</li>
</ul>
<h3 id="addmoduledependencies">addModuleDependencies <a href="#addmoduledependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, dependencies, bail, cacheGroup, recursive, callback)</code></p>
<p>向模块添加依赖。处理依赖之后被 <code>processModuleDependencies</code> 自动调用。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要添加依赖的模块。</li>
<li><code>dependencies</code> - 要遍历添加到模块的一组已排序依赖。</li>
<li><code>bail</code> - 发生错误时是否中断进程并抛出 error。</li>
<li><code>cacheGroup</code> - 模块的 <code>cacheGroup</code>。</li>
<li><code>recursive</code> - 是否要递归遍历。</li>
<li><code>callback</code> - 添加模块依赖之后回调的函数。</li>
</ul>
<h3 id="addentry">addEntry <a href="#addentry" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (context, entry, name, callback)</code></p>
<p>为编译添加入口。</p>
<p>参数：</p>
<ul>
<li><code>context</code> - 入口的上下文路径。</li>
<li><code>entry</code> - 入口依赖。</li>
<li><code>name</code> - 入口名称。</li>
<li><code>callback</code> - 添加入口完成之后回调的函数。</li>
</ul>
<h3 id="prefetch">prefetch <a href="#prefetch" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (context, dependency, callback)</code></p>
<p>根据给定的依赖创建一个模块。</p>
<p>参数：</p>
<ul>
<li><code>context</code> - 上下文路径。</li>
<li><code>dependency</code> - 被用来创建模块的依赖。</li>
<li><code>callback</code> - 向上一级发送模块的模块回调。</li>
</ul>
<h3 id="rebuildmodule">rebuildModule <a href="#rebuildmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, thisCallback)</code></p>
<p>触发模块的重建。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要被重建的模块。</li>
<li><code>thisCallback</code> - 模块重建完成之后调用的函数。</li>
</ul>
<h3 id="finish">finish <a href="#finish" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (callback)</code></p>
<p>完成编译并调用给定的回调。</p>
<p>参数：</p>
<ul>
<li><code>callback</code> - 编译完成之后调用的函数。</li>
</ul>
<h3 id="seal">seal <a href="#seal" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (callback)</code></p>
<p>封闭编译。</p>
<p>参数：</p>
<ul>
<li><code>callback</code> - 封闭编译时回调的函数。</li>
</ul>
<h3 id="unseal">unseal <a href="#unseal" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<p>解除封闭编译。</p>
<p>参数：</p>
<ul>
<li><code>callback</code> - 解除封闭编译时回调的函数。</li>
</ul>
<h3 id="reportdependencyerrorsandwarnings">reportDependencyErrorsAndWarnings <a href="#reportdependencyerrorsandwarnings" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, blocks)</code></p>
<p>将给定模块的错误和警告添加到编译的错误和警告中。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要被报告错误与警告的模块。</li>
<li><code>blocks</code> - 一组要报告的依赖块。</li>
</ul>
<h3 id="addchunkingroup">addChunkInGroup <a href="#addchunkingroup" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (groupOptions, module, loc, request)</code></p>
<p>将模块添加到现有 chunk 组或创建一个新的组。返回一个 <code>chunkGroup</code>。</p>
<p>参数：</p>
<ul>
<li><code>groupOptions</code> - chunk  组的选项。</li>
<li><code>module</code> - 引用 chunk 组的模块。</li>
<li><code>loc</code> - 引用 chunk 组的位置（模块内部）。</li>
<li><code>request</code> - 引用 chunk 组的请求。</li>
</ul>
<h3 id="addchunk">addChunk <a href="#addchunk" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (name)</code></p>
<p>向 <code>compilation.chunks</code> 创建或添加一个新的 chunk。返回这个 <code>chunk</code>.</p>
<p>参数：</p>
<ul>
<li><code>name</code> - chunk 的名称。</li>
</ul>
<h3 id="assigndepth">assignDepth <a href="#assigndepth" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module)</code></p>
<p>为给定的模块及其依赖块递归分配 <code>depth</code> 。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要被分配 depth 的模块。</li>
</ul>
<h3 id="getdependencyreference">getDependencyReference <a href="#getdependencyreference" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, dependency)</code></p>
<p>返回给定模块对依赖的引用。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 有问题的模块。</li>
<li><code>dependency</code> - 要引用的依赖。</li>
</ul>
<h3 id="processdependenciesblocksforchunkgroups">processDependenciesBlocksForChunkGroups <a href="#processdependenciesblocksforchunkgroups" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (inputChunkGroups)</code></p>
<p>通过 <code>Module</code> 图创建 <code>Chunk</code> 图。该过程分为两个阶段完成。阶段一：遍历模块图，在 <code>chunkDependencies</code> 中创建一个基础 chunk 图。阶段二：通过基本 chunk 图遍历所有可能的方法并且跟踪可用模块。遍历过程中 <code>processDependenciesBlocksForChunkGroups</code> 将 chunk 相互连接，并将 <code>Blocks</code> 与 <code>Chunks</code> 连接. 当一个 chunk 的所有模块都已经可用且未连接不需要的 chunk 时，它将停止遍历。</p>
<p>参数：</p>
<ul>
<li><code>inputChunkGroups</code> - 被处理的 chunk 组。</li>
</ul>
<h3 id="removereasonsofdependencyblock">removeReasonsOfDependencyBlock <a href="#removereasonsofdependencyblock" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, block)</code></p>
<p>移除模块与依赖块之间的关系。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要移除的模块关系。</li>
<li><code>block</code> - 依赖块。</li>
</ul>
<h3 id="patchchunksafterreasonremoval">patchChunksAfterReasonRemoval <a href="#patchchunksafterreasonremoval" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (module, chunk)</code></p>
<p>删除依赖性原因后，修补模块和 chunk 的关系。被 <code>removeReasonsOfDependencyBlock</code> 自动调用。</p>
<p>参数：</p>
<ul>
<li><code>module</code> - 要修复关系的模块。</li>
<li><code>chunk</code> - 要修复关系的 chunk。</li>
</ul>
<h3 id="removechunkfromdependencies">removeChunkFromDependencies <a href="#removechunkfromdependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (block, chunk)</code></p>
<p>在除去依赖性原因后，从依赖块模块和 chunk 中移除给定的 chunk。会被 <code>removeReasonsOfDependencyBlock</code> 自动调用。</p>
<p>参数：</p>
<ul>
<li><code>block</code> - <code>Chunk</code> 的块连接。</li>
<li><code>chunk</code> - 从依赖中删除的块。</li>
</ul>
<h3 id="sortitemswithmoduleids">sortItemsWithModuleIds <a href="#sortitemswithmoduleids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<h3 id="sortitemswithchunkids">sortItemsWithChunkIds <a href="#sortitemswithchunkids" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<h3 id="summarizedependencies">summarizeDependencies <a href="#summarizedependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<h3 id="createhash">createHash <a href="#createhash" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<h3 id="modifyhash">modifyHash <a href="#modifyhash" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (update)</code></p>
<h3 id="createmoduleassets">createModuleAssets <a href="#createmoduleassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<h3 id="createchunkassets">createChunkAssets <a href="#createchunkassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<h3 id="getpath">getPath <a href="#getpath" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (filename, data)</code></p>
<p>返回插值路径。</p>
<p>参数：</p>
<ul>
<li><code>filename</code> - 用于通过哈希获取资源路径。</li>
<li><code>data</code> - 数据对象。</li>
</ul>
<h3 id="getpathwithinfo">getPathWithInfo <a href="#getpathwithinfo" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (filename, data)</code></p>
<p>返回插值路径和资源信息。</p>
<p>参数：</p>
<ul>
<li><code>filename</code> - 用于通过哈希获取资源路径。</li>
<li><code>data</code> - 数据对象。</li>
</ul>
<h3 id="createchildcompiler">createChildCompiler <a href="#createchildcompiler" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (name, outputOptions, plugins)</code></p>
<p>允许在 webpack 中运行另一个 webpack 实例。但是，子编译器会应用不同的设置和配置。他会从父编译器（或者顶级编译器）中复制所有的钩子(hook)和插件(plugin)，并且创建一个子 <code>Compiler</code> 实例。 返回值为创建好的 <code>Compiler</code> 实例。</p>
<p>参数：</p>
<ul>
<li><code>name</code> -  子 <code>Compiler</code> 的名称。</li>
<li><code>outputOptions</code> - 输出选项。</li>
<li><code>plugins</code> - 将被提供的 webpack 插件。</li>
</ul>
<h3 id="checkconstraints">checkConstraints <a href="#checkconstraints" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<h3 id="emitasset">emitAsset <a href="#emitasset" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (file, source, assetInfo = {})</code></p>
<blockquote class="warning">
<p>webpack 4.40.0 后可用。</p>
</blockquote>
<p>参数：</p>
<ul>
<li><code>file</code> - 资源名称。</li>
<li><code>source</code> - 资源来源。</li>
<li><code>assetInfo</code> - 附加资源信息。</li>
</ul>
<h3 id="updateasset">updateAsset <a href="#updateasset" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (file, newSourceOrFunction, assetInfoUpdateOrFunction)</code></p>
<blockquote class="warning">
<p>webpack 4.40.0 后可用。</p>
</blockquote>
<p>参数：</p>
<ul>
<li><code>file</code> - 资源名称。</li>
<li><code>newSourceOrFunction</code> - 新资源来源或将旧资源转换为新资源的函数。</li>
<li><code>assetInfoUpdateOrFunction</code> - 新资源信息或将旧资源转换为新资源的函数。</li>
</ul>
<h3 id="getassets">getAssets <a href="#getassets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<blockquote class="warning">
<p>webpack 4.40.0 后可用。</p>
</blockquote>
<p>返回当前编译下所有资源的数组。</p>
<h3 id="getasset">getAsset <a href="#getasset" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function (name)</code></p>
<blockquote class="warning">
<p>webpack 4.40.0 后可用。</p>
</blockquote>
<p>参数：</p>
<p><code>name</code> - 要返回的资源名称。</p>
</div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/webpack"><img alt="webpack" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->webpack</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">起步</a><a class="footer__link" href="/organization/">组织</a><a class="footer__link" href="/starter-kits/">配套工具</a><a class="footer__link" href="/comparison/">比较</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">商店</a><a class="footer__link" href="/glossary/">概念术语</a><a class="footer__link" href="/branding/">品牌</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">更新日志</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="/7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script></body></html>