(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{346:function(n,a,s){"use strict";s.r(a),a.default='<p><code>output</code> 位于对象最顶级键(key)，包括了一组选项，指示 webpack 如何去输出、以及在哪里输出你的「bundle、asset 和其他你所打包或使用 webpack 载入的任何内容」。</p>\n<h2 id="outputauxiliarycomment"><code>output.auxiliaryComment</code> <a href="#outputauxiliarycomment" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code> <code>object</code></p>\n<p>在和 <a href="#outputlibrary"><code>output.library</code></a> 和 <a href="#outputlibrarytarget"><code>output.libraryTarget</code></a> 一起使用时，此选项允许用户向导出容器(export wrapper)中插入注释。要为 <code>libraryTarget</code> 每种类型都插入相同的注释，将 <code>auxiliaryComment</code> 设置为一个字符串：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    library<span class="token punctuation">:</span> <span class="token string">\'someLibName\'</span><span class="token punctuation">,</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'umd\'</span><span class="token punctuation">,</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'someLibName.js\'</span><span class="token punctuation">,</span>\n    auxiliaryComment<span class="token punctuation">:</span> <span class="token string">\'Test Comment\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>将会生成如下：</p>\n<p><strong>someLibName.js</strong></p>\n<pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// Test Comment</span>\n  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">\'object\'</span> <span class="token operator">&#x26;&#x26;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">\'object\'</span><span class="token punctuation">)</span>\n    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// Test Comment</span>\n  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">\'function\'</span> <span class="token operator">&#x26;&#x26;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span>\n    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'lodash\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// Test Comment</span>\n  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">\'object\'</span><span class="token punctuation">)</span>\n    exports<span class="token punctuation">[</span><span class="token string">\'someLibName\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'lodash\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// Test Comment</span>\n  <span class="token keyword">else</span>\n    root<span class="token punctuation">[</span><span class="token string">\'someLibName\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>root<span class="token punctuation">[</span><span class="token string">\'_\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>__WEBPACK_EXTERNAL_MODULE_1__<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>对于 <code>libraryTarget</code> 每种类型的注释进行更细粒度地控制，请传入一个对象：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">//...</span>\n    auxiliaryComment<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n      root<span class="token punctuation">:</span> <span class="token string">\'Root Comment\'</span><span class="token punctuation">,</span>\n      commonjs<span class="token punctuation">:</span> <span class="token string">\'CommonJS Comment\'</span><span class="token punctuation">,</span>\n      commonjs2<span class="token punctuation">:</span> <span class="token string">\'CommonJS2 Comment\'</span><span class="token punctuation">,</span>\n      amd<span class="token punctuation">:</span> <span class="token string">\'AMD Comment\'</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputchunkfilename"><code>output.chunkFilename</code> <a href="#outputchunkfilename" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'[id].js\'</code></p>\n<p>此选项决定了非入口(non-entry) chunk 文件的名称。有关可取的值的详细信息，请查看 <a href="#outputfilename"><code>output.filename</code></a> 选项。</p>\n<p>注意，这些文件名需要在运行时根据 chunk 发送的请求去生成。因此，需要在 webpack runtime 输出 bundle 值时，将 chunk id 的值对应映射到占位符(如 <code>[name]</code> 和 <code>[chunkhash]</code>)。这会增加文件大小，并且在任何 chunk 的占位符值修改后，都会使 bundle 失效。</p>\n<p>默认使用 <code>[id].js</code> 或从 <a href="#outputfilename"><code>output.filename</code></a> 中推断出的值（<code>[name]</code> 会被预先替换为 <code>[id]</code> 或 <code>[id].</code>）。</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">//...</span>\n    chunkFilename<span class="token punctuation">:</span> <span class="token string">\'[id].js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputchunkloadtimeout"><code>output.chunkLoadTimeout</code> <a href="#outputchunkloadtimeout" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>number = 120000</code></p>\n<p>chunk 请求到期之前的毫秒数，默认为 120000。从 webpack 2.6.0 开始支持此选项。</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">//...</span>\n    chunkLoadTimeout<span class="token punctuation">:</span> <span class="token number">30000</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputchunkcallbackname"><code>output.chunkCallbackName</code> <a href="#outputchunkcallbackname" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'webpackChunkwebpack\'</code></p>\n<p>回调函数的名称在 Web Workers 环境中 webpack 加载 chunks 时使用。</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">//...</span>\n    chunkCallbackName<span class="token punctuation">:</span> <span class="token string">\'myCustomFunc\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputcrossoriginloading"><code>output.crossOriginLoading</code> <a href="#outputcrossoriginloading" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean = false</code> <code>string: \'anonymous\' | \'use-credentials\'</code></p>\n<p>告诉 webpack 启用 <a href="https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-crossorigin">cross-origin 属性</a> 加载 chunk。仅在 <a href="/configuration/target/"><code>target</code></a> 设置为 <code>\'web\'</code> 时生效，通过使用 JSONP 来添加脚本标签，实现按需加载模块。</p>\n<ul>\n<li><code>\'anonymous\'</code> - <strong>不带凭据(credential)</strong> 启用跨域加载</li>\n<li><code>\'use-credentials\'</code> - <strong>携带凭据(credential)</strong> 启用跨域加载</li>\n</ul>\n<h2 id="outputdevtoolfallbackmodulefilenametemplate"><code>output.devtoolFallbackModuleFilenameTemplate</code> <a href="#outputdevtoolfallbackmodulefilenametemplate" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code> <code>function (info)</code></p>\n<p>当上面的模板字符串或函数产生重复时使用的备用内容。</p>\n<p>查看 <a href="#outputdevtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>。</p>\n<h2 id="outputdevtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code> <a href="#outputdevtoolmodulefilenametemplate" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'webpack://[namespace]/[resource-path]?[loaders]\'</code> <code>function (info) => string</code></p>\n<p>此选项仅在 「<a href="/configuration/devtool"><code>devtool</code></a> 使用了需要模块名称的选项」时使用。</p>\n<p>自定义每个 source map 的 <code>sources</code> 数组中使用的名称。可以通过传递模板字符串(template string)或者函数来完成。例如，当使用 <code>devtool: \'eval\'</code>，默认值是：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    devtoolModuleFilenameTemplate<span class="token punctuation">:</span> <span class="token string">\'webpack://[namespace]/[resource-path]?[loaders]\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>模板字符串(template string)中做以下替换（通过 webpack 内部的 <a href="https://github.com/webpack/webpack/blob/master/lib/ModuleFilenameHelpers.js"><code>ModuleFilenameHelpers</code></a>）：</p>\n<table>\n<thead>\n<tr>\n<th>Template</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[absolute-resource-path]<p class="description mobile">绝对路径文件名</p></p></div></td>\n<td class="description desktop">绝对路径文件名</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[all-loaders]<p class="description mobile">自动和显式的 loader，并且参数取决于第一个 loader 名称</p></p></div></td>\n<td class="description desktop">自动和显式的 loader，并且参数取决于第一个 loader 名称</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[hash]<p class="description mobile">模块标识符的 hash</p></p></div></td>\n<td class="description desktop">模块标识符的 hash</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[id]<p class="description mobile">模块标识符</p></p></div></td>\n<td class="description desktop">模块标识符</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[loaders]<p class="description mobile">显式的 loader，并且参数取决于第一个 loader 名称</p></p></div></td>\n<td class="description desktop">显式的 loader，并且参数取决于第一个 loader 名称</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[resource]<p class="description mobile">用于解析文件的路径和用于第一个 loader 的任意查询参数</p></p></div></td>\n<td class="description desktop">用于解析文件的路径和用于第一个 loader 的任意查询参数</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[resource-path]<p class="description mobile">不带任何查询参数，用于解析文件的路径</p></p></div></td>\n<td class="description desktop">不带任何查询参数，用于解析文件的路径</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>Description</p></div>\n<div class="content"><p>[namespace]<p class="description mobile">模块命名空间。在构建成为一个 library 之后，通常也是 library 名称，否则为空</p></p></div></td>\n<td class="description desktop">模块命名空间。在构建成为一个 library 之后，通常也是 library 名称，否则为空</td>\n</tr>\n</tbody>\n</table>\n<p>当使用一个函数，同样的选项要通过 <code>info</code> 参数并使用驼峰式(camel-cased)：</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    devtoolModuleFilenameTemplate<span class="token punctuation">:</span> info <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`webpack:///</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token punctuation">.</span>resourcePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token punctuation">.</span>loaders<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>如果多个模块产生相同的名称，使用 <a href="#outputdevtoolfallbackmodulefilenametemplate"><code>output.devtoolFallbackModuleFilenameTemplate</code></a> 来代替这些模块。</p>\n<h2 id="outputdevtoolnamespace"><code>output.devtoolNamespace</code> <a href="#outputdevtoolnamespace" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code></p>\n<p>此选项确定 <a href="#outputdevtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a> 使用的模块名称空间。未指定时的默认值为：<a href="#outputlibrary"><code>output.library</code></a>。在加载多个通过 webpack 构建的 library 时，用于防止 source map 中源文件路径冲突。</p>\n<p>例如，如果你有两个 library，分别使用命名空间 <code>library1</code> 和 <code>library2</code>，并且都有一个文件 <code>./src/index.js</code>（可能具有不同内容），它们会将这些文件暴露为 <code>webpack://library1/./src/index.js</code> 和 <code>webpack://library2/./src/index.js</code>。</p>\n<h2 id="outputfilename"><code>output.filename</code> <a href="#outputfilename" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code> <code>function (pathData, assetInfo) => string</code></p>\n<p>此选项决定了每个输出 bundle 的名称。这些 bundle 将写入到 <a href="#outputpath"><code>output.path</code></a> 选项指定的目录下。</p>\n<p>对于单个<a href="/configuration/entry-context#entry"><code>入口</code></a>起点，filename 会是一个静态名称。</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'bundle.js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>然而，当通过多个入口起点(entry point)、代码拆分(code splitting)或各种插件(plugin)创建多个 bundle，应该使用以下一种替换方式，来赋予每个 bundle 一个唯一的名称……</p>\n<p>使用入口名称：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'[name].bundle.js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>使用内部 chunk id</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'[id].bundle.js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>使用每次构建过程中，唯一的 hash 生成</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'[name].[hash].bundle.js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>使用基于每个 chunk 内容的 hash：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'[chunkhash].bundle.js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>Using hashes generated for extracted content:</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'[contenthash].bundle.css\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>Using function to return the filename:</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    filename<span class="token punctuation">:</span> <span class="token punctuation">(</span>pathData<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> pathData<span class="token punctuation">.</span>chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'main\'</span> <span class="token operator">?</span> <span class="token string">\'[name].js\'</span><span class="token punctuation">:</span> <span class="token string">\'[name]/[name].js\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>请确保已阅读过 <a href="/guides/caching">指南 - 缓存</a> 的详细信息。这里涉及更多步骤，不仅仅是设置此选项。</p>\n<p>注意此选项被称为文件名，但是你还是可以使用像 <code>\'js/[name]/bundle.js\'</code> 这样的文件夹结构。</p>\n<p>注意，此选项不会影响那些「按需加载 chunk」的输出文件。对于这些文件，请使用 <a href="#outputchunkfilename"><code>output.chunkFilename</code></a> 选项来控制输出。通过 loader 创建的文件也不受影响。在这种情况下，你必须尝试 loader 特定的可用选项。</p>\n<h2 id="template-strings">Template strings <a href="#template-strings" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p>可以使用以下替换模板字符串（通过 webpack 内部的<a href="https://github.com/webpack/webpack/blob/master/lib/TemplatedPathPlugin.js"><code>TemplatedPathPlugin</code></a>）:</p>\n<table>\n<thead>\n<tr>\n<th>模板</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><div class="title"><p>模板</p><p>描述</p></div>\n<div class="content"><p>[hash]<p class="description mobile">模块标识符(module identifier)的 hash</p></p></div></td>\n<td class="description desktop">模块标识符(module identifier)的 hash</td>\n</tr>\n<tr>\n<td><div class="title"><p>模板</p><p>描述</p></div>\n<div class="content"><p>[contenthash]<p class="description mobile">文件内容 hash，每个资源生成的 hash 都是不同的</p></p></div></td>\n<td class="description desktop">文件内容 hash，每个资源生成的 hash 都是不同的</td>\n</tr>\n<tr>\n<td><div class="title"><p>模板</p><p>描述</p></div>\n<div class="content"><p>[chunkhash]<p class="description mobile">chunk 内容的 hash</p></p></div></td>\n<td class="description desktop">chunk 内容的 hash</td>\n</tr>\n<tr>\n<td><div class="title"><p>模板</p><p>描述</p></div>\n<div class="content"><p>[name]<p class="description mobile">模块名称</p></p></div></td>\n<td class="description desktop">模块名称</td>\n</tr>\n<tr>\n<td><div class="title"><p>模板</p><p>描述</p></div>\n<div class="content"><p>[id]<p class="description mobile">模块标识符(module identifier)</p></p></div></td>\n<td class="description desktop">模块标识符(module identifier)</td>\n</tr>\n<tr>\n<td><div class="title"><p>模板</p><p>描述</p></div>\n<div class="content"><p>[query]<p class="description mobile">模块的 query，例如，文件名 <code>?</code> 后面的字符串</p></p></div></td>\n<td class="description desktop">模块的 query，例如，文件名 \n<code>?</code>\n 后面的字符串</td>\n</tr>\n<tr>\n<td><div class="title"><p>模板</p><p>描述</p></div>\n<div class="content"><p>[function]<p class="description mobile">The function, which can return filename [string]</p></p></div></td>\n<td class="description desktop">The function, which can return filename \n[\nstring\n]</td>\n</tr>\n</tbody>\n</table>\n<p><code>[hash]</code> 和 <code>[chunkhash]</code> 的长度可以使用 <code>[hash:16]</code>（默认为 20）来指定。或者，通过指定<a href="#outputhashdigestlength"><code>output.hashDigestLength</code></a> 在全局配置长度。</p>\n<p>当你要在实际文件名中使用占位符时，webpack 会过滤出需要替换的占位符。例如，输出一个文件 <code>[name].js</code>， 你必须通过在括号之间添加反斜杠来转义<code>[name]</code>占位符。 因此，<code>[\\name\\]</code> 生成 <code>[name]</code> 而不是 <code>name</code>。</p>\n<p>例如：<code>[\\id\\]</code> 生成 <code>[id]</code> 而不是 <code>id</code>。</p>\n<p>如果将这个选项设为一个函数，函数将返回一个包含上面表格中替换信息的对象。</p>\n<blockquote class="tip">\n<p>在使用 <a href="/plugins/extract-text-webpack-plugin"><code>ExtractTextWebpackPlugin</code></a> 时，可以用 <code>[contenthash]</code> 来获取提取文件的 hash（既不是 <code>[hash]</code> 也不是 <code>[chunkhash]</code>）。</p>\n</blockquote>\n<h2 id="outputassetmodulefilename"><code>output.assetModuleFilename</code> <a href="#outputassetmodulefilename" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p>参考 <a href="#outputfilename"><code>output.filename</code></a> 不过应用于 <a href="/guides/asset-modules/">Asset Modules</a></p>\n<h2 id="outputglobalobject"><code>output.globalObject</code> <a href="#outputglobalobject" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'window\'</code></p>\n<p>When targeting a library, especially when <code>libraryTarget</code> is <code>\'umd\'</code>, this option indicates what global object will be used to mount the library. To make UMD build available on both browsers and Node.js, set <code>output.globalObject</code> option to <code>\'this\'</code>.</p>\n<p>For example:</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    library<span class="token punctuation">:</span> <span class="token string">\'myLib\'</span><span class="token punctuation">,</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'umd\'</span><span class="token punctuation">,</span>\n    filename<span class="token punctuation">:</span> <span class="token string">\'myLib.js\'</span><span class="token punctuation">,</span>\n    globalObject<span class="token punctuation">:</span> <span class="token string">\'this\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputuniquename"><code>output.uniqueName</code> <a href="#outputuniquename" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code></p>\n<p>在全局环境下为防止多个 webpack 运行时 冲突所使用的唯一名称。默认使用 <a href="/configuration/output/#outputlibrary"><code>output.library</code></a> 名称或者上下文中的 <code>package.json</code> 的 包名称(package name)， 如果两者都不存在，值为 <code>\'\'</code>。</p>\n<p><code>output.uniqueName</code> 将用于生成唯一全局变量:</p>\n<ul>\n<li><a href="/configuration/output/#outputjsonpfunction"><code>output.jsonpFunction</code></a></li>\n<li><a href="/configuration/output/#outputchunkcallbackname"><code>output.chunkCallbackName</code></a></li>\n</ul>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    uniqueName<span class="token punctuation">:</span> <span class="token string">\'my-package-xyz\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputhashdigest"><code>output.hashDigest</code> <a href="#outputhashdigest" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'hex\'</code></p>\n<p>在生成 hash 时使用的编码方式。支持 Node.js <a href="https://nodejs.org/api/crypto.html#crypto_hash_digest_encoding"><code>hash.digest</code></a> 的所有编码。对文件名使用 <code>\'base64\'</code>，可能会出现问题，因为 base64 字母表中具有 <code>/</code> 这个字符(character)。同样的，<code>\'latin1\'</code> 规定可以含有任何字符(character)。</p>\n<h2 id="outputhashdigestlength"><code>output.hashDigestLength</code> <a href="#outputhashdigestlength" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>number = 20</code></p>\n<p>散列摘要的前缀长度。</p>\n<h2 id="outputhashfunction"><code>output.hashFunction</code> <a href="#outputhashfunction" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'md4\'</code> <code>function</code></p>\n<p>散列算法。支持 Node.JS <a href="https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options"><code>crypto.createHash</code></a> 的所有功能。从 <code>4.0.0-alpha2</code> 开始，<code>hashFunction</code> 现在可以是一个返回自定义 hash 的构造函数。出于性能原因，你可以提供一个不加密的哈希函数(non-crypto hash function)。</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    hashFunction<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'metrohash\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MetroHash64\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>确保 hash 函数有可访问的 <code>update</code> 和 <code>digest</code> 方法。</p>\n<h2 id="outputhashsalt"><code>output.hashSalt</code> <a href="#outputhashsalt" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p>一个可选的加盐值，通过 Node.JS <a href="https://nodejs.org/api/crypto.html#crypto_hash_update_data_inputencoding"><code>hash.update</code></a> 来更新哈希。</p>\n<h2 id="outputhotupdatechunkfilename"><code>output.hotUpdateChunkFilename</code> <a href="#outputhotupdatechunkfilename" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'[id].[hash].hot-update.js\'</code></p>\n<p>自定义热更新 chunk 的文件名。可选的值的详细信息，请查看 <a href="#outputfilename"><code>output.filename</code></a> 选项。</p>\n<p>占位符只能是 <code>[id]</code> 和 <code>[hash]</code>，默认值是：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    hotUpdateChunkFilename<span class="token punctuation">:</span> <span class="token string">\'[id].[hash].hot-update.js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<blockquote class="tip">\n<p>通常，你不需要修改 <code>output.hotUpdateChunkFilename</code>.</p>\n</blockquote>\n<h2 id="outputhotupdatefunction"><code>output.hotUpdateFunction</code> <a href="#outputhotupdatefunction" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code></p>\n<p>只在 <a href="/configuration/target/"><code>target</code></a> 设置为 <code>\'web\'</code> 时使用，用于加载热更新(hot update)的 JSONP 函数。</p>\n<p>JSONP 函数用于异步加载(async load)热更新(hot-update) chunk。</p>\n<p>详细请查看 <a href="#outputjsonpfunction"><code>output.jsonpFunction</code></a>。</p>\n<h2 id="outputhotupdatemainfilename"><code>output.hotUpdateMainFilename</code> <a href="#outputhotupdatemainfilename" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'[hash].hot-update.json\'</code> <code>function</code></p>\n<p>自定义热更新的主文件名(main filename)。<code>[hash]</code> 是唯一可用的占位符。</p>\n<blockquote class="tip">\n<p>通常，你不需要修改 <code>output.hotUpdateMainFilename</code>.</p>\n</blockquote>\n<h2 id="outputjsonpfunction"><code>output.jsonpFunction</code> <a href="#outputjsonpfunction" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'webpackJsonp\'</code></p>\n<p>仅在 <a href="/configuration/target/"><code>target</code></a> 设置为 <code>\'web\'</code> 时生效，通过使用 JSONP 来实现按需加载模块。</p>\n<p>JSONP 函数用于异步加载 chunk，或者拼接多个初始 chunk(SplitChunksPlugin, AggressiveSplittingPlugin)。</p>\n<p>如果使用了 <a href="#outputlibrary"><code>output.library</code></a> 选项，library 名称会自动与 <code>output.jsonpFunction</code> 的值拼接在一起。</p>\n<blockquote class="warning">\n<p>如果在同一网页中使用了多个（来自不同 compilation 的）webpack runtime，在全局名称空间中存在 on-demand chunk(按需 chunk) 冲突的风险。</p>\n</blockquote>\n<p>默认的 on-demand chunk 的输出以如下开始：</p>\n<p><strong>example-on-demand-chunk.js</strong></p>\n<pre><code class="hljs language-javascript"><span class="token punctuation">(</span>window<span class="token punctuation">.</span>webpackJsonp <span class="token operator">=</span> window<span class="token punctuation">.</span>webpackJsonp <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>修改 <code>output.jsonpFunction</code> 以安全使用同一网页上的多个 webpack runtime：</p>\n<p><strong>webpack.config.flight-widget.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    jsonpFunction<span class="token punctuation">:</span> <span class="token string">\'wpJsonpFlightsWidget\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>On-demand chunks content would now change to:</p>\n<p><strong>example-on-demand-chunk.js</strong></p>\n<pre><code class="hljs language-javascript"><span class="token punctuation">(</span>window<span class="token punctuation">.</span>wpJsonpFlightsWidget <span class="token operator">=</span> window<span class="token punctuation">.</span>wpJsonpFlightsWidget <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputlibrary"><code>output.library</code> <a href="#outputlibrary" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code> <code>object</code></p>\n<blockquote class="tip">\n<p><code>object</code> 从 webpack 3.1.0 开始应用。用于 <code>libraryTarget: \'umd\'</code>。</p>\n</blockquote>\n<p><code>output.library</code> 的值的作用，取决于<a href="#outputlibrarytarget"><code>output.libraryTarget</code></a> 选项的值；完整的详细信息请查阅该章节。注意，<code>output.libraryTarget</code> 的默认选项是 <code>var</code>，所以如果使用以下配置选项：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    library<span class="token punctuation">:</span> <span class="token string">\'MyLibrary\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>如果生成的输出文件，是在 HTML 页面中作为一个 script 标签引入，则变量 <code>MyLibrary</code> 将与入口文件的返回值绑定。</p>\n<blockquote class="warning">\n<p>注意，如果将<code>数组</code>作为 <code>entry</code>，那么只会暴露数组中的最后一个模块。如果将<code>对象</code>作为 <code>entry</code>，还可以使用 <code>array</code> 语法暴露（具体查看<a href="https://github.com/webpack/webpack/tree/master/examples/multi-part-library">这个示例</a> for details)）。</p>\n</blockquote>\n<blockquote class="tip">\n<p>有关 <code>output.library</code> 以及 <code>output.libraryTarget</code> 详细信息，请查看<a href="/guides/author-libraries/">创建 library 指南</a>。</p>\n</blockquote>\n<h2 id="ouputscripttype">ouput.scriptType <a href="#ouputscripttype" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string: \'module\' | \'text/javascript\'</code> <code>boolean = false</code></p>\n<p>This option allows loading asynchronous chunks with a custom script type, such as <code>&#x3C;script type="module" ...></code>.</p>\n<blockquote class="tip">\n<p>If <a href="#outputmodule"><code>output.module</code></a> is set to <code>true</code>, <code>ouput.scriptType</code> will default to <code>\'module\'</code> instead of <code>false</code>.</p>\n</blockquote>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    scriptType<span class="token punctuation">:</span> <span class="token string">\'module\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputlibraryexport"><code>output.libraryExport</code> <a href="#outputlibraryexport" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string</code> <code>[string]</code></p>\n<p>Configure which module or modules will be exposed via the <code>libraryTarget</code>. It is <code>undefined</code> by default, same behaviour will be applied if you set <code>libraryTarget</code> to an empty string e.g. <code>\'\'</code> it will export the whole (namespace) object. The examples below demonstrate the effect of this configuration when using <code>libraryTarget: \'var\'</code>.</p>\n<p>The following configurations are supported:</p>\n<p><code>libraryExport: \'default\'</code> - The <strong>default export of your entry point</strong> will be assigned to the library target:</p>\n<pre><code class="hljs language-javascript"><span class="token comment">// if your entry has a default export of `MyDefaultModule`</span>\n<span class="token keyword">var</span> MyDefaultModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">;</span></code></pre>\n<p><code>libraryExport: \'MyModule\'</code> - The <strong>specified module</strong> will be assigned to the library target:</p>\n<pre><code class="hljs language-javascript"><span class="token keyword">var</span> MyModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>MyModule<span class="token punctuation">;</span></code></pre>\n<p><code>libraryExport: [\'MyModule\', \'MySubModule\']</code> - The array is interpreted as a <strong>path to a module</strong> to be assigned to the library target:</p>\n<pre><code class="hljs language-javascript"><span class="token keyword">var</span> MySubModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>MyModule<span class="token punctuation">.</span>MySubModule<span class="token punctuation">;</span></code></pre>\n<p>With the <code>libraryExport</code> configurations specified above, the resulting libraries could be utilized as such:</p>\n<pre><code class="hljs language-javascript">MyDefaultModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nMyModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nMySubModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputlibrarytarget"><code>output.libraryTarget</code> <a href="#outputlibrarytarget" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'var\'</code></p>\n<p>配置如何暴露 library。可以使用下面的选项中的任意一个。注意，此选项与分配给 <a href="#outputlibrary"><code>output.library</code></a> 的值一同使用。对于下面的所有示例，都假定将 <code>output.library</code> 的值配置为 <code>MyLibrary</code>。</p>\n<blockquote class="tip">\n<p>注意，下面的示例代码中的 <code>_entry_return_</code> 是入口起点返回的值。在 bundle 本身中，它是从入口起点、由 webpack 生成的函数的输出结果。</p>\n</blockquote>\n<h3 id="expose-a-variable">暴露为一个变量 <a href="#expose-a-variable" aria-hidden="true"><span class="icon icon-link"></span></a></h3>\n<p>这些选项将入口起点的返回值（例如，入口起点的任何导出值），在 bundle 包所引入的位置，赋值给 output.library 提供的变量名。</p>\n<p><code>libraryTarget: \'var\'</code> - （默认值）当 library 加载完成，<strong>入口起点的返回值</strong>将分配给一个变量：</p>\n<pre><code class="hljs language-javascript"><span class="token keyword">var</span> MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>\n\n<span class="token comment">// 在一个单独的 script...</span>\nMyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<blockquote class="warning">\n<p>当使用此选项时，将 <code>output.library</code> 设置为空，会因为没有变量导致无法赋值。</p>\n</blockquote>\n<p><code>libraryTarget: \'assign\'</code> - 这将产生一个隐含的全局变量，可能会潜在地重新分配到全局中已存在的值（谨慎使用）。.</p>\n<pre><code class="hljs language-javascript">MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span></code></pre>\n<p>注意，如果 <code>MyLibrary</code> 在作用域中未在前面代码进行定义，则你的 library 将被设置在全局作用域内。</p>\n<blockquote class="warning">\n<p>当使用此选项时，将 <code>output.library</code> 设置为空，将产生一个破损的输出 bundle。</p>\n</blockquote>\n<h3 id="expose-via-object-assignment">通过在对象上赋值暴露 <a href="#expose-via-object-assignment" aria-hidden="true"><span class="icon icon-link"></span></a></h3>\n<p>这些选项将入口起点的返回值（例如，入口起点的任何导出值）赋值给一个特定对象的属性（此名称由 <code>output.library</code> 定义）下。</p>\n<p>如果 <code>output.library</code> 未赋值为一个非空字符串，则默认行为是，将入口起点返回的所有属性都赋值给一个对象（此对象由 <code>output.libraryTarget</code> 特定），通过如下代码片段：</p>\n<pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">(</span>output<span class="token punctuation">.</span>libraryTarget<span class="token punctuation">,</span> _entry_return_<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<blockquote class="warning">\n<p>注意，不设置 <code>output.library</code> 将导致由入口起点返回的所有属性，都会被赋值给给定的对象；这里并不会检查现有的属性名是否存在。</p>\n</blockquote>\n<p><code>libraryTarget: "this"</code> - <strong>入口起点的返回值</strong>将分配给 this 的一个属性（此名称由 <code>output.library</code> 定义）下，<code>this</code> 的含义取决于你：</p>\n<pre><code class="hljs language-javascript"><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>\n\n<span class="token comment">// 在一个单独的 script...</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nMyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 this 是 window</span></code></pre>\n<p><code>libraryTarget: \'window\'</code> - <strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 <code>window</code> 对象的这个属性下。</p>\n<pre><code class="hljs language-javascript">window<span class="token punctuation">[</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>\n\nwindow<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p><code>libraryTarget: \'global\'</code> - <strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 <code>global</code> 对象的这个属性下。</p>\n<pre><code class="hljs language-javascript">global<span class="token punctuation">[</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>\n\nglobal<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p><code>libraryTarget: \'commonjs\'</code> - <strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 exports 对象。这个名称也意味着，模块用于 CommonJS 环境：</p>\n<pre><code class="hljs language-javascript">exports<span class="token punctuation">[</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>\n\n<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<h3 id="module-definition-systems">模块定义系统 <a href="#module-definition-systems" aria-hidden="true"><span class="icon icon-link"></span></a></h3>\n<p>这些选项将导致 bundle 带有更完整的模块头部，以确保与各种模块系统的兼容性。根据 <code>output.libraryTarget</code> 选项不同，<code>output.library</code> 选项将具有不同的含义。</p>\n<p><code>libraryTarget: \'commonjs2\'</code> - <strong>入口起点的返回值</strong>将分配给 <code>module.exports</code> 对象。这个名称也意味着模块用于 CommonJS 环境：</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>\n\n<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>注意，<code>output.library</code> 会被省略，因此对于此特定的 <code>output.libraryTarget</code>，无需再设置 <code>output.library</code> 。</p>\n<blockquote class="tip">\n<p>想要弄清楚 CommonJS 和 CommonJS2 之间的区别？虽然它们很相似，但二者之间存在一些微妙的差异，这通常与 webpack 上下文没有关联。（更多详细信息，请<a href="https://github.com/webpack/webpack/issues/1114">阅读此 issue</a>。）</p>\n</blockquote>\n<p><code>libraryTarget: \'amd\'</code> - 将你的 library 暴露为 AMD 模块。</p>\n<p>AMD 模块要求入口 chunk（例如使用 <code>&#x3C;script></code> 标签加载的第一个脚本）通过特定的属性定义，例如 <code>define</code> 和 <code>require</code>，它们通常由 RequireJS 或任何兼容的模块加载器提供（例如 almond）。否则，直接加载生成的 AMD bundle 将导致报错，如 <code>define is not defined</code>。</p>\n<p>所以，使用以下配置...</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    library<span class="token punctuation">:</span> <span class="token string">\'MyLibrary\'</span><span class="token punctuation">,</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'amd\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>生成的 output 将会使用 "MyLibrary" 作为模块名定义，即</p>\n<pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>可以在 script 标签中，将 bundle 作为一个模块整体引入，并且可以像这样调用 bundle：</p>\n<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>MyLibrary<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 使用 library 做一些事……</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>如果 <code>output.library</code> 未定义，将会生成以下内容。</p>\n<pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span> <span class="token comment">// 此模块返回值，是入口 chunk 返回的值</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>如果直接加载 <code>&#x3C;script></code> 标签，此 bundle 无法按预期运行，或者根本无法正常运行（在 almond loader 中）。只能通过文件的实际路径，在 RequireJS 兼容的异步模块加载器中运行，因此在这种情况下，如果这些设置直接暴露在服务器上，那么 <code>output.path</code> 和 <code>output.filename</code> 对于这个特定的设置可能变得很重要。</p>\n<p><code>libraryTarget: \'amd-require\'</code> - 这将使用立即执行的AMD <code>require(dependencies, factory)</code> 包装器包装您的输出。</p>\n<p> <code>\'amd-require\'</code> 目标（target）允许使用AMD依赖项，而无需单独的后续调用。与 <code>\'amd\'</code> 目标（target）一样, 这取决于在加载 webpack 输出的环境中适当可用的 <a href="https://github.com/amdjs/amdjs-api/blob/master/require.md"><code>require</code> function</a> 。</p>\n<p>对于此目标，库名称将被忽略。</p>\n<p><code>libraryTarget: \'umd\'</code> - 将你的 library 暴露为所有的模块定义下都可运行的方式。它将在 CommonJS, AMD 环境下运行，或将模块导出到 global 下的变量。了解更多请查看 <a href="https://github.com/umdjs/umd">UMD 仓库</a>。</p>\n<p>在这个例子中，你需要 <code>library</code> 属性来命名你的模块：</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    library<span class="token punctuation">:</span> <span class="token string">\'MyLibrary\'</span><span class="token punctuation">,</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'umd\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>最终输出如下：</p>\n<pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">\'object\'</span> <span class="token operator">&#x26;&#x26;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">\'object\'</span><span class="token punctuation">)</span>\n    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">\'function\'</span> <span class="token operator">&#x26;&#x26;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span>\n    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">\'object\'</span><span class="token punctuation">)</span>\n    exports<span class="token punctuation">[</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">else</span>\n    root<span class="token punctuation">[</span><span class="token string">\'MyLibrary\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">\'undefined\'</span> <span class="token operator">?</span> self <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>注意，省略 <code>library</code> 会导致将入口起点返回的所有属性，直接赋值给 root 对象，就像<a href="#expose-via-object-assignment">对象分配章节</a>。例如：</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'umd\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>输出结果如下：</p>\n<pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">\'object\'</span> <span class="token operator">&#x26;&#x26;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">\'object\'</span><span class="token punctuation">)</span>\n    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">\'function\'</span> <span class="token operator">&#x26;&#x26;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span>\n    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">\'object\'</span> <span class="token operator">?</span> exports <span class="token punctuation">:</span> root<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">\'undefined\'</span> <span class="token operator">?</span> self <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>从 webpack 3.1.0 开始，你可以将 <code>library</code> 指定为一个对象，用于给每个 target 起不同的名称：</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    library<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n      root<span class="token punctuation">:</span> <span class="token string">\'MyLibrary\'</span><span class="token punctuation">,</span>\n      amd<span class="token punctuation">:</span> <span class="token string">\'my-library\'</span><span class="token punctuation">,</span>\n      commonjs<span class="token punctuation">:</span> <span class="token string">\'my-common-library\'</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'umd\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p><code>libraryTarget: \'system\'</code> - This will expose your library as a <a href="https://github.com/systemjs/systemjs/blob/master/docs/system-register.md"><code>System.register</code></a>\nmodule. This feature was first released in <a href="https://github.com/webpack/webpack/releases/tag/v4.30.0">webpack 4.30.0</a>.</p>\n<p>System modules require that a global variable <code>System</code> is present in the browser when the webpack bundle is executed. Compiling to <code>System.register</code> format allows you to <code>System.import(\'/bundle.js\')</code> without additional configuration and have your webpack bundle loaded into the System module registry.</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    libraryTarget<span class="token punctuation">:</span> <span class="token string">\'system\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>Output:</p>\n<pre><code class="hljs language-javascript">System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>_export<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    setters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    execute<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// ...</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>By adding <code>output.library</code> to configuration in addition to having <code>output.libraryTarget</code> set to <code>system</code>, the output bundle will have the library name as an argument to <code>System.register</code>:</p>\n<pre><code class="hljs language-javascript">System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">\'my-library\'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>_export<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    setters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    execute<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// ...</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>你可以通过 <a href="https://github.com/systemjs/systemjs/blob/master/docs/system-register.md#format-definition">SystemJS context</a> 凭借 <code>__system_context__</code>:</p>\n<pre><code class="hljs language-javascript"><span class="token comment">// 记录当前系统模块的 URL</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__system_context__<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 导入一个系统模块，通过将当前的系统模块的 url 作为 parentUrl</span>\n__system_context__<span class="token punctuation">.</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">\'./other-file.js\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>m <span class="token operator">=></span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<h3 id="other-targets">其他 Targets <a href="#other-targets" aria-hidden="true"><span class="icon icon-link"></span></a></h3>\n<p><code>libraryTarget: \'jsonp\'</code> - 这将把入口起点的返回值，包裹到一个 jsonp 包装容器中</p>\n<pre><code class="hljs language-javascript"><span class="token function">MyLibrary</span><span class="token punctuation">(</span>_entry_return_<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>你的 library 的依赖将由 <a href="/configuration/externals/"><code>externals</code></a> 配置定义。</p>\n<h2 id="outputimportfunctionname"><code>output.importFunctionName</code> <a href="#outputimportfunctionname" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'import\'</code></p>\n<p>内部 <code>import()</code> 函数的名称. 可用于 polyfilling, 例如 通过 <a href="https://github.com/GoogleChromeLabs/dynamic-import-polyfill"><code>dynamic-import-polyfill</code></a>.</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    importFunctionName<span class="token punctuation">:</span> <span class="token string">\'__import__\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputpath"><code>output.path</code> <a href="#outputpath" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = path.join(process.cwd(), \'dist\')</code></p>\n<p>output 目录对应一个<strong>绝对路径</strong>。</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'dist/assets\'</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>注意，<code>[hash]</code> 在参数中被替换为编译过程(compilation)的 hash。详细信息请查看<a href="/guides/caching/">指南 - 缓存</a>。</p>\n<h2 id="outputpathinfo"><code>output.pathinfo</code> <a href="#outputpathinfo" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean</code></p>\n<p>告知 webpack 在 bundle 中引入「所包含模块信息」的相关注释。此选项在 <code>development</code> <a href="/concepts/mode/">模式</a>时的默认值是 <code>true</code>，而在 <code>production</code> <a href="/configuration/mode/">模式</a>时的默认值是 <code>false</code>。</p>\n<blockquote class="warning">\n<p>对于在开发环境(development)下阅读生成代码时，虽然通过这些注释可以提供非常有用的数据信息，但在生产环境(production)下，<strong>不应该</strong>使用。</p>\n</blockquote>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    pathinfo<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<blockquote class="tip">\n<p>这些注释也会被添加至经过 tree shaking 后生成的 bundle 中。</p>\n</blockquote>\n<h2 id="outputpublicpath"><code>output.publicPath</code> <a href="#outputpublicpath" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'\'</code> <code>function</code></p>\n<p>对于按需加载(on-demand-load)或加载外部资源(external resources)（如图片、文件等）来说，output.publicPath 是很重要的选项。如果指定了一个错误的值，则在加载这些资源时会收到 404 错误。</p>\n<p>此选项指定在浏览器中所引用的「此输出目录对应的<strong>公开 URL</strong>」。相对 URL(relative URL) 会被相对于 HTML 页面（或 <code>&#x3C;base></code> 标签）解析。相对于服务的 URL(Server-relative URL)，相对于协议的 URL(protocol-relative URL) 或绝对 URL(absolute URL) 也可是可能用到的，或者有时必须用到，例如：当将资源托管到 CDN 时。</p>\n<p>该选项的值是以 runtime(运行时) 或 loader(载入时) 所创建的每个 URL 为前缀。因此，在多数情况下，<strong>此选项的值都会以 <code>/</code> 结束</strong>。</p>\n<p>简单规则如下：<a href="#outputpath"><code>output.path</code></a> 中的 URL 以 HTML 页面为基准。</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'public/assets\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'https://cdn.example.com/assets/\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>对于这个配置：</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'/assets/\'</span><span class="token punctuation">,</span>\n    chunkFilename<span class="token punctuation">:</span> <span class="token string">\'[id].chunk.js\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>对于一个 chunk 请求，看起来像这样 <code>/assets/4.chunk.js</code>。</p>\n<p>对于一个输出 HTML 的 loader 可能会像这样输出：</p>\n<pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/assets/spinner.gif<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>\n<p>或者在加载 CSS 的一个图片时：</p>\n<pre><code class="hljs language-css"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(/assets/spinner.gif)</span><span class="token punctuation">;</span></code></pre>\n<p>webpack-dev-server 也会默认从 <code>publicPath</code> 为基准，使用它来决定在哪个目录下启用服务，来访问 webpack 输出的文件。</p>\n<p>注意，参数中的 <code>[hash]</code> 将会被替换为编译过程(compilation) 的 hash。详细信息请查看<a href="/guides/caching">指南 - 缓存</a>。</p>\n<p>示例：</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// One of the below</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'https://cdn.example.com/assets/\'</span><span class="token punctuation">,</span> <span class="token comment">// CDN（总是 HTTPS 协议）</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'//cdn.example.com/assets/\'</span><span class="token punctuation">,</span> <span class="token comment">// CDN（协议相同）</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'/assets/\'</span><span class="token punctuation">,</span> <span class="token comment">// 相对于服务(server-relative)</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'assets/\'</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'../assets/\'</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面</span>\n    publicPath<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面（目录相同）</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<p>在编译时(compile time)无法知道输出文件的 <code>publicPath</code> 的情况下，可以留空，然后在入口文件(entry file)处使用<a href="https://stackoverflow.com/questions/12934929/what-are-free-variables">自由变量(free variable)</a> <code>__webpack_public_path__</code>，以便在运行时(runtime)进行动态设置。</p>\n<pre><code class="hljs language-javascript">__webpack_public_path__ <span class="token operator">=</span> myRuntimePublicPath<span class="token punctuation">;</span>\n\n<span class="token comment">// 应用程序入口的其他部分</span></code></pre>\n<p>有关 <code>__webpack_public_path__</code> 的更多信息，请查看<a href="https://github.com/webpack/webpack/issues/2776#issuecomment-233208623">此讨论</a>。</p>\n<h2 id="outputsourcemapfilename"><code>output.sourceMapFilename</code> <a href="#outputsourcemapfilename" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'[file].map[query]\'</code></p>\n<p>仅在 <a href="/configuration/devtool/"><code>devtool</code></a> 设置为 <code>\'source-map\'</code> 时有效，此选项会向硬盘写入一个输出文件。</p>\n<p>可以使用 <a href="#output-filename">#output-filename</a> 中的 <code>[name]</code>, <code>[id]</code>, <code>[hash]</code> 和 <code>[chunkhash]</code> 替换符号。除此之外，还可以使用以下替换符号。<code>[file]</code> 占位符会被替换为原始文件的文件名。我们建议<strong>只使用 <code>[file]</code> 占位符</strong>，因为其他占位符在非 chunk 文件(non-chunk files)生成的 SourceMap 时不起作用。</p>\n<table>\n<thead>\n<tr>\n<th>Template</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><div class="title"><p>Template</p><p>描述</p></div>\n<div class="content"><p>[file]<p class="description mobile">模块文件名称</p></p></div></td>\n<td class="description desktop">模块文件名称</td>\n</tr>\n<tr>\n<td><div class="title"><p>Template</p><p>描述</p></div>\n<div class="content"><p>[filebase]<p class="description mobile">模块 <a href="https://nodejs.org/api/path.html#path_path_basename_path_ext">basename</a></p></p></div></td>\n<td class="description desktop">模块 \n<a href="https://nodejs.org/api/path.html#path_path_basename_path_ext">basename</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id="outputsourceprefix"><code>output.sourcePrefix</code> <a href="#outputsourceprefix" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>string = \'\'</code></p>\n<p>修改输出 bundle 中每行的前缀。</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    sourcePrefix<span class="token punctuation">:</span> <span class="token string">\'\\t\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<blockquote class="tip">\n<p>使用一些缩进会使 bundle 看起来更美观，但会导致多行字符串的问题。</p>\n</blockquote>\n<blockquote class="tip">\n<p>通常，你不需要修改 <code>output.sourcePrefix</code>。</p>\n</blockquote>\n<h2 id="outputstrictmoduleexceptionhandling"><code>output.strictModuleExceptionHandling</code> <a href="#outputstrictmoduleexceptionhandling" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean = false</code></p>\n<p>如果一个模块是在 <code>require</code> 时抛出异常，告诉 webpack 从模块实例缓存(<code>require.cache</code>)中删除这个模块。</p>\n<p>出于性能原因，默认为 <code>false</code>。</p>\n<p>当设置为 <code>false</code> 时，该模块不会从缓存中删除，这将造成仅在第一次 <code>require</code> 调用时抛出异常（会导致与 node.js 不兼容）。</p>\n<p>例如，设想一下 <code>module.js</code>：</p>\n<pre><code class="hljs language-javascript"><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">\'error\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>将 <code>strictModuleExceptionHandling</code> 设置为 <code>false</code>，只有第一个 <code>require</code> 抛出异常：</p>\n<pre><code class="hljs language-javascript"><span class="token comment">// with strictModuleExceptionHandling = false</span>\n<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'module\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x3C;- 抛出</span>\n<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'module\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x3C;- 不抛出</span></code></pre>\n<p>相反，将 <code>strictModuleExceptionHandling</code> 设置为 <code>true</code>，这个模块所有的 <code>require</code> 都抛出异常：</p>\n<pre><code class="hljs language-javascript"><span class="token comment">// with strictModuleExceptionHandling = true</span>\n<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'module\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x3C;- 抛出</span>\n<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'module\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x3C;- 仍然抛出</span></code></pre>\n<h2 id="outputumdnameddefine"><code>output.umdNamedDefine</code> <a href="#outputumdnameddefine" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean</code></p>\n<p>When using <code>libraryTarget: "umd"</code>, setting <code>output.umdNamedDefine</code> to <code>true</code> will name the AMD module of the UMD build. Otherwise an anonymous <code>define</code> is used.</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    umdNamedDefine<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputenabledlibrarytypes"><code>output.enabledLibraryTypes</code> <a href="#outputenabledlibrarytypes" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>[string]</code></p>\n<p>入口点可用的 library 类型列表.</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    enabledLibraryTypes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'module\'</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputfutureemitassets"><code>output.futureEmitAssets</code> <a href="#outputfutureemitassets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean = false</code></p>\n<p>Tells webpack to use the future version of asset emitting logic, which allows freeing memory of assets after emitting. It could break plugins which assume that assets are still readable after they were emitted.</p>\n<blockquote class="warning">\n<p><code>output.futureEmitAssets</code> option will be removed in webpack v5.0.0 and this behaviour will become the new default.</p>\n</blockquote>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    futureEmitAssets<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputecmaversion"><code>output.ecmaVersion</code> <a href="#outputecmaversion" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>number = 6</code></p>\n<p>告诉 webpack 在生成代码时的最大限度 EcmaScript 版本. 它应该是下列之一:</p>\n<ul>\n<li>应该 >= 5, 应该 &#x3C;= 11</li>\n<li>应该 >= 2009, 应该 &#x3C;= 2020</li>\n</ul>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    ecmaVersion<span class="token punctuation">:</span> <span class="token number">6</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<blockquote class="tip">\n<p>在 webpack 4 中  <code>output.ecmaVersion</code> 的默认值是 <code>5</code>.</p>\n</blockquote>\n<h2 id="outputcomparebeforeemit"><code>output.compareBeforeEmit</code> <a href="#outputcomparebeforeemit" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean = true</code></p>\n<p>告诉webpack在写入输出文件系统(output file system)之前检查要发出的文件是否已经存在并且具有相同的内容。</p>\n<blockquote class="warning">\n<p>当文件存在并且内容没有变更时，webpack 不会输出该文件。</p>\n</blockquote>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    compareBeforeEmit<span class="token punctuation">:</span> <span class="token boolean">false</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputiife"><code>output.iife</code> <a href="#outputiife" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean = true</code></p>\n<p>告诉 webpack 添加 <a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE">IIFE</a> 外层包裹生成的代码.</p>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    iife<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n<h2 id="outputmodule"><code>output.module</code> <a href="#outputmodule" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><code>boolean = true</code></p>\n<p>允许输出的 JavaScript 文件作为模块类型。 设置 <code>output.iife</code> 为 <code>false</code>, <code>output.libraryTarget</code> 为 <code>\'module\'</code>, <code>output.scriptType</code> 为 <code>\'module\'</code> 和 <code>terserOptions.module</code> 为 <code>true</code></p>\n<blockquote class="warning">\n<p><code>output.module</code> 是一个实验性的功能， 想要使用的话，通过设置 <a href="/configuration/experiments/#experiments"><code>experiments.outputModule</code></a> 为 <code>true</code>.</p>\n</blockquote>\n<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    module<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>\n'}}]);