<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>webpack 官方中文文档</title><meta name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换（transform）、打包（bundle）或包裹（package）任何资源(resource or asset)。"/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="webpack 官方中文文档"/><meta property="og:description" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换（transform）、打包（bundle）或包裹（package）任何资源(resource or asset)。"/><meta property="og:image" content="https://webpack.js.org/dcd5e077cf9f54ebe52d4f7ebe8c3080.png"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><meta name="keywords" content="webpack5, webpack, webpack 中文文档, 印记中文, docschina, docschina.org, webpack.docschina.org, doc.react-china.org, nodejs.cn, vue.docschina.org, babel.docschina.org, parceljs.docschina.org, rollup.docschina.org, koajs.docschina.org"/><link rel="icon" type="image/x-icon" href="/bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="/50fdfa6f49416fbf9d03.css"/><link rel="stylesheet" href="/3faf4b4c06cd5fb9953a.css"/><link rel="manifest" href="/manifest.json"/><link rel="canonical" href="https://webpack.js.org/concepts/module-federation/"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="/icon_192x192.png"/><link rel="icon" sizes="512x512" href="/icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="/icon_180x180.png"/><link rel="mask-icon" href="/aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="/"><img class="logo" src="/e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  navigation__item--active" href="/concepts/">文档</a><a class="navigation__item  " href="/contribute/">参与贡献</a><a class="navigation__item  " href="/vote/">投票</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">博客</a><a href="https://docschina.org" target="_blank" rel="noopener" class="navigation__item  ">印记中文</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="/57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"><a class="navigation-sub__link " title="指南" content="指南" href="/guides/">指南</a><a class="navigation-sub__link " title="api" content="api" href="/api/">api</a><a class="navigation-sub__link " title="plugin" content="plugin" href="/plugins/">plugin</a><a class="navigation-sub__link navigation-sub__link--active" title="概念" content="概念" href="/concepts/">概念</a><a class="navigation-sub__link " title="配置" content="配置" href="/configuration/">配置</a><a class="navigation-sub__link " title="迁移" content="迁移" href="/migrate/">迁移</a><a class="navigation-sub__link " title="loader" content="loader" href="/loaders/">loader</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="/bf176a25b4f8227fea804854c98dc5e2.png"/><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="sidebar__shields"><a href="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="/concepts/printable/" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/">概念</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="入口(entry)"><a href="/concepts/#entry">入口(entry)</a></li><li class="sidebar-item__anchor" title="输出(output)"><a href="/concepts/#output">输出(output)</a></li><li class="sidebar-item__anchor" title="loader"><a href="/concepts/#loaders">loader</a></li><li class="sidebar-item__anchor" title="插件(plugin)"><a href="/concepts/#plugins">插件(plugin)</a></li><li class="sidebar-item__anchor" title="模式(mode)"><a href="/concepts/#mode">模式(mode)</a></li><li class="sidebar-item__anchor" title="浏览器兼容性(browser compatibility)"><a href="/concepts/#browser-compatibility">浏览器兼容性(browser compatibility)</a></li><li class="sidebar-item__anchor" title="环境(environment)"><a href="/concepts/#environment">环境(environment)</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/entry-points/">入口起点(entry points)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="单个入口（简写）语法"><a href="/concepts/entry-points/#single-entry-shorthand-syntax">单个入口（简写）语法</a></li><li class="sidebar-item__anchor" title="对象语法"><a href="/concepts/entry-points/#object-syntax">对象语法</a></li><li class="sidebar-item__anchor" title="常见场景"><a href="/concepts/entry-points/#scenarios">常见场景</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="分离 app(应用程序) 和 vendor(第三方库) 入口"><a href="/concepts/entry-points/#separate-app-and-vendor-entries">分离 app(应用程序) 和 vendor(第三方库) 入口</a></li><li class="sidebar-item__anchor" title="多页面应用程序"><a href="/concepts/entry-points/#multi-page-application">多页面应用程序</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/output/">输出(output)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="用法"><a href="/concepts/output/#usage">用法</a></li><li class="sidebar-item__anchor" title="多个入口起点"><a href="/concepts/output/#multiple-entry-points">多个入口起点</a></li><li class="sidebar-item__anchor" title="高级进阶"><a href="/concepts/output/#advanced">高级进阶</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/loaders/">loader</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="示例"><a href="/concepts/loaders/#example">示例</a></li><li class="sidebar-item__anchor" title="使用 loader"><a href="/concepts/loaders/#using-loaders">使用 loader</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="配置方式"><a href="/concepts/loaders/#configuration">配置方式</a></li><li class="sidebar-item__anchor" title="内联方式"><a href="/concepts/loaders/#inline">内联方式</a></li><li class="sidebar-item__anchor" title="CLI 方式"><a href="/concepts/loaders/#cli">CLI 方式</a></li></ul></li><li class="sidebar-item__anchor" title="loader 特性"><a href="/concepts/loaders/#loader-features">loader 特性</a></li><li class="sidebar-item__anchor" title="解析 loader"><a href="/concepts/loaders/#resolving-loaders">解析 loader</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/plugins/">plugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="剖析"><a href="/concepts/plugins/#anatomy">剖析</a></li><li class="sidebar-item__anchor" title="用法"><a href="/concepts/plugins/#usage">用法</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="配置方式"><a href="/concepts/plugins/#configuration">配置方式</a></li><li class="sidebar-item__anchor" title="Node API 方式"><a href="/concepts/plugins/#node-api">Node API 方式</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/configuration/">配置（Configuration）</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="基本配置"><a href="/concepts/configuration/#simple-configuration">基本配置</a></li><li class="sidebar-item__anchor" title="多个 target"><a href="/concepts/configuration/#multiple-targets">多个 target</a></li><li class="sidebar-item__anchor" title="使用其它配置语言"><a href="/concepts/configuration/#using-other-configuration-languages">使用其它配置语言</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/modules/">模块（Modules）</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="何为 webpack 模块"><a href="/concepts/modules/#what-is-a-webpack-module">何为 webpack 模块</a></li><li class="sidebar-item__anchor" title="支持的模块类型"><a href="/concepts/modules/#supported-module-types">支持的模块类型</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/module-resolution/">模块解析（Module Resolution）</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="webpack 中的解析规则"><a href="/concepts/module-resolution/#resolving-rules-in-webpack">webpack 中的解析规则</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="绝对路径"><a href="/concepts/module-resolution/#absolute-paths">绝对路径</a></li><li class="sidebar-item__anchor" title="相对路径"><a href="/concepts/module-resolution/#relative-paths">相对路径</a></li><li class="sidebar-item__anchor" title="模块路径"><a href="/concepts/module-resolution/#module-paths">模块路径</a></li></ul></li><li class="sidebar-item__anchor" title="解析 loader"><a href="/concepts/module-resolution/#resolving-loaders">解析 loader</a></li><li class="sidebar-item__anchor" title="缓存"><a href="/concepts/module-resolution/#caching">缓存</a></li></ul></div></div><div><div class="sidebar-item sidebar-item--open "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/module-federation/">Module Federation</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Motivation"><a href="/concepts/module-federation/#motivation">Motivation</a></li><li class="sidebar-item__anchor" title="Low-level concepts"><a href="/concepts/module-federation/#low-level-concepts">Low-level concepts</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Overriding"><a href="/concepts/module-federation/#overriding">Overriding</a></li></ul></li><li class="sidebar-item__anchor" title="High-level concepts"><a href="/concepts/module-federation/#high-level-concepts">High-level concepts</a></li><li class="sidebar-item__anchor" title="Building blocks"><a href="/concepts/module-federation/#building-blocks">Building blocks</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="OverridablesPlugin (low level)"><a href="/concepts/module-federation/#overridablesplugin-low-level">OverridablesPlugin (low level)</a></li><li class="sidebar-item__anchor" title="ContainerPlugin (low level)"><a href="/concepts/module-federation/#containerplugin-low-level">ContainerPlugin (low level)</a></li><li class="sidebar-item__anchor" title="ContainerReferencePlugin (low level)"><a href="/concepts/module-federation/#containerreferenceplugin-low-level">ContainerReferencePlugin (low level)</a></li><li class="sidebar-item__anchor" title="ModuleFederationPlugin (high level)"><a href="/concepts/module-federation/#modulefederationplugin-high-level">ModuleFederationPlugin (high level)</a></li></ul></li><li class="sidebar-item__anchor" title="Concept goals"><a href="/concepts/module-federation/#concept-goals">Concept goals</a></li><li class="sidebar-item__anchor" title="Use cases"><a href="/concepts/module-federation/#use-cases">Use cases</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Separate builds per page"><a href="/concepts/module-federation/#separate-builds-per-page">Separate builds per page</a></li><li class="sidebar-item__anchor" title="Components library as container"><a href="/concepts/module-federation/#components-library-as-container">Components library as container</a></li></ul></li><li class="sidebar-item__anchor" title="Dynamic Remote Containers"><a href="/concepts/module-federation/#dynamic-remote-containers">Dynamic Remote Containers</a></li><li class="sidebar-item__anchor" title="Troubleshooting"><a href="/concepts/module-federation/#troubleshooting">Troubleshooting</a></li></ul></div></div><div><div class="sidebar-item  sidebar-item--disabled"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title" href="/concepts/dependency-graph/">依赖图(dependency graph)</a></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/targets/">target</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="用法"><a href="/concepts/targets/#usage">用法</a></li><li class="sidebar-item__anchor" title="多 target"><a href="/concepts/targets/#multiple-targets">多 target</a></li><li class="sidebar-item__anchor" title="资源"><a href="/concepts/targets/#resources">资源</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/manifest/">manifest</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="runtime"><a href="/concepts/manifest/#runtime">runtime</a></li><li class="sidebar-item__anchor" title="manifest"><a href="/concepts/manifest/#manifest">manifest</a></li><li class="sidebar-item__anchor" title="问题"><a href="/concepts/manifest/#the-problem">问题</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/hot-module-replacement/">模块热替换(hot module replacement)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="这一切是如何运行的？"><a href="/concepts/hot-module-replacement/#how-it-works">这一切是如何运行的？</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="在应用程序中"><a href="/concepts/hot-module-replacement/#in-the-application">在应用程序中</a></li><li class="sidebar-item__anchor" title="在 compiler 中"><a href="/concepts/hot-module-replacement/#in-the-compiler">在 compiler 中</a></li><li class="sidebar-item__anchor" title="在模块中"><a href="/concepts/hot-module-replacement/#in-a-module">在模块中</a></li><li class="sidebar-item__anchor" title="在 runtime 中"><a href="/concepts/hot-module-replacement/#in-the-runtime">在 runtime 中</a></li></ul></li><li class="sidebar-item__anchor" title="起步"><a href="/concepts/hot-module-replacement/#get-started">起步</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/why-webpack/">为什么选择 webpack</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="立即调用函数表达式(IIFE) - Immediately invoked function expressions"><a href="/concepts/why-webpack/#iifes---immediately-invoked-function-expressions">立即调用函数表达式(IIFE) - Immediately invoked function expressions</a></li><li class="sidebar-item__anchor" title="感谢 Node.js，JavaScript 模块诞生了"><a href="/concepts/why-webpack/#birth-of-javascript-modules-happened-thanks-to-nodejs">感谢 Node.js，JavaScript 模块诞生了</a></li><li class="sidebar-item__anchor" title="npm + Node.js + modules - 大规模分发模块"><a href="/concepts/why-webpack/#npm--nodejs--modules----mass-distribution">npm + Node.js + modules - 大规模分发模块</a></li><li class="sidebar-item__anchor" title="ESM - ECMAScript 模块"><a href="/concepts/why-webpack/#esm---ecmascript-modules">ESM - ECMAScript 模块</a></li><li class="sidebar-item__anchor" title="依赖自动收集"><a href="/concepts/why-webpack/#automatic-dependency-collection">依赖自动收集</a></li><li class="sidebar-item__anchor" title="看起来都不是很好……"><a href="/concepts/why-webpack/#wouldnt-it-be-nice">看起来都不是很好……</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/concepts/under-the-hood/">揭示内部原理</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="主要部分"><a href="/concepts/under-the-hood/#the-main-parts">主要部分</a></li><li class="sidebar-item__anchor" title="chunk"><a href="/concepts/under-the-hood/#chunks">chunk</a></li><li class="sidebar-item__anchor" title="output(输出)"><a href="/concepts/under-the-hood/#output">output(输出)</a></li></ul></div></div><div class="sidebar__docs-version">You are reading webpack <!-- -->5<!-- --> documentation. Change here to:<ul><li><a rel="nofollow" href="https://v4.webpack.docschina.org">webpack <!-- -->4<!-- --> documentation</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/docschina/webpack.js.org/edit/cn/src/content/concepts/module-federation.md">编辑此页<i class="page-links__icon icon-edit"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">打印文档<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>Module Federation</h1><div><h2 id="motivation">Motivation <a href="#motivation" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Multiple separate builds should form a single application. These separate builds should not have dependencies between each other, so they can be developed and deployed individually.</p>
<p>This is often known as Micro-Frontends, but is not limited to that.</p>
<h2 id="low-level-concepts">Low-level concepts <a href="#low-level-concepts" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>We distinguish between local and remote modules. Local modules are normal modules which are part of the current build. Remote modules are modules that are not part of the current build and loaded from a so-called container at the runtime.</p>
<p>Loading remote modules is considered asynchronous operation. When using a remote module these asynchronous operations will be placed in the next chunk loading operation(s) that is between the remote module and the entrypoint. It's not possible to use a remote module without a chunk loading operation.</p>
<p>A chunk loading operation is usually an <code>import()</code> call, but older constructs like <code>require.ensure</code> or <code>require([...])</code> are supported as well.</p>
<p>A container is created through a container entry, which exposes asynchronous access to the specific modules. The exposed access is separated into two steps:</p>
<ol>
<li>loading the module (asynchronous)</li>
<li>evaluating the module (synchronous).</li>
</ol>
<p>Step 1 will be done during the chunk loading. Step 2 will be done during the module evaluation interleaved with other (local and remote) modules. This way, evaluation order is unaffected by converting a module from local to remote or the other way around.</p>
<p>It is possible to nest a container. Containers can use modules from other containers. Circular dependencies between container are also possible.</p>
<h3 id="overriding">Overriding <a href="#overriding" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A container is able to flag selected local modules as "overridable". A consumer of the container is able to provide "overrides", which are modules that replace one of the overridable modules of the container. All modules of the container will use the replacement module instead of the local module when the consumer provides one. When the consumer doesn't provide a replacement module, all modules of the container will use the local one.</p>
<p>The container will manage overridable modules in a way that they do not need to be downloaded when they have been overridden by the consumer. This usually happens by placing them into separate chunks.</p>
<p>On the other hand, the provider of the replacement modules, will only provide asynchronous loading functions. It allows the container to load replacement modules only when they are needed. The provider will manage replacement modules in a way that they do not need to be downloaded at all when they are not requested by the container. This usually happens by placing them into separate chunks.</p>
<p>A "name" is used to identify overridable modules from the container.</p>
<p>Overrides are provided in a similar way as the container exposes modules, separated into two steps:</p>
<ol>
<li>Loading (asynchronous)</li>
<li>evaluating (asynchronous)</li>
</ol>
<blockquote class="warning">
<p>When nesting is used, providing overrides to one container will automatically override the modules with the same "name" in the nested container(s).</p>
</blockquote>
<p>Overrides must be provided before the modules of the container are loaded. Overridables that are used in initial chunk, can only be overridden by a synchronous module override that doesn't use Promises. Once evaluated, overridables are no longer overridable.</p>
<h2 id="high-level-concepts">High-level concepts <a href="#high-level-concepts" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Each build acts as a container and also consumes other builds as containers. This way each build is able to access any other exposed module by loading it from its container.</p>
<p>Shared modules are modules that are both overridable and provided as overrides to nested container. They usually point to the same module in each build, e.g. the same library.</p>
<p>The <code>packageName</code> option allows setting a package name to look for a <code>requiredVersion</code>. It is automatically inferred for the module requests by default, set <code>requiredVersion</code> to <code>false</code> when automatic infer should be disabled.</p>
<h2 id="building-blocks">Building blocks <a href="#building-blocks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<h3 id="overridablesplugin-low-level"><code>OverridablesPlugin</code> (low level) <a href="#overridablesplugin-low-level" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>This plugin makes specific modules "overridable". A local API (<code>__webpack_override__</code>) allows to provide overrides.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> OverridablesPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/OverridablesPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">OverridablesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// we define an overridable module with OverridablesPlugin</span>
        test1<span class="token punctuation">:</span> <span class="token string">'./src/test1.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-js"><span class="token function">__webpack_override__</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// here we override test1 module</span>
  test1<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'I will override test1 module under src'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="containerplugin-low-level"><code>ContainerPlugin</code> (low level) <a href="#containerplugin-low-level" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>This plugin creates an additional container entry with the specified exposed modules. It also uses the <code>OverridablesPlugin</code> internally and exposes the <code>override</code> API to consumer of the container.</p>
<h3 id="containerreferenceplugin-low-level"><code>ContainerReferencePlugin</code> (low level) <a href="#containerreferenceplugin-low-level" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>This plugin adds specific references to containers as externals and allows to import remote modules from these containers. It also calls the <code>override</code> API of these containers to provide overrides to them. Local overrides (via <code>__webpack_override__</code> or <code>override</code> API when build is also a container) and specified overrides are provided to all referenced containers.</p>
<h3 id="modulefederationplugin-high-level"><code>ModuleFederationPlugin</code> (high level) <a href="#modulefederationplugin-high-level" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>This plugin combines <code>ContainerPlugin</code> and <code>ContainerReferencePlugin</code>. Overrides and overridables are combined into a single list of specified shared modules.</p>
<h2 id="concept-goals">Concept goals <a href="#concept-goals" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<ul>
<li>It should be possible to expose and use any module type that webpack supports.</li>
<li>Chunk loading should load everything needed in parallel (web: single round-trip to server).</li>
<li>
<p>Control from consumer to container</p>
<ul>
<li>Overriding modules is a one-directional operation.</li>
<li>Sibling containers cannot override each other's modules.</li>
</ul>
</li>
<li>
<p>Concept should be environment-independent.</p>
<ul>
<li>Usable in web, Node.js, etc.</li>
</ul>
</li>
<li>
<p>Relative and absolute request in shared:</p>
<ul>
<li>Will always be provided, even if not used.</li>
<li>Will resolve relative to <code>config.context</code>.</li>
<li>Does not use a <code>requiredVersion</code> by default.</li>
</ul>
</li>
<li>
<p>Module requests in shared:</p>
<ul>
<li>Are only provided when they are used.</li>
<li>Will match all used equal module requests in your build.</li>
<li>Will provide all matching modules.</li>
<li>Will extract <code>requiredVersion</code> from package.json at this position in the graph.</li>
<li>Could provide and consume multiple different version when you have nested node_modules.</li>
</ul>
</li>
<li>Module requests with trailing <code>/</code> in shared will match all module requests with this prefix.</li>
</ul>
<h2 id="use-cases">Use cases <a href="#use-cases" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<h3 id="separate-builds-per-page">Separate builds per page <a href="#separate-builds-per-page" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Each page of a Single Page Application is exposed from container build in a separate build. The application shell is also a separate build referencing all pages as remote modules. This way each page can be separately deployed. The application shell is deployed when routes are updated or new routes are added. The application shell defines commonly used libraries as shared modules to avoid duplication of them in the page builds.</p>
<h3 id="components-library-as-container">Components library as container <a href="#components-library-as-container" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Many applications share a common components library which could be built as a container with each component exposed. Each application consumes components from the components library container. Changes to the components library can be separately deployed without the need to re-deploy all applications. The application automatically uses the up-to-date version of the components library.</p>
<h2 id="dynamic-remote-containers">Dynamic Remote Containers <a href="#dynamic-remote-containers" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The container interface supports <code>get</code> and <code>init</code> methods.
<code>init</code> is a <code>async</code> compatible method that is called with one argument: the shared scope object. This object is used as a shared scope in the remote container and is filled with the provided modules from a host.
It can be leveraged to connect remote containers to a host container dynamically at runtime.</p>
<p><strong>init.js</strong></p>
<pre><code class="hljs language-js"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Initializes the shared scope. Fills it with known provided modules from this build and all remotes</span>
  <span class="token keyword">await</span> <span class="token function">__webpack_init_sharing__</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> container <span class="token operator">=</span> window<span class="token punctuation">.</span>someContainer<span class="token punctuation">;</span> <span class="token comment">// or get the container somewhere else</span>
  <span class="token comment">// Initialize the container, it may provide shared modules</span>
  <span class="token keyword">await</span> container<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>__webpack_share_scopes__<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">await</span> container<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The container tries to provide shared modules, but if the shared module has already been used, a warning and the provided shared module will be ignored. The container might still use it as a fallback.</p>
<p>This way you could dynamically load an A/B test which provides a different version of a shared module.
T> Ensure you have loaded the container before attempting to dynamically connect a remote container.</p>
<p>Example:</p>
<p><strong>init.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">loadComponent</span><span class="token punctuation">(</span>scope<span class="token punctuation">,</span> module<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Initializes the shared scope. Fills it with known provided modules from this build and all remotes</span>
    <span class="token keyword">await</span> <span class="token function">__webpack_init_sharing__</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> container <span class="token operator">=</span> window<span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// or get the container somewhere else</span>
    <span class="token comment">// Initialize the container, it may provide shared modules</span>
    <span class="token keyword">await</span> container<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>__webpack_share_scopes__<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> Module <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Module<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">loadComponent</span><span class="token punctuation">(</span><span class="token string">'abtests'</span><span class="token punctuation">,</span> <span class="token string">'test123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a href="https://github.com/module-federation/module-federation-examples/tree/master/advanced-api/dynamic-remotes">See full implementation</a></p>
<h2 id="troubleshooting">Troubleshooting <a href="#troubleshooting" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><strong><code>Uncaught Error: Shared module is not available for eager consumption</code></strong></p>
<p>The application is eagerly executing an application which is operating as an omnidirectional host. There are options to choose from:</p>
<p>You can set the dependency as eager inside the advanced API of Module Federation, which doesn’t put the modules in an async chunk, but provides them synchronously. This allows us to use these shared modules in the initial chunk. But be careful as all provided and fallback modules will always be downloaded. It’s recommended to provide it only at one point of your application, e.g. the shell.</p>
<p>We strongly recommend using an asynchronous boundary. It will split out the initialization code of a larger chunk to avoid any additional round trips and improve performance in general.</p>
<p>For example, your entry looked like this:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Let's create <code>bootstrap.js</code> file and move contents of the entry into it, and import that bootstrap into the entry:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ import('./bootstrap');</span>
<span class="token deleted">- import React from 'react';</span>
<span class="token deleted">- import ReactDOM from 'react-dom';</span>
<span class="token deleted">- import App from './App';</span>
<span class="token deleted">- ReactDOM.render(&#x3C;App />, document.getElementById('root'));</span></code></pre>
<p><strong>bootstrap.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ import React from 'react';</span>
<span class="token inserted">+ import ReactDOM from 'react-dom';</span>
<span class="token inserted">+ import App from './App';</span>
<span class="token inserted">+ ReactDOM.render(&#x3C;App />, document.getElementById('root'));</span></code></pre>
<p>This method works but can have limitations or drawbacks.</p>
<p>Setting <code>eager: true</code> for dependency via the <code>ModuleFederationPlugin</code></p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token comment">// ...</span>
<span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  shared<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>deps<span class="token punctuation">,</span>
    react<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      eager<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong><code>Uncaught Error: Module "./Button" does not exist in container.</code></strong></p>
<p>It likely does not say <code>"./Button"</code>, but the error message will look similar. This issue is typically seen if you are upgrading from webpack beta.16 to webpack beta.17.</p>
<p>Within ModuleFederationPlugin. Change the exposes from:</p>
<pre><code class="hljs language-diff">new ModuleFederationPlugin({
  exposes: {
<span class="token deleted">-   'Button': './src/Button'</span>
<span class="token inserted">+   './Button':'./src/Button'</span>
  }
});</code></pre>
<p><strong><code>Uncaught TypeError: fn is not a function</code></strong></p>
<p>You are likely missing the remote container, make sure its added.
If you have the container loaded for the remote you are trying to consume, but still see this error, add the host container's remote container file to the HTML as well.</p>
</div><div class="adjacent-links"><div class="adjacent-links__prev"><div>« Previous</div><a class="adjacent-links__link" href="/concepts/module-resolution/">模块解析（Module Resolution）</a></div><div class="adjacent-links__next"><div class="adjacent-links__label--next">Next »</div><a class="adjacent-links__link" href="/concepts/dependency-graph/">依赖图(dependency graph)</a></div></div><div class="related__section"><hr/><h3>Further Reading</h3><ul><li><a href="https://medium.com/swlh/webpack-5-module-federation-a-game-changer-to-javascript-architecture-bcdd30e02669">Webpack 5 Module Federation: A game-changer in JavaScript architecture</a></li><li><a href="https://github.com/module-federation/module-federation-examples">Explanations and Examples</a></li><li><a href="https://www.youtube.com/playlist?list=PLWSiF9YHHK-DqsFHGYbeAMwbd9xcZbEWJ">Module Federation YouTube Playlist</a></li></ul></div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/sokra"><img alt="sokra" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->sokra</span></a><a class="contributor" href="https://github.com/chenxsan"><img alt="chenxsan" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->chenxsan</span></a><a class="contributor" href="https://github.com/EugeneHlushko"><img alt="EugeneHlushko" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->EugeneHlushko</span></a><a class="contributor" href="https://github.com/jamesgeorge007"><img alt="jamesgeorge007" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->jamesgeorge007</span></a><a class="contributor" href="https://github.com/ScriptedAlchemy"><img alt="ScriptedAlchemy" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->ScriptedAlchemy</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">起步</a><a class="footer__link" href="/organization/">组织</a><a class="footer__link" href="/starter-kits/">配套工具</a><a class="footer__link" href="/comparison/">比较</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">商店</a><a class="footer__link" href="/glossary/">概念术语</a><a class="footer__link" href="/branding/">品牌</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">更新日志</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="/7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script src="/vendor.bundle.js?t=10087"></script><script src="/index.bundle.js?t=10087"></script></body></html>